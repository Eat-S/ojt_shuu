(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();/**
* @vue/shared v3.5.14
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function ja(e){const t=Object.create(null);for(const n of e.split(","))t[n]=1;return n=>n in t}const wt={},ur=[],Ce=()=>{},Mp=()=>!1,Ki=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&(e.charCodeAt(2)>122||e.charCodeAt(2)<97),qa=e=>e.startsWith("onUpdate:"),ae=Object.assign,Ha=(e,t)=>{const n=e.indexOf(t);n>-1&&e.splice(n,1)},Lp=Object.prototype.hasOwnProperty,yt=(e,t)=>Lp.call(e,t),st=Array.isArray,cr=e=>Rr(e)==="[object Map]",Gi=e=>Rr(e)==="[object Set]",Ou=e=>Rr(e)==="[object Date]",Fp=e=>Rr(e)==="[object RegExp]",lt=e=>typeof e=="function",Dt=e=>typeof e=="string",ke=e=>typeof e=="symbol",bt=e=>e!==null&&typeof e=="object",Th=e=>(bt(e)||lt(e))&&lt(e.then)&&lt(e.catch),wh=Object.prototype.toString,Rr=e=>wh.call(e),Bp=e=>Rr(e).slice(8,-1),Ih=e=>Rr(e)==="[object Object]",za=e=>Dt(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,ns=ja(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Wi=e=>{const t=Object.create(null);return n=>t[n]||(t[n]=e(n))},Up=/-(\w)/g,yn=Wi(e=>e.replace(Up,(t,n)=>n?n.toUpperCase():"")),$p=/\B([A-Z])/g,Wn=Wi(e=>e.replace($p,"-$1").toLowerCase()),Ah=Wi(e=>e.charAt(0).toUpperCase()+e.slice(1)),qo=Wi(e=>e?`on${Ah(e)}`:""),fn=(e,t)=>!Object.is(e,t),hr=(e,...t)=>{for(let n=0;n<e.length;n++)e[n](...t)},bh=(e,t,n,r=!1)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,writable:r,value:n})},yi=e=>{const t=parseFloat(e);return isNaN(t)?e:t};let ku;const Qi=()=>ku||(ku=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Yi(e){if(st(e)){const t={};for(let n=0;n<e.length;n++){const r=e[n],s=Dt(r)?zp(r):Yi(r);if(s)for(const i in s)t[i]=s[i]}return t}else if(Dt(e)||bt(e))return e}const jp=/;(?![^(]*\))/g,qp=/:([^]+)/,Hp=/\/\*[^]*?\*\//g;function zp(e){const t={};return e.replace(Hp,"").split(jp).forEach(n=>{if(n){const r=n.split(qp);r.length>1&&(t[r[0].trim()]=r[1].trim())}}),t}function Xi(e){let t="";if(Dt(e))t=e;else if(st(e))for(let n=0;n<e.length;n++){const r=Xi(e[n]);r&&(t+=r+" ")}else if(bt(e))for(const n in e)e[n]&&(t+=n+" ");return t.trim()}const Kp="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",Gp=ja(Kp);function Ch(e){return!!e||e===""}function Wp(e,t){if(e.length!==t.length)return!1;let n=!0;for(let r=0;n&&r<e.length;r++)n=Ji(e[r],t[r]);return n}function Ji(e,t){if(e===t)return!0;let n=Ou(e),r=Ou(t);if(n||r)return n&&r?e.getTime()===t.getTime():!1;if(n=ke(e),r=ke(t),n||r)return e===t;if(n=st(e),r=st(t),n||r)return n&&r?Wp(e,t):!1;if(n=bt(e),r=bt(t),n||r){if(!n||!r)return!1;const s=Object.keys(e).length,i=Object.keys(t).length;if(s!==i)return!1;for(const a in e){const l=e.hasOwnProperty(a),c=t.hasOwnProperty(a);if(l&&!c||!l&&c||!Ji(e[a],t[a]))return!1}}return String(e)===String(t)}function Qp(e,t){return e.findIndex(n=>Ji(n,t))}const Rh=e=>!!(e&&e.__v_isRef===!0),ee=e=>Dt(e)?e:e==null?"":st(e)||bt(e)&&(e.toString===wh||!lt(e.toString))?Rh(e)?ee(e.value):JSON.stringify(e,Sh,2):String(e),Sh=(e,t)=>Rh(t)?Sh(e,t.value):cr(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((n,[r,s],i)=>(n[Ho(r,i)+" =>"]=s,n),{})}:Gi(t)?{[`Set(${t.size})`]:[...t.values()].map(n=>Ho(n))}:ke(t)?Ho(t):bt(t)&&!st(t)&&!Ih(t)?String(t):t,Ho=(e,t="")=>{var n;return ke(e)?`Symbol(${(n=e.description)!=null?n:t})`:e};/**
* @vue/reactivity v3.5.14
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let he;class Yp{constructor(t=!1){this.detached=t,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=he,!t&&he&&(this.index=(he.scopes||(he.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let t,n;if(this.scopes)for(t=0,n=this.scopes.length;t<n;t++)this.scopes[t].pause();for(t=0,n=this.effects.length;t<n;t++)this.effects[t].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let t,n;if(this.scopes)for(t=0,n=this.scopes.length;t<n;t++)this.scopes[t].resume();for(t=0,n=this.effects.length;t<n;t++)this.effects[t].resume()}}run(t){if(this._active){const n=he;try{return he=this,t()}finally{he=n}}}on(){++this._on===1&&(this.prevScope=he,he=this)}off(){this._on>0&&--this._on===0&&(he=this.prevScope,this.prevScope=void 0)}stop(t){if(this._active){this._active=!1;let n,r;for(n=0,r=this.effects.length;n<r;n++)this.effects[n].stop();for(this.effects.length=0,n=0,r=this.cleanups.length;n<r;n++)this.cleanups[n]();if(this.cleanups.length=0,this.scopes){for(n=0,r=this.scopes.length;n<r;n++)this.scopes[n].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!t){const s=this.parent.scopes.pop();s&&s!==this&&(this.parent.scopes[this.index]=s,s.index=this.index)}this.parent=void 0}}}function Xp(){return he}let It;const zo=new WeakSet;class Ph{constructor(t){this.fn=t,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,he&&he.active&&he.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,zo.has(this)&&(zo.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||Dh(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,Mu(this),xh(this);const t=It,n=Re;It=this,Re=!0;try{return this.fn()}finally{Nh(this),It=t,Re=n,this.flags&=-3}}stop(){if(this.flags&1){for(let t=this.deps;t;t=t.nextDep)Wa(t);this.deps=this.depsTail=void 0,Mu(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?zo.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){ca(this)&&this.run()}get dirty(){return ca(this)}}let Vh=0,rs,ss;function Dh(e,t=!1){if(e.flags|=8,t){e.next=ss,ss=e;return}e.next=rs,rs=e}function Ka(){Vh++}function Ga(){if(--Vh>0)return;if(ss){let t=ss;for(ss=void 0;t;){const n=t.next;t.next=void 0,t.flags&=-9,t=n}}let e;for(;rs;){let t=rs;for(rs=void 0;t;){const n=t.next;if(t.next=void 0,t.flags&=-9,t.flags&1)try{t.trigger()}catch(r){e||(e=r)}t=n}}if(e)throw e}function xh(e){for(let t=e.deps;t;t=t.nextDep)t.version=-1,t.prevActiveLink=t.dep.activeLink,t.dep.activeLink=t}function Nh(e){let t,n=e.depsTail,r=n;for(;r;){const s=r.prevDep;r.version===-1?(r===n&&(n=s),Wa(r),Jp(r)):t=r,r.dep.activeLink=r.prevActiveLink,r.prevActiveLink=void 0,r=s}e.deps=t,e.depsTail=n}function ca(e){for(let t=e.deps;t;t=t.nextDep)if(t.dep.version!==t.version||t.dep.computed&&(Oh(t.dep.computed)||t.dep.version!==t.version))return!0;return!!e._dirty}function Oh(e){if(e.flags&4&&!(e.flags&16)||(e.flags&=-17,e.globalVersion===ds)||(e.globalVersion=ds,!e.isSSR&&e.flags&128&&(!e.deps&&!e._dirty||!ca(e))))return;e.flags|=2;const t=e.dep,n=It,r=Re;It=e,Re=!0;try{xh(e);const s=e.fn(e._value);(t.version===0||fn(s,e._value))&&(e.flags|=128,e._value=s,t.version++)}catch(s){throw t.version++,s}finally{It=n,Re=r,Nh(e),e.flags&=-3}}function Wa(e,t=!1){const{dep:n,prevSub:r,nextSub:s}=e;if(r&&(r.nextSub=s,e.prevSub=void 0),s&&(s.prevSub=r,e.nextSub=void 0),n.subs===e&&(n.subs=r,!r&&n.computed)){n.computed.flags&=-5;for(let i=n.computed.deps;i;i=i.nextDep)Wa(i,!0)}!t&&!--n.sc&&n.map&&n.map.delete(n.key)}function Jp(e){const{prevDep:t,nextDep:n}=e;t&&(t.nextDep=n,e.prevDep=void 0),n&&(n.prevDep=t,e.nextDep=void 0)}let Re=!0;const kh=[];function Qe(){kh.push(Re),Re=!1}function Ye(){const e=kh.pop();Re=e===void 0?!0:e}function Mu(e){const{cleanup:t}=e;if(e.cleanup=void 0,t){const n=It;It=void 0;try{t()}finally{It=n}}}let ds=0;class Zp{constructor(t,n){this.sub=t,this.dep=n,this.version=n.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class Qa{constructor(t){this.computed=t,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0}track(t){if(!It||!Re||It===this.computed)return;let n=this.activeLink;if(n===void 0||n.sub!==It)n=this.activeLink=new Zp(It,this),It.deps?(n.prevDep=It.depsTail,It.depsTail.nextDep=n,It.depsTail=n):It.deps=It.depsTail=n,Mh(n);else if(n.version===-1&&(n.version=this.version,n.nextDep)){const r=n.nextDep;r.prevDep=n.prevDep,n.prevDep&&(n.prevDep.nextDep=r),n.prevDep=It.depsTail,n.nextDep=void 0,It.depsTail.nextDep=n,It.depsTail=n,It.deps===n&&(It.deps=r)}return n}trigger(t){this.version++,ds++,this.notify(t)}notify(t){Ka();try{for(let n=this.subs;n;n=n.prevSub)n.sub.notify()&&n.sub.dep.notify()}finally{Ga()}}}function Mh(e){if(e.dep.sc++,e.sub.flags&4){const t=e.dep.computed;if(t&&!e.dep.subs){t.flags|=20;for(let r=t.deps;r;r=r.nextDep)Mh(r)}const n=e.dep.subs;n!==e&&(e.prevSub=n,n&&(n.nextSub=e)),e.dep.subs=e}}const ha=new WeakMap,Hn=Symbol(""),fa=Symbol(""),ps=Symbol("");function ne(e,t,n){if(Re&&It){let r=ha.get(e);r||ha.set(e,r=new Map);let s=r.get(n);s||(r.set(n,s=new Qa),s.map=r,s.key=n),s.track()}}function Ke(e,t,n,r,s,i){const a=ha.get(e);if(!a){ds++;return}const l=c=>{c&&c.trigger()};if(Ka(),t==="clear")a.forEach(l);else{const c=st(e),f=c&&za(n);if(c&&n==="length"){const d=Number(r);a.forEach((m,_)=>{(_==="length"||_===ps||!ke(_)&&_>=d)&&l(m)})}else switch((n!==void 0||a.has(void 0))&&l(a.get(n)),f&&l(a.get(ps)),t){case"add":c?f&&l(a.get("length")):(l(a.get(Hn)),cr(e)&&l(a.get(fa)));break;case"delete":c||(l(a.get(Hn)),cr(e)&&l(a.get(fa)));break;case"set":cr(e)&&l(a.get(Hn));break}}Ga()}function nr(e){const t=_t(e);return t===e?t:(ne(t,"iterate",ps),Ie(e)?t:t.map(Kt))}function Zi(e){return ne(e=_t(e),"iterate",ps),e}const tm={__proto__:null,[Symbol.iterator](){return Ko(this,Symbol.iterator,Kt)},concat(...e){return nr(this).concat(...e.map(t=>st(t)?nr(t):t))},entries(){return Ko(this,"entries",e=>(e[1]=Kt(e[1]),e))},every(e,t){return qe(this,"every",e,t,void 0,arguments)},filter(e,t){return qe(this,"filter",e,t,n=>n.map(Kt),arguments)},find(e,t){return qe(this,"find",e,t,Kt,arguments)},findIndex(e,t){return qe(this,"findIndex",e,t,void 0,arguments)},findLast(e,t){return qe(this,"findLast",e,t,Kt,arguments)},findLastIndex(e,t){return qe(this,"findLastIndex",e,t,void 0,arguments)},forEach(e,t){return qe(this,"forEach",e,t,void 0,arguments)},includes(...e){return Go(this,"includes",e)},indexOf(...e){return Go(this,"indexOf",e)},join(e){return nr(this).join(e)},lastIndexOf(...e){return Go(this,"lastIndexOf",e)},map(e,t){return qe(this,"map",e,t,void 0,arguments)},pop(){return Wr(this,"pop")},push(...e){return Wr(this,"push",e)},reduce(e,...t){return Lu(this,"reduce",e,t)},reduceRight(e,...t){return Lu(this,"reduceRight",e,t)},shift(){return Wr(this,"shift")},some(e,t){return qe(this,"some",e,t,void 0,arguments)},splice(...e){return Wr(this,"splice",e)},toReversed(){return nr(this).toReversed()},toSorted(e){return nr(this).toSorted(e)},toSpliced(...e){return nr(this).toSpliced(...e)},unshift(...e){return Wr(this,"unshift",e)},values(){return Ko(this,"values",Kt)}};function Ko(e,t,n){const r=Zi(e),s=r[t]();return r!==e&&!Ie(e)&&(s._next=s.next,s.next=()=>{const i=s._next();return i.value&&(i.value=n(i.value)),i}),s}const em=Array.prototype;function qe(e,t,n,r,s,i){const a=Zi(e),l=a!==e&&!Ie(e),c=a[t];if(c!==em[t]){const m=c.apply(e,i);return l?Kt(m):m}let f=n;a!==e&&(l?f=function(m,_){return n.call(this,Kt(m),_,e)}:n.length>2&&(f=function(m,_){return n.call(this,m,_,e)}));const d=c.call(a,f,r);return l&&s?s(d):d}function Lu(e,t,n,r){const s=Zi(e);let i=n;return s!==e&&(Ie(e)?n.length>3&&(i=function(a,l,c){return n.call(this,a,l,c,e)}):i=function(a,l,c){return n.call(this,a,Kt(l),c,e)}),s[t](i,...r)}function Go(e,t,n){const r=_t(e);ne(r,"iterate",ps);const s=r[t](...n);return(s===-1||s===!1)&&Za(n[0])?(n[0]=_t(n[0]),r[t](...n)):s}function Wr(e,t,n=[]){Qe(),Ka();const r=_t(e)[t].apply(e,n);return Ga(),Ye(),r}const nm=ja("__proto__,__v_isRef,__isVue"),Lh=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(ke));function rm(e){ke(e)||(e=String(e));const t=_t(this);return ne(t,"has",e),t.hasOwnProperty(e)}class Fh{constructor(t=!1,n=!1){this._isReadonly=t,this._isShallow=n}get(t,n,r){if(n==="__v_skip")return t.__v_skip;const s=this._isReadonly,i=this._isShallow;if(n==="__v_isReactive")return!s;if(n==="__v_isReadonly")return s;if(n==="__v_isShallow")return i;if(n==="__v_raw")return r===(s?i?dm:jh:i?$h:Uh).get(t)||Object.getPrototypeOf(t)===Object.getPrototypeOf(r)?t:void 0;const a=st(t);if(!s){let c;if(a&&(c=tm[n]))return c;if(n==="hasOwnProperty")return rm}const l=Reflect.get(t,n,oe(t)?t:r);return(ke(n)?Lh.has(n):nm(n))||(s||ne(t,"get",n),i)?l:oe(l)?a&&za(n)?l:l.value:bt(l)?s?qh(l):Xa(l):l}}class Bh extends Fh{constructor(t=!1){super(!1,t)}set(t,n,r,s){let i=t[n];if(!this._isShallow){const c=vn(i);if(!Ie(r)&&!vn(r)&&(i=_t(i),r=_t(r)),!st(t)&&oe(i)&&!oe(r))return c?!1:(i.value=r,!0)}const a=st(t)&&za(n)?Number(n)<t.length:yt(t,n),l=Reflect.set(t,n,r,oe(t)?t:s);return t===_t(s)&&(a?fn(r,i)&&Ke(t,"set",n,r):Ke(t,"add",n,r)),l}deleteProperty(t,n){const r=yt(t,n);t[n];const s=Reflect.deleteProperty(t,n);return s&&r&&Ke(t,"delete",n,void 0),s}has(t,n){const r=Reflect.has(t,n);return(!ke(n)||!Lh.has(n))&&ne(t,"has",n),r}ownKeys(t){return ne(t,"iterate",st(t)?"length":Hn),Reflect.ownKeys(t)}}class sm extends Fh{constructor(t=!1){super(!0,t)}set(t,n){return!0}deleteProperty(t,n){return!0}}const im=new Bh,om=new sm,am=new Bh(!0);const da=e=>e,Zs=e=>Reflect.getPrototypeOf(e);function lm(e,t,n){return function(...r){const s=this.__v_raw,i=_t(s),a=cr(i),l=e==="entries"||e===Symbol.iterator&&a,c=e==="keys"&&a,f=s[e](...r),d=n?da:t?vi:Kt;return!t&&ne(i,"iterate",c?fa:Hn),{next(){const{value:m,done:_}=f.next();return _?{value:m,done:_}:{value:l?[d(m[0]),d(m[1])]:d(m),done:_}},[Symbol.iterator](){return this}}}}function ti(e){return function(...t){return e==="delete"?!1:e==="clear"?void 0:this}}function um(e,t){const n={get(s){const i=this.__v_raw,a=_t(i),l=_t(s);e||(fn(s,l)&&ne(a,"get",s),ne(a,"get",l));const{has:c}=Zs(a),f=t?da:e?vi:Kt;if(c.call(a,s))return f(i.get(s));if(c.call(a,l))return f(i.get(l));i!==a&&i.get(s)},get size(){const s=this.__v_raw;return!e&&ne(_t(s),"iterate",Hn),Reflect.get(s,"size",s)},has(s){const i=this.__v_raw,a=_t(i),l=_t(s);return e||(fn(s,l)&&ne(a,"has",s),ne(a,"has",l)),s===l?i.has(s):i.has(s)||i.has(l)},forEach(s,i){const a=this,l=a.__v_raw,c=_t(l),f=t?da:e?vi:Kt;return!e&&ne(c,"iterate",Hn),l.forEach((d,m)=>s.call(i,f(d),f(m),a))}};return ae(n,e?{add:ti("add"),set:ti("set"),delete:ti("delete"),clear:ti("clear")}:{add(s){!t&&!Ie(s)&&!vn(s)&&(s=_t(s));const i=_t(this);return Zs(i).has.call(i,s)||(i.add(s),Ke(i,"add",s,s)),this},set(s,i){!t&&!Ie(i)&&!vn(i)&&(i=_t(i));const a=_t(this),{has:l,get:c}=Zs(a);let f=l.call(a,s);f||(s=_t(s),f=l.call(a,s));const d=c.call(a,s);return a.set(s,i),f?fn(i,d)&&Ke(a,"set",s,i):Ke(a,"add",s,i),this},delete(s){const i=_t(this),{has:a,get:l}=Zs(i);let c=a.call(i,s);c||(s=_t(s),c=a.call(i,s)),l&&l.call(i,s);const f=i.delete(s);return c&&Ke(i,"delete",s,void 0),f},clear(){const s=_t(this),i=s.size!==0,a=s.clear();return i&&Ke(s,"clear",void 0,void 0),a}}),["keys","values","entries",Symbol.iterator].forEach(s=>{n[s]=lm(s,e,t)}),n}function Ya(e,t){const n=um(e,t);return(r,s,i)=>s==="__v_isReactive"?!e:s==="__v_isReadonly"?e:s==="__v_raw"?r:Reflect.get(yt(n,s)&&s in r?n:r,s,i)}const cm={get:Ya(!1,!1)},hm={get:Ya(!1,!0)},fm={get:Ya(!0,!1)};const Uh=new WeakMap,$h=new WeakMap,jh=new WeakMap,dm=new WeakMap;function pm(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function mm(e){return e.__v_skip||!Object.isExtensible(e)?0:pm(Bp(e))}function Xa(e){return vn(e)?e:Ja(e,!1,im,cm,Uh)}function gm(e){return Ja(e,!1,am,hm,$h)}function qh(e){return Ja(e,!0,om,fm,jh)}function Ja(e,t,n,r,s){if(!bt(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const i=mm(e);if(i===0)return e;const a=s.get(e);if(a)return a;const l=new Proxy(e,i===2?r:n);return s.set(e,l),l}function fr(e){return vn(e)?fr(e.__v_raw):!!(e&&e.__v_isReactive)}function vn(e){return!!(e&&e.__v_isReadonly)}function Ie(e){return!!(e&&e.__v_isShallow)}function Za(e){return e?!!e.__v_raw:!1}function _t(e){const t=e&&e.__v_raw;return t?_t(t):e}function _m(e){return!yt(e,"__v_skip")&&Object.isExtensible(e)&&bh(e,"__v_skip",!0),e}const Kt=e=>bt(e)?Xa(e):e,vi=e=>bt(e)?qh(e):e;function oe(e){return e?e.__v_isRef===!0:!1}function He(e){return ym(e,!1)}function ym(e,t){return oe(e)?e:new vm(e,t)}class vm{constructor(t,n){this.dep=new Qa,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=n?t:_t(t),this._value=n?t:Kt(t),this.__v_isShallow=n}get value(){return this.dep.track(),this._value}set value(t){const n=this._rawValue,r=this.__v_isShallow||Ie(t)||vn(t);t=r?t:_t(t),fn(t,n)&&(this._rawValue=t,this._value=r?t:Kt(t),this.dep.trigger())}}function Bn(e){return oe(e)?e.value:e}const Em={get:(e,t,n)=>t==="__v_raw"?e:Bn(Reflect.get(e,t,n)),set:(e,t,n,r)=>{const s=e[t];return oe(s)&&!oe(n)?(s.value=n,!0):Reflect.set(e,t,n,r)}};function Hh(e){return fr(e)?e:new Proxy(e,Em)}class Tm{constructor(t,n,r){this.fn=t,this.setter=n,this._value=void 0,this.dep=new Qa(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=ds-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!n,this.isSSR=r}notify(){if(this.flags|=16,!(this.flags&8)&&It!==this)return Dh(this,!0),!0}get value(){const t=this.dep.track();return Oh(this),t&&(t.version=this.dep.version),this._value}set value(t){this.setter&&this.setter(t)}}function wm(e,t,n=!1){let r,s;return lt(e)?r=e:(r=e.get,s=e.set),new Tm(r,s,n)}const ei={},Ei=new WeakMap;let Un;function Im(e,t=!1,n=Un){if(n){let r=Ei.get(n);r||Ei.set(n,r=[]),r.push(e)}}function Am(e,t,n=wt){const{immediate:r,deep:s,once:i,scheduler:a,augmentJob:l,call:c}=n,f=S=>s?S:Ie(S)||s===!1||s===0?Ge(S,1):Ge(S);let d,m,_,b,D=!1,L=!1;if(oe(e)?(m=()=>e.value,D=Ie(e)):fr(e)?(m=()=>f(e),D=!0):st(e)?(L=!0,D=e.some(S=>fr(S)||Ie(S)),m=()=>e.map(S=>{if(oe(S))return S.value;if(fr(S))return f(S);if(lt(S))return c?c(S,2):S()})):lt(e)?t?m=c?()=>c(e,2):e:m=()=>{if(_){Qe();try{_()}finally{Ye()}}const S=Un;Un=d;try{return c?c(e,3,[b]):e(b)}finally{Un=S}}:m=Ce,t&&s){const S=m,z=s===!0?1/0:s;m=()=>Ge(S(),z)}const M=Xp(),X=()=>{d.stop(),M&&M.active&&Ha(M.effects,d)};if(i&&t){const S=t;t=(...z)=>{S(...z),X()}}let O=L?new Array(e.length).fill(ei):ei;const $=S=>{if(!(!(d.flags&1)||!d.dirty&&!S))if(t){const z=d.run();if(s||D||(L?z.some((W,w)=>fn(W,O[w])):fn(z,O))){_&&_();const W=Un;Un=d;try{const w=[z,O===ei?void 0:L&&O[0]===ei?[]:O,b];c?c(t,3,w):t(...w),O=z}finally{Un=W}}}else d.run()};return l&&l($),d=new Ph(m),d.scheduler=a?()=>a($,!1):$,b=S=>Im(S,!1,d),_=d.onStop=()=>{const S=Ei.get(d);if(S){if(c)c(S,4);else for(const z of S)z();Ei.delete(d)}},t?r?$(!0):O=d.run():a?a($.bind(null,!0),!0):d.run(),X.pause=d.pause.bind(d),X.resume=d.resume.bind(d),X.stop=X,X}function Ge(e,t=1/0,n){if(t<=0||!bt(e)||e.__v_skip||(n=n||new Set,n.has(e)))return e;if(n.add(e),t--,oe(e))Ge(e.value,t,n);else if(st(e))for(let r=0;r<e.length;r++)Ge(e[r],t,n);else if(Gi(e)||cr(e))e.forEach(r=>{Ge(r,t,n)});else if(Ih(e)){for(const r in e)Ge(e[r],t,n);for(const r of Object.getOwnPropertySymbols(e))Object.prototype.propertyIsEnumerable.call(e,r)&&Ge(e[r],t,n)}return e}/**
* @vue/runtime-core v3.5.14
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function Ss(e,t,n,r){try{return r?e(...r):e()}catch(s){to(s,t,n)}}function Me(e,t,n,r){if(lt(e)){const s=Ss(e,t,n,r);return s&&Th(s)&&s.catch(i=>{to(i,t,n)}),s}if(st(e)){const s=[];for(let i=0;i<e.length;i++)s.push(Me(e[i],t,n,r));return s}}function to(e,t,n,r=!0){const s=t?t.vnode:null,{errorHandler:i,throwUnhandledErrorInProduction:a}=t&&t.appContext.config||wt;if(t){let l=t.parent;const c=t.proxy,f=`https://vuejs.org/error-reference/#runtime-${n}`;for(;l;){const d=l.ec;if(d){for(let m=0;m<d.length;m++)if(d[m](e,c,f)===!1)return}l=l.parent}if(i){Qe(),Ss(i,null,10,[e,c,f]),Ye();return}}bm(e,n,s,r,a)}function bm(e,t,n,r=!0,s=!1){if(s)throw e;console.error(e)}const ce=[];let Ve=-1;const dr=[];let un=null,rr=0;const zh=Promise.resolve();let Ti=null;function Kh(e){const t=Ti||zh;return e?t.then(this?e.bind(this):e):t}function Cm(e){let t=Ve+1,n=ce.length;for(;t<n;){const r=t+n>>>1,s=ce[r],i=ms(s);i<e||i===e&&s.flags&2?t=r+1:n=r}return t}function tl(e){if(!(e.flags&1)){const t=ms(e),n=ce[ce.length-1];!n||!(e.flags&2)&&t>=ms(n)?ce.push(e):ce.splice(Cm(t),0,e),e.flags|=1,Gh()}}function Gh(){Ti||(Ti=zh.then(Qh))}function Rm(e){st(e)?dr.push(...e):un&&e.id===-1?un.splice(rr+1,0,e):e.flags&1||(dr.push(e),e.flags|=1),Gh()}function Fu(e,t,n=Ve+1){for(;n<ce.length;n++){const r=ce[n];if(r&&r.flags&2){if(e&&r.id!==e.uid)continue;ce.splice(n,1),n--,r.flags&4&&(r.flags&=-2),r(),r.flags&4||(r.flags&=-2)}}}function Wh(e){if(dr.length){const t=[...new Set(dr)].sort((n,r)=>ms(n)-ms(r));if(dr.length=0,un){un.push(...t);return}for(un=t,rr=0;rr<un.length;rr++){const n=un[rr];n.flags&4&&(n.flags&=-2),n.flags&8||n(),n.flags&=-2}un=null,rr=0}}const ms=e=>e.id==null?e.flags&2?-1:1/0:e.id;function Qh(e){try{for(Ve=0;Ve<ce.length;Ve++){const t=ce[Ve];t&&!(t.flags&8)&&(t.flags&4&&(t.flags&=-2),Ss(t,t.i,t.i?15:14),t.flags&4||(t.flags&=-2))}}finally{for(;Ve<ce.length;Ve++){const t=ce[Ve];t&&(t.flags&=-2)}Ve=-1,ce.length=0,Wh(),Ti=null,(ce.length||dr.length)&&Qh()}}let ge=null,Yh=null;function wi(e){const t=ge;return ge=e,Yh=e&&e.type.__scopeId||null,t}function Sm(e,t=ge,n){if(!t||e._n)return e;const r=(...s)=>{r._d&&Ku(-1);const i=wi(t);let a;try{a=e(...s)}finally{wi(i),r._d&&Ku(1)}return a};return r._n=!0,r._c=!0,r._d=!0,r}function ln(e,t){if(ge===null)return e;const n=ao(ge),r=e.dirs||(e.dirs=[]);for(let s=0;s<t.length;s++){let[i,a,l,c=wt]=t[s];i&&(lt(i)&&(i={mounted:i,updated:i}),i.deep&&Ge(a),r.push({dir:i,instance:n,value:a,oldValue:void 0,arg:l,modifiers:c}))}return e}function Ln(e,t,n,r){const s=e.dirs,i=t&&t.dirs;for(let a=0;a<s.length;a++){const l=s[a];i&&(l.oldValue=i[a].value);let c=l.dir[r];c&&(Qe(),Me(c,n,8,[e.el,l,e,t]),Ye())}}const Pm=Symbol("_vte"),Vm=e=>e.__isTeleport;function eo(e,t){e.shapeFlag&6&&e.component?(e.transition=t,eo(e.component.subTree,t)):e.shapeFlag&128?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}/*! #__NO_SIDE_EFFECTS__ */function no(e,t){return lt(e)?ae({name:e.name},t,{setup:e}):e}function Xh(e){e.ids=[e.ids[0]+e.ids[2]+++"-",0,0]}function Ii(e,t,n,r,s=!1){if(st(e)){e.forEach((D,L)=>Ii(D,t&&(st(t)?t[L]:t),n,r,s));return}if(pr(r)&&!s){r.shapeFlag&512&&r.type.__asyncResolved&&r.component.subTree.component&&Ii(e,t,n,r.component.subTree);return}const i=r.shapeFlag&4?ao(r.component):r.el,a=s?null:i,{i:l,r:c}=e,f=t&&t.r,d=l.refs===wt?l.refs={}:l.refs,m=l.setupState,_=_t(m),b=m===wt?()=>!1:D=>yt(_,D);if(f!=null&&f!==c&&(Dt(f)?(d[f]=null,b(f)&&(m[f]=null)):oe(f)&&(f.value=null)),lt(c))Ss(c,l,12,[a,d]);else{const D=Dt(c),L=oe(c);if(D||L){const M=()=>{if(e.f){const X=D?b(c)?m[c]:d[c]:c.value;s?st(X)&&Ha(X,i):st(X)?X.includes(i)||X.push(i):D?(d[c]=[i],b(c)&&(m[c]=d[c])):(c.value=[i],e.k&&(d[e.k]=c.value))}else D?(d[c]=a,b(c)&&(m[c]=a)):L&&(c.value=a,e.k&&(d[e.k]=a))};a?(M.id=-1,Ht(M,n)):M()}}}Qi().requestIdleCallback;Qi().cancelIdleCallback;const pr=e=>!!e.type.__asyncLoader,Jh=e=>e.type.__isKeepAlive,Dm={name:"KeepAlive",__isKeepAlive:!0,props:{include:[String,RegExp,Array],exclude:[String,RegExp,Array],max:[String,Number]},setup(e,{slots:t}){const n=bg(),r=n.ctx;if(!r.renderer)return()=>{const O=t.default&&t.default();return O&&O.length===1?O[0]:O};const s=new Map,i=new Set;let a=null;const l=n.suspense,{renderer:{p:c,m:f,um:d,o:{createElement:m}}}=r,_=m("div");r.activate=(O,$,S,z,W)=>{const w=O.component;f(O,$,S,0,l),c(w.vnode,O,$,S,w,l,z,O.slotScopeIds,W),Ht(()=>{w.isDeactivated=!1,w.a&&hr(w.a);const g=O.props&&O.props.onVnodeMounted;g&&we(g,w.parent,O)},l)},r.deactivate=O=>{const $=O.component;bi($.m),bi($.a),f(O,_,null,1,l),Ht(()=>{$.da&&hr($.da);const S=O.props&&O.props.onVnodeUnmounted;S&&we(S,$.parent,O),$.isDeactivated=!0},l)};function b(O){Wo(O),d(O,n,l,!0)}function D(O){s.forEach(($,S)=>{const z=Qu($.type);z&&!O(z)&&L(S)})}function L(O){const $=s.get(O);$&&(!a||!sr($,a))?b($):a&&Wo(a),s.delete(O),i.delete(O)}gr(()=>[e.include,e.exclude],([O,$])=>{O&&D(S=>Qr(O,S)),$&&D(S=>!Qr($,S))},{flush:"post",deep:!0});let M=null;const X=()=>{M!=null&&(Ci(n.subTree.type)?Ht(()=>{s.set(M,ni(n.subTree))},n.subTree.suspense):s.set(M,ni(n.subTree)))};return so(X),tf(X),ef(()=>{s.forEach(O=>{const{subTree:$,suspense:S}=n,z=ni($);if(O.type===z.type&&O.key===z.key){Wo(z);const W=z.component.da;W&&Ht(W,S);return}b(O)})}),()=>{if(M=null,!t.default)return a=null;const O=t.default(),$=O[0];if(O.length>1)return a=null,O;if(!sl($)||!($.shapeFlag&4)&&!($.shapeFlag&128))return a=null,$;let S=ni($);if(S.type===Xe)return a=null,S;const z=S.type,W=Qu(pr(S)?S.type.__asyncResolved||{}:z),{include:w,exclude:g,max:E}=e;if(w&&(!W||!Qr(w,W))||g&&W&&Qr(g,W))return S.shapeFlag&=-257,a=S,$;const T=S.key==null?z:S.key,A=s.get(T);return S.el&&(S=zn(S),$.shapeFlag&128&&($.ssContent=S)),M=T,A?(S.el=A.el,S.component=A.component,S.transition&&eo(S,S.transition),S.shapeFlag|=512,i.delete(T),i.add(T)):(i.add(T),E&&i.size>parseInt(E,10)&&L(i.values().next().value)),S.shapeFlag|=256,a=S,Ci($.type)?$:S}}},xm=Dm;function Qr(e,t){return st(e)?e.some(n=>Qr(n,t)):Dt(e)?e.split(",").includes(t):Fp(e)?(e.lastIndex=0,e.test(t)):!1}function Nm(e,t){Zh(e,"a",t)}function Om(e,t){Zh(e,"da",t)}function Zh(e,t,n=ie){const r=e.__wdc||(e.__wdc=()=>{let s=n;for(;s;){if(s.isDeactivated)return;s=s.parent}return e()});if(ro(t,r,n),n){let s=n.parent;for(;s&&s.parent;)Jh(s.parent.vnode)&&km(r,t,n,s),s=s.parent}}function km(e,t,n,r){const s=ro(t,e,r,!0);nf(()=>{Ha(r[t],s)},n)}function Wo(e){e.shapeFlag&=-257,e.shapeFlag&=-513}function ni(e){return e.shapeFlag&128?e.ssContent:e}function ro(e,t,n=ie,r=!1){if(n){const s=n[e]||(n[e]=[]),i=t.__weh||(t.__weh=(...a)=>{Qe();const l=Ps(n),c=Me(t,n,e,a);return l(),Ye(),c});return r?s.unshift(i):s.push(i),i}}const en=e=>(t,n=ie)=>{(!vs||e==="sp")&&ro(e,(...r)=>t(...r),n)},Mm=en("bm"),so=en("m"),Lm=en("bu"),tf=en("u"),ef=en("bum"),nf=en("um"),Fm=en("sp"),Bm=en("rtg"),Um=en("rtc");function $m(e,t=ie){ro("ec",e,t)}const jm=Symbol.for("v-ndc");function gs(e,t,n,r){let s;const i=n,a=st(e);if(a||Dt(e)){const l=a&&fr(e);let c=!1,f=!1;l&&(c=!Ie(e),f=vn(e),e=Zi(e)),s=new Array(e.length);for(let d=0,m=e.length;d<m;d++)s[d]=t(c?f?vi(Kt(e[d])):Kt(e[d]):e[d],d,void 0,i)}else if(typeof e=="number"){s=new Array(e);for(let l=0;l<e;l++)s[l]=t(l+1,l,void 0,i)}else if(bt(e))if(e[Symbol.iterator])s=Array.from(e,(l,c)=>t(l,c,void 0,i));else{const l=Object.keys(e);s=new Array(l.length);for(let c=0,f=l.length;c<f;c++){const d=l[c];s[c]=t(e[d],d,c,i)}}else s=[];return s}const pa=e=>e?If(e)?ao(e):pa(e.parent):null,is=ae(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>pa(e.parent),$root:e=>pa(e.root),$host:e=>e.ce,$emit:e=>e.emit,$options:e=>sf(e),$forceUpdate:e=>e.f||(e.f=()=>{tl(e.update)}),$nextTick:e=>e.n||(e.n=Kh.bind(e.proxy)),$watch:e=>cg.bind(e)}),Qo=(e,t)=>e!==wt&&!e.__isScriptSetup&&yt(e,t),qm={get({_:e},t){if(t==="__v_skip")return!0;const{ctx:n,setupState:r,data:s,props:i,accessCache:a,type:l,appContext:c}=e;let f;if(t[0]!=="$"){const b=a[t];if(b!==void 0)switch(b){case 1:return r[t];case 2:return s[t];case 4:return n[t];case 3:return i[t]}else{if(Qo(r,t))return a[t]=1,r[t];if(s!==wt&&yt(s,t))return a[t]=2,s[t];if((f=e.propsOptions[0])&&yt(f,t))return a[t]=3,i[t];if(n!==wt&&yt(n,t))return a[t]=4,n[t];ma&&(a[t]=0)}}const d=is[t];let m,_;if(d)return t==="$attrs"&&ne(e.attrs,"get",""),d(e);if((m=l.__cssModules)&&(m=m[t]))return m;if(n!==wt&&yt(n,t))return a[t]=4,n[t];if(_=c.config.globalProperties,yt(_,t))return _[t]},set({_:e},t,n){const{data:r,setupState:s,ctx:i}=e;return Qo(s,t)?(s[t]=n,!0):r!==wt&&yt(r,t)?(r[t]=n,!0):yt(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(i[t]=n,!0)},has({_:{data:e,setupState:t,accessCache:n,ctx:r,appContext:s,propsOptions:i}},a){let l;return!!n[a]||e!==wt&&yt(e,a)||Qo(t,a)||(l=i[0])&&yt(l,a)||yt(r,a)||yt(is,a)||yt(s.config.globalProperties,a)},defineProperty(e,t,n){return n.get!=null?e._.accessCache[t]=0:yt(n,"value")&&this.set(e,t,n.value,null),Reflect.defineProperty(e,t,n)}};function Bu(e){return st(e)?e.reduce((t,n)=>(t[n]=null,t),{}):e}let ma=!0;function Hm(e){const t=sf(e),n=e.proxy,r=e.ctx;ma=!1,t.beforeCreate&&Uu(t.beforeCreate,e,"bc");const{data:s,computed:i,methods:a,watch:l,provide:c,inject:f,created:d,beforeMount:m,mounted:_,beforeUpdate:b,updated:D,activated:L,deactivated:M,beforeDestroy:X,beforeUnmount:O,destroyed:$,unmounted:S,render:z,renderTracked:W,renderTriggered:w,errorCaptured:g,serverPrefetch:E,expose:T,inheritAttrs:A,components:R,directives:v,filters:pe}=t;if(f&&zm(f,r,null),a)for(const Et in a){const mt=a[Et];lt(mt)&&(r[Et]=mt.bind(n))}if(s){const Et=s.call(n,n);bt(Et)&&(e.data=Xa(Et))}if(ma=!0,i)for(const Et in i){const mt=i[Et],Ae=lt(mt)?mt.bind(n,n):lt(mt.get)?mt.get.bind(n,n):Ce,Vn=!lt(mt)&&lt(mt.set)?mt.set.bind(n):Ce,Be=as({get:Ae,set:Vn});Object.defineProperty(r,Et,{enumerable:!0,configurable:!0,get:()=>Be.value,set:Nt=>Be.value=Nt})}if(l)for(const Et in l)rf(l[Et],r,n,Et);if(c){const Et=lt(c)?c.call(n):c;Reflect.ownKeys(Et).forEach(mt=>{Xm(mt,Et[mt])})}d&&Uu(d,e,"c");function Ut(Et,mt){st(mt)?mt.forEach(Ae=>Et(Ae.bind(n))):mt&&Et(mt.bind(n))}if(Ut(Mm,m),Ut(so,_),Ut(Lm,b),Ut(tf,D),Ut(Nm,L),Ut(Om,M),Ut($m,g),Ut(Um,W),Ut(Bm,w),Ut(ef,O),Ut(nf,S),Ut(Fm,E),st(T))if(T.length){const Et=e.exposed||(e.exposed={});T.forEach(mt=>{Object.defineProperty(Et,mt,{get:()=>n[mt],set:Ae=>n[mt]=Ae})})}else e.exposed||(e.exposed={});z&&e.render===Ce&&(e.render=z),A!=null&&(e.inheritAttrs=A),R&&(e.components=R),v&&(e.directives=v),E&&Xh(e)}function zm(e,t,n=Ce){st(e)&&(e=ga(e));for(const r in e){const s=e[r];let i;bt(s)?"default"in s?i=ui(s.from||r,s.default,!0):i=ui(s.from||r):i=ui(s),oe(i)?Object.defineProperty(t,r,{enumerable:!0,configurable:!0,get:()=>i.value,set:a=>i.value=a}):t[r]=i}}function Uu(e,t,n){Me(st(e)?e.map(r=>r.bind(t.proxy)):e.bind(t.proxy),t,n)}function rf(e,t,n,r){let s=r.includes(".")?yf(n,r):()=>n[r];if(Dt(e)){const i=t[e];lt(i)&&gr(s,i)}else if(lt(e))gr(s,e.bind(n));else if(bt(e))if(st(e))e.forEach(i=>rf(i,t,n,r));else{const i=lt(e.handler)?e.handler.bind(n):t[e.handler];lt(i)&&gr(s,i,e)}}function sf(e){const t=e.type,{mixins:n,extends:r}=t,{mixins:s,optionsCache:i,config:{optionMergeStrategies:a}}=e.appContext,l=i.get(t);let c;return l?c=l:!s.length&&!n&&!r?c=t:(c={},s.length&&s.forEach(f=>Ai(c,f,a,!0)),Ai(c,t,a)),bt(t)&&i.set(t,c),c}function Ai(e,t,n,r=!1){const{mixins:s,extends:i}=t;i&&Ai(e,i,n,!0),s&&s.forEach(a=>Ai(e,a,n,!0));for(const a in t)if(!(r&&a==="expose")){const l=Km[a]||n&&n[a];e[a]=l?l(e[a],t[a]):t[a]}return e}const Km={data:$u,props:ju,emits:ju,methods:Yr,computed:Yr,beforeCreate:ue,created:ue,beforeMount:ue,mounted:ue,beforeUpdate:ue,updated:ue,beforeDestroy:ue,beforeUnmount:ue,destroyed:ue,unmounted:ue,activated:ue,deactivated:ue,errorCaptured:ue,serverPrefetch:ue,components:Yr,directives:Yr,watch:Wm,provide:$u,inject:Gm};function $u(e,t){return t?e?function(){return ae(lt(e)?e.call(this,this):e,lt(t)?t.call(this,this):t)}:t:e}function Gm(e,t){return Yr(ga(e),ga(t))}function ga(e){if(st(e)){const t={};for(let n=0;n<e.length;n++)t[e[n]]=e[n];return t}return e}function ue(e,t){return e?[...new Set([].concat(e,t))]:t}function Yr(e,t){return e?ae(Object.create(null),e,t):t}function ju(e,t){return e?st(e)&&st(t)?[...new Set([...e,...t])]:ae(Object.create(null),Bu(e),Bu(t??{})):t}function Wm(e,t){if(!e)return t;if(!t)return e;const n=ae(Object.create(null),e);for(const r in t)n[r]=ue(e[r],t[r]);return n}function of(){return{app:null,config:{isNativeTag:Mp,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let Qm=0;function Ym(e,t){return function(r,s=null){lt(r)||(r=ae({},r)),s!=null&&!bt(s)&&(s=null);const i=of(),a=new WeakSet,l=[];let c=!1;const f=i.app={_uid:Qm++,_component:r,_props:s,_container:null,_context:i,_instance:null,version:Dg,get config(){return i.config},set config(d){},use(d,...m){return a.has(d)||(d&&lt(d.install)?(a.add(d),d.install(f,...m)):lt(d)&&(a.add(d),d(f,...m))),f},mixin(d){return i.mixins.includes(d)||i.mixins.push(d),f},component(d,m){return m?(i.components[d]=m,f):i.components[d]},directive(d,m){return m?(i.directives[d]=m,f):i.directives[d]},mount(d,m,_){if(!c){const b=f._ceVNode||We(r,s);return b.appContext=i,_===!0?_="svg":_===!1&&(_=void 0),e(b,d,_),c=!0,f._container=d,d.__vue_app__=f,ao(b.component)}},onUnmount(d){l.push(d)},unmount(){c&&(Me(l,f._instance,16),e(null,f._container),delete f._container.__vue_app__)},provide(d,m){return i.provides[d]=m,f},runWithContext(d){const m=mr;mr=f;try{return d()}finally{mr=m}}};return f}}let mr=null;function Xm(e,t){if(ie){let n=ie.provides;const r=ie.parent&&ie.parent.provides;r===n&&(n=ie.provides=Object.create(r)),n[e]=t}}function ui(e,t,n=!1){const r=ie||ge;if(r||mr){const s=mr?mr._context.provides:r?r.parent==null?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides:void 0;if(s&&e in s)return s[e];if(arguments.length>1)return n&&lt(t)?t.call(r&&r.proxy):t}}const af={},lf=()=>Object.create(af),uf=e=>Object.getPrototypeOf(e)===af;function Jm(e,t,n,r=!1){const s={},i=lf();e.propsDefaults=Object.create(null),cf(e,t,s,i);for(const a in e.propsOptions[0])a in s||(s[a]=void 0);n?e.props=r?s:gm(s):e.type.props?e.props=s:e.props=i,e.attrs=i}function Zm(e,t,n,r){const{props:s,attrs:i,vnode:{patchFlag:a}}=e,l=_t(s),[c]=e.propsOptions;let f=!1;if((r||a>0)&&!(a&16)){if(a&8){const d=e.vnode.dynamicProps;for(let m=0;m<d.length;m++){let _=d[m];if(io(e.emitsOptions,_))continue;const b=t[_];if(c)if(yt(i,_))b!==i[_]&&(i[_]=b,f=!0);else{const D=yn(_);s[D]=_a(c,l,D,b,e,!1)}else b!==i[_]&&(i[_]=b,f=!0)}}}else{cf(e,t,s,i)&&(f=!0);let d;for(const m in l)(!t||!yt(t,m)&&((d=Wn(m))===m||!yt(t,d)))&&(c?n&&(n[m]!==void 0||n[d]!==void 0)&&(s[m]=_a(c,l,m,void 0,e,!0)):delete s[m]);if(i!==l)for(const m in i)(!t||!yt(t,m))&&(delete i[m],f=!0)}f&&Ke(e.attrs,"set","")}function cf(e,t,n,r){const[s,i]=e.propsOptions;let a=!1,l;if(t)for(let c in t){if(ns(c))continue;const f=t[c];let d;s&&yt(s,d=yn(c))?!i||!i.includes(d)?n[d]=f:(l||(l={}))[d]=f:io(e.emitsOptions,c)||(!(c in r)||f!==r[c])&&(r[c]=f,a=!0)}if(i){const c=_t(n),f=l||wt;for(let d=0;d<i.length;d++){const m=i[d];n[m]=_a(s,c,m,f[m],e,!yt(f,m))}}return a}function _a(e,t,n,r,s,i){const a=e[n];if(a!=null){const l=yt(a,"default");if(l&&r===void 0){const c=a.default;if(a.type!==Function&&!a.skipFactory&&lt(c)){const{propsDefaults:f}=s;if(n in f)r=f[n];else{const d=Ps(s);r=f[n]=c.call(null,t),d()}}else r=c;s.ce&&s.ce._setProp(n,r)}a[0]&&(i&&!l?r=!1:a[1]&&(r===""||r===Wn(n))&&(r=!0))}return r}const tg=new WeakMap;function hf(e,t,n=!1){const r=n?tg:t.propsCache,s=r.get(e);if(s)return s;const i=e.props,a={},l=[];let c=!1;if(!lt(e)){const d=m=>{c=!0;const[_,b]=hf(m,t,!0);ae(a,_),b&&l.push(...b)};!n&&t.mixins.length&&t.mixins.forEach(d),e.extends&&d(e.extends),e.mixins&&e.mixins.forEach(d)}if(!i&&!c)return bt(e)&&r.set(e,ur),ur;if(st(i))for(let d=0;d<i.length;d++){const m=yn(i[d]);qu(m)&&(a[m]=wt)}else if(i)for(const d in i){const m=yn(d);if(qu(m)){const _=i[d],b=a[m]=st(_)||lt(_)?{type:_}:ae({},_),D=b.type;let L=!1,M=!0;if(st(D))for(let X=0;X<D.length;++X){const O=D[X],$=lt(O)&&O.name;if($==="Boolean"){L=!0;break}else $==="String"&&(M=!1)}else L=lt(D)&&D.name==="Boolean";b[0]=L,b[1]=M,(L||yt(b,"default"))&&l.push(m)}}const f=[a,l];return bt(e)&&r.set(e,f),f}function qu(e){return e[0]!=="$"&&!ns(e)}const el=e=>e[0]==="_"||e==="$stable",nl=e=>st(e)?e.map(xe):[xe(e)],eg=(e,t,n)=>{if(t._n)return t;const r=Sm((...s)=>nl(t(...s)),n);return r._c=!1,r},ff=(e,t,n)=>{const r=e._ctx;for(const s in e){if(el(s))continue;const i=e[s];if(lt(i))t[s]=eg(s,i,r);else if(i!=null){const a=nl(i);t[s]=()=>a}}},df=(e,t)=>{const n=nl(t);e.slots.default=()=>n},pf=(e,t,n)=>{for(const r in t)(n||!el(r))&&(e[r]=t[r])},ng=(e,t,n)=>{const r=e.slots=lf();if(e.vnode.shapeFlag&32){const s=t._;s?(pf(r,t,n),n&&bh(r,"_",s,!0)):ff(t,r)}else t&&df(e,t)},rg=(e,t,n)=>{const{vnode:r,slots:s}=e;let i=!0,a=wt;if(r.shapeFlag&32){const l=t._;l?n&&l===1?i=!1:pf(s,t,n):(i=!t.$stable,ff(t,s)),a=t}else t&&(df(e,t),a={default:1});if(i)for(const l in s)!el(l)&&a[l]==null&&delete s[l]},Ht=_g;function sg(e){return ig(e)}function ig(e,t){const n=Qi();n.__VUE__=!0;const{insert:r,remove:s,patchProp:i,createElement:a,createText:l,createComment:c,setText:f,setElementText:d,parentNode:m,nextSibling:_,setScopeId:b=Ce,insertStaticContent:D}=e,L=(y,I,V,B=null,N=null,F=null,G=void 0,q=null,j=!!I.dynamicChildren)=>{if(y===I)return;y&&!sr(y,I)&&(B=Ue(y),Nt(y,N,F,!0),y=null),I.patchFlag===-2&&(j=!1,I.dynamicChildren=null);const{type:U,ref:tt,shapeFlag:K}=I;switch(U){case oo:M(y,I,V,B);break;case Xe:X(y,I,V,B);break;case Xo:y==null&&O(I,V,B,G);break;case re:R(y,I,V,B,N,F,G,q,j);break;default:K&1?z(y,I,V,B,N,F,G,q,j):K&6?v(y,I,V,B,N,F,G,q,j):(K&64||K&128)&&U.process(y,I,V,B,N,F,G,q,j,Pe)}tt!=null&&N&&Ii(tt,y&&y.ref,F,I||y,!I)},M=(y,I,V,B)=>{if(y==null)r(I.el=l(I.children),V,B);else{const N=I.el=y.el;I.children!==y.children&&f(N,I.children)}},X=(y,I,V,B)=>{y==null?r(I.el=c(I.children||""),V,B):I.el=y.el},O=(y,I,V,B)=>{[y.el,y.anchor]=D(y.children,I,V,B,y.el,y.anchor)},$=({el:y,anchor:I},V,B)=>{let N;for(;y&&y!==I;)N=_(y),r(y,V,B),y=N;r(I,V,B)},S=({el:y,anchor:I})=>{let V;for(;y&&y!==I;)V=_(y),s(y),y=V;s(I)},z=(y,I,V,B,N,F,G,q,j)=>{I.type==="svg"?G="svg":I.type==="math"&&(G="mathml"),y==null?W(I,V,B,N,F,G,q,j):E(y,I,N,F,G,q,j)},W=(y,I,V,B,N,F,G,q)=>{let j,U;const{props:tt,shapeFlag:K,transition:J,dirs:it}=y;if(j=y.el=a(y.type,F,tt&&tt.is,tt),K&8?d(j,y.children):K&16&&g(y.children,j,null,B,N,Yo(y,F),G,q),it&&Ln(y,null,B,"created"),w(j,y,y.scopeId,G,B),tt){for(const ut in tt)ut!=="value"&&!ns(ut)&&i(j,ut,null,tt[ut],F,B);"value"in tt&&i(j,"value",null,tt.value,F),(U=tt.onVnodeBeforeMount)&&we(U,B,y)}it&&Ln(y,null,B,"beforeMount");const nt=og(N,J);nt&&J.beforeEnter(j),r(j,I,V),((U=tt&&tt.onVnodeMounted)||nt||it)&&Ht(()=>{U&&we(U,B,y),nt&&J.enter(j),it&&Ln(y,null,B,"mounted")},N)},w=(y,I,V,B,N)=>{if(V&&b(y,V),B)for(let F=0;F<B.length;F++)b(y,B[F]);if(N){let F=N.subTree;if(I===F||Ci(F.type)&&(F.ssContent===I||F.ssFallback===I)){const G=N.vnode;w(y,G,G.scopeId,G.slotScopeIds,N.parent)}}},g=(y,I,V,B,N,F,G,q,j=0)=>{for(let U=j;U<y.length;U++){const tt=y[U]=q?cn(y[U]):xe(y[U]);L(null,tt,I,V,B,N,F,G,q)}},E=(y,I,V,B,N,F,G)=>{const q=I.el=y.el;let{patchFlag:j,dynamicChildren:U,dirs:tt}=I;j|=y.patchFlag&16;const K=y.props||wt,J=I.props||wt;let it;if(V&&Fn(V,!1),(it=J.onVnodeBeforeUpdate)&&we(it,V,I,y),tt&&Ln(I,y,V,"beforeUpdate"),V&&Fn(V,!0),(K.innerHTML&&J.innerHTML==null||K.textContent&&J.textContent==null)&&d(q,""),U?T(y.dynamicChildren,U,q,V,B,Yo(I,N),F):G||mt(y,I,q,null,V,B,Yo(I,N),F,!1),j>0){if(j&16)A(q,K,J,V,N);else if(j&2&&K.class!==J.class&&i(q,"class",null,J.class,N),j&4&&i(q,"style",K.style,J.style,N),j&8){const nt=I.dynamicProps;for(let ut=0;ut<nt.length;ut++){const ft=nt[ut],Qt=K[ft],$t=J[ft];($t!==Qt||ft==="value")&&i(q,ft,Qt,$t,N,V)}}j&1&&y.children!==I.children&&d(q,I.children)}else!G&&U==null&&A(q,K,J,V,N);((it=J.onVnodeUpdated)||tt)&&Ht(()=>{it&&we(it,V,I,y),tt&&Ln(I,y,V,"updated")},B)},T=(y,I,V,B,N,F,G)=>{for(let q=0;q<I.length;q++){const j=y[q],U=I[q],tt=j.el&&(j.type===re||!sr(j,U)||j.shapeFlag&70)?m(j.el):V;L(j,U,tt,null,B,N,F,G,!0)}},A=(y,I,V,B,N)=>{if(I!==V){if(I!==wt)for(const F in I)!ns(F)&&!(F in V)&&i(y,F,I[F],null,N,B);for(const F in V){if(ns(F))continue;const G=V[F],q=I[F];G!==q&&F!=="value"&&i(y,F,q,G,N,B)}"value"in V&&i(y,"value",I.value,V.value,N)}},R=(y,I,V,B,N,F,G,q,j)=>{const U=I.el=y?y.el:l(""),tt=I.anchor=y?y.anchor:l("");let{patchFlag:K,dynamicChildren:J,slotScopeIds:it}=I;it&&(q=q?q.concat(it):it),y==null?(r(U,V,B),r(tt,V,B),g(I.children||[],V,tt,N,F,G,q,j)):K>0&&K&64&&J&&y.dynamicChildren?(T(y.dynamicChildren,J,V,N,F,G,q),(I.key!=null||N&&I===N.subTree)&&mf(y,I,!0)):mt(y,I,V,tt,N,F,G,q,j)},v=(y,I,V,B,N,F,G,q,j)=>{I.slotScopeIds=q,y==null?I.shapeFlag&512?N.ctx.activate(I,V,B,G,j):pe(I,V,B,N,F,G,j):nn(y,I,j)},pe=(y,I,V,B,N,F,G)=>{const q=y.component=Ag(y,B,N);if(Jh(y)&&(q.ctx.renderer=Pe),Cg(q,!1,G),q.asyncDep){if(N&&N.registerDep(q,Ut,G),!y.el){const j=q.subTree=We(Xe);X(null,j,I,V)}}else Ut(q,y,I,V,N,F,G)},nn=(y,I,V)=>{const B=I.component=y.component;if(mg(y,I,V))if(B.asyncDep&&!B.asyncResolved){Et(B,I,V);return}else B.next=I,B.update();else I.el=y.el,B.vnode=I},Ut=(y,I,V,B,N,F,G)=>{const q=()=>{if(y.isMounted){let{next:K,bu:J,u:it,parent:nt,vnode:ut}=y;{const Yt=gf(y);if(Yt){K&&(K.el=ut.el,Et(y,K,G)),Yt.asyncDep.then(()=>{y.isUnmounted||q()});return}}let ft=K,Qt;Fn(y,!1),K?(K.el=ut.el,Et(y,K,G)):K=ut,J&&hr(J),(Qt=K.props&&K.props.onVnodeBeforeUpdate)&&we(Qt,nt,K,ut),Fn(y,!0);const $t=Hu(y),Ee=y.subTree;y.subTree=$t,L(Ee,$t,m(Ee.el),Ue(Ee),y,N,F),K.el=$t.el,ft===null&&gg(y,$t.el),it&&Ht(it,N),(Qt=K.props&&K.props.onVnodeUpdated)&&Ht(()=>we(Qt,nt,K,ut),N)}else{let K;const{el:J,props:it}=I,{bm:nt,m:ut,parent:ft,root:Qt,type:$t}=y,Ee=pr(I);Fn(y,!1),nt&&hr(nt),!Ee&&(K=it&&it.onVnodeBeforeMount)&&we(K,ft,I),Fn(y,!0);{Qt.ce&&Qt.ce._injectChildStyle($t);const Yt=y.subTree=Hu(y);L(null,Yt,V,B,y,N,F),I.el=Yt.el}if(ut&&Ht(ut,N),!Ee&&(K=it&&it.onVnodeMounted)){const Yt=I;Ht(()=>we(K,ft,Yt),N)}(I.shapeFlag&256||ft&&pr(ft.vnode)&&ft.vnode.shapeFlag&256)&&y.a&&Ht(y.a,N),y.isMounted=!0,I=V=B=null}};y.scope.on();const j=y.effect=new Ph(q);y.scope.off();const U=y.update=j.run.bind(j),tt=y.job=j.runIfDirty.bind(j);tt.i=y,tt.id=y.uid,j.scheduler=()=>tl(tt),Fn(y,!0),U()},Et=(y,I,V)=>{I.component=y;const B=y.vnode.props;y.vnode=I,y.next=null,Zm(y,I.props,B,V),rg(y,I.children,V),Qe(),Fu(y),Ye()},mt=(y,I,V,B,N,F,G,q,j=!1)=>{const U=y&&y.children,tt=y?y.shapeFlag:0,K=I.children,{patchFlag:J,shapeFlag:it}=I;if(J>0){if(J&128){Vn(U,K,V,B,N,F,G,q,j);return}else if(J&256){Ae(U,K,V,B,N,F,G,q,j);return}}it&8?(tt&16&&xn(U,N,F),K!==U&&d(V,K)):tt&16?it&16?Vn(U,K,V,B,N,F,G,q,j):xn(U,N,F,!0):(tt&8&&d(V,""),it&16&&g(K,V,B,N,F,G,q,j))},Ae=(y,I,V,B,N,F,G,q,j)=>{y=y||ur,I=I||ur;const U=y.length,tt=I.length,K=Math.min(U,tt);let J;for(J=0;J<K;J++){const it=I[J]=j?cn(I[J]):xe(I[J]);L(y[J],it,V,null,N,F,G,q,j)}U>tt?xn(y,N,F,!0,!1,K):g(I,V,B,N,F,G,q,j,K)},Vn=(y,I,V,B,N,F,G,q,j)=>{let U=0;const tt=I.length;let K=y.length-1,J=tt-1;for(;U<=K&&U<=J;){const it=y[U],nt=I[U]=j?cn(I[U]):xe(I[U]);if(sr(it,nt))L(it,nt,V,null,N,F,G,q,j);else break;U++}for(;U<=K&&U<=J;){const it=y[K],nt=I[J]=j?cn(I[J]):xe(I[J]);if(sr(it,nt))L(it,nt,V,null,N,F,G,q,j);else break;K--,J--}if(U>K){if(U<=J){const it=J+1,nt=it<tt?I[it].el:B;for(;U<=J;)L(null,I[U]=j?cn(I[U]):xe(I[U]),V,nt,N,F,G,q,j),U++}}else if(U>J)for(;U<=K;)Nt(y[U],N,F,!0),U++;else{const it=U,nt=U,ut=new Map;for(U=nt;U<=J;U++){const jt=I[U]=j?cn(I[U]):xe(I[U]);jt.key!=null&&ut.set(jt.key,U)}let ft,Qt=0;const $t=J-nt+1;let Ee=!1,Yt=0;const rn=new Array($t);for(U=0;U<$t;U++)rn[U]=0;for(U=it;U<=K;U++){const jt=y[U];if(Qt>=$t){Nt(jt,N,F,!0);continue}let Te;if(jt.key!=null)Te=ut.get(jt.key);else for(ft=nt;ft<=J;ft++)if(rn[ft-nt]===0&&sr(jt,I[ft])){Te=ft;break}Te===void 0?Nt(jt,N,F,!0):(rn[Te-nt]=U+1,Te>=Yt?Yt=Te:Ee=!0,L(jt,I[Te],V,null,N,F,G,q,j),Qt++)}const kr=Ee?ag(rn):ur;for(ft=kr.length-1,U=$t-1;U>=0;U--){const jt=nt+U,Te=I[jt],Ls=jt+1<tt?I[jt+1].el:B;rn[U]===0?L(null,Te,V,Ls,N,F,G,q,j):Ee&&(ft<0||U!==kr[ft]?Be(Te,V,Ls,2):ft--)}}},Be=(y,I,V,B,N=null)=>{const{el:F,type:G,transition:q,children:j,shapeFlag:U}=y;if(U&6){Be(y.component.subTree,I,V,B);return}if(U&128){y.suspense.move(I,V,B);return}if(U&64){G.move(y,I,V,Pe);return}if(G===re){r(F,I,V);for(let K=0;K<j.length;K++)Be(j[K],I,V,B);r(y.anchor,I,V);return}if(G===Xo){$(y,I,V);return}if(B!==2&&U&1&&q)if(B===0)q.beforeEnter(F),r(F,I,V),Ht(()=>q.enter(F),N);else{const{leave:K,delayLeave:J,afterLeave:it}=q,nt=()=>{y.ctx.isUnmounted?s(F):r(F,I,V)},ut=()=>{K(F,()=>{nt(),it&&it()})};J?J(F,nt,ut):ut()}else r(F,I,V)},Nt=(y,I,V,B=!1,N=!1)=>{const{type:F,props:G,ref:q,children:j,dynamicChildren:U,shapeFlag:tt,patchFlag:K,dirs:J,cacheIndex:it}=y;if(K===-2&&(N=!1),q!=null&&(Qe(),Ii(q,null,V,y,!0),Ye()),it!=null&&(I.renderCache[it]=void 0),tt&256){I.ctx.deactivate(y);return}const nt=tt&1&&J,ut=!pr(y);let ft;if(ut&&(ft=G&&G.onVnodeBeforeUnmount)&&we(ft,I,y),tt&6)Dn(y.component,V,B);else{if(tt&128){y.suspense.unmount(V,B);return}nt&&Ln(y,null,I,"beforeUnmount"),tt&64?y.type.remove(y,I,V,Pe,B):U&&!U.hasOnce&&(F!==re||K>0&&K&64)?xn(U,I,V,!1,!0):(F===re&&K&384||!N&&tt&16)&&xn(j,I,V),B&&Ot(y)}(ut&&(ft=G&&G.onVnodeUnmounted)||nt)&&Ht(()=>{ft&&we(ft,I,y),nt&&Ln(y,null,I,"unmounted")},V)},Ot=y=>{const{type:I,el:V,anchor:B,transition:N}=y;if(I===re){Ro(V,B);return}if(I===Xo){S(y);return}const F=()=>{s(V),N&&!N.persisted&&N.afterLeave&&N.afterLeave()};if(y.shapeFlag&1&&N&&!N.persisted){const{leave:G,delayLeave:q}=N,j=()=>G(V,F);q?q(y.el,F,j):j()}else F()},Ro=(y,I)=>{let V;for(;y!==I;)V=_(y),s(y),y=V;s(I)},Dn=(y,I,V)=>{const{bum:B,scope:N,job:F,subTree:G,um:q,m:j,a:U,parent:tt,slots:{__:K}}=y;bi(j),bi(U),B&&hr(B),tt&&st(K)&&K.forEach(J=>{tt.renderCache[J]=void 0}),N.stop(),F&&(F.flags|=8,Nt(G,y,I,V)),q&&Ht(q,I),Ht(()=>{y.isUnmounted=!0},I),I&&I.pendingBranch&&!I.isUnmounted&&y.asyncDep&&!y.asyncResolved&&y.suspenseId===I.pendingId&&(I.deps--,I.deps===0&&I.resolve())},xn=(y,I,V,B=!1,N=!1,F=0)=>{for(let G=F;G<y.length;G++)Nt(y[G],I,V,B,N)},Ue=y=>{if(y.shapeFlag&6)return Ue(y.component.subTree);if(y.shapeFlag&128)return y.suspense.next();const I=_(y.anchor||y.el),V=I&&I[Pm];return V?_(V):I};let Nr=!1;const Ms=(y,I,V)=>{y==null?I._vnode&&Nt(I._vnode,null,null,!0):L(I._vnode||null,y,I,null,null,null,V),I._vnode=y,Nr||(Nr=!0,Fu(),Wh(),Nr=!1)},Pe={p:L,um:Nt,m:Be,r:Ot,mt:pe,mc:g,pc:mt,pbc:T,n:Ue,o:e};return{render:Ms,hydrate:void 0,createApp:Ym(Ms)}}function Yo({type:e,props:t},n){return n==="svg"&&e==="foreignObject"||n==="mathml"&&e==="annotation-xml"&&t&&t.encoding&&t.encoding.includes("html")?void 0:n}function Fn({effect:e,job:t},n){n?(e.flags|=32,t.flags|=4):(e.flags&=-33,t.flags&=-5)}function og(e,t){return(!e||e&&!e.pendingBranch)&&t&&!t.persisted}function mf(e,t,n=!1){const r=e.children,s=t.children;if(st(r)&&st(s))for(let i=0;i<r.length;i++){const a=r[i];let l=s[i];l.shapeFlag&1&&!l.dynamicChildren&&((l.patchFlag<=0||l.patchFlag===32)&&(l=s[i]=cn(s[i]),l.el=a.el),!n&&l.patchFlag!==-2&&mf(a,l)),l.type===oo&&(l.el=a.el),l.type===Xe&&!l.el&&(l.el=a.el)}}function ag(e){const t=e.slice(),n=[0];let r,s,i,a,l;const c=e.length;for(r=0;r<c;r++){const f=e[r];if(f!==0){if(s=n[n.length-1],e[s]<f){t[r]=s,n.push(r);continue}for(i=0,a=n.length-1;i<a;)l=i+a>>1,e[n[l]]<f?i=l+1:a=l;f<e[n[i]]&&(i>0&&(t[r]=n[i-1]),n[i]=r)}}for(i=n.length,a=n[i-1];i-- >0;)n[i]=a,a=t[a];return n}function gf(e){const t=e.subTree.component;if(t)return t.asyncDep&&!t.asyncResolved?t:gf(t)}function bi(e){if(e)for(let t=0;t<e.length;t++)e[t].flags|=8}const lg=Symbol.for("v-scx"),ug=()=>ui(lg);function _f(e,t){return rl(e,null,t)}function gr(e,t,n){return rl(e,t,n)}function rl(e,t,n=wt){const{immediate:r,deep:s,flush:i,once:a}=n,l=ae({},n),c=t&&r||!t&&i!=="post";let f;if(vs){if(i==="sync"){const b=ug();f=b.__watcherHandles||(b.__watcherHandles=[])}else if(!c){const b=()=>{};return b.stop=Ce,b.resume=Ce,b.pause=Ce,b}}const d=ie;l.call=(b,D,L)=>Me(b,d,D,L);let m=!1;i==="post"?l.scheduler=b=>{Ht(b,d&&d.suspense)}:i!=="sync"&&(m=!0,l.scheduler=(b,D)=>{D?b():tl(b)}),l.augmentJob=b=>{t&&(b.flags|=4),m&&(b.flags|=2,d&&(b.id=d.uid,b.i=d))};const _=Am(e,t,l);return vs&&(f?f.push(_):c&&_()),_}function cg(e,t,n){const r=this.proxy,s=Dt(e)?e.includes(".")?yf(r,e):()=>r[e]:e.bind(r,r);let i;lt(t)?i=t:(i=t.handler,n=t);const a=Ps(this),l=rl(s,i.bind(r),n);return a(),l}function yf(e,t){const n=t.split(".");return()=>{let r=e;for(let s=0;s<n.length&&r;s++)r=r[n[s]];return r}}const hg=(e,t)=>t==="modelValue"||t==="model-value"?e.modelModifiers:e[`${t}Modifiers`]||e[`${yn(t)}Modifiers`]||e[`${Wn(t)}Modifiers`];function fg(e,t,...n){if(e.isUnmounted)return;const r=e.vnode.props||wt;let s=n;const i=t.startsWith("update:"),a=i&&hg(r,t.slice(7));a&&(a.trim&&(s=n.map(d=>Dt(d)?d.trim():d)),a.number&&(s=n.map(yi)));let l,c=r[l=qo(t)]||r[l=qo(yn(t))];!c&&i&&(c=r[l=qo(Wn(t))]),c&&Me(c,e,6,s);const f=r[l+"Once"];if(f){if(!e.emitted)e.emitted={};else if(e.emitted[l])return;e.emitted[l]=!0,Me(f,e,6,s)}}function vf(e,t,n=!1){const r=t.emitsCache,s=r.get(e);if(s!==void 0)return s;const i=e.emits;let a={},l=!1;if(!lt(e)){const c=f=>{const d=vf(f,t,!0);d&&(l=!0,ae(a,d))};!n&&t.mixins.length&&t.mixins.forEach(c),e.extends&&c(e.extends),e.mixins&&e.mixins.forEach(c)}return!i&&!l?(bt(e)&&r.set(e,null),null):(st(i)?i.forEach(c=>a[c]=null):ae(a,i),bt(e)&&r.set(e,a),a)}function io(e,t){return!e||!Ki(t)?!1:(t=t.slice(2).replace(/Once$/,""),yt(e,t[0].toLowerCase()+t.slice(1))||yt(e,Wn(t))||yt(e,t))}function Hu(e){const{type:t,vnode:n,proxy:r,withProxy:s,propsOptions:[i],slots:a,attrs:l,emit:c,render:f,renderCache:d,props:m,data:_,setupState:b,ctx:D,inheritAttrs:L}=e,M=wi(e);let X,O;try{if(n.shapeFlag&4){const S=s||r,z=S;X=xe(f.call(z,S,d,m,b,_,D)),O=l}else{const S=t;X=xe(S.length>1?S(m,{attrs:l,slots:a,emit:c}):S(m,null)),O=t.props?l:dg(l)}}catch(S){os.length=0,to(S,e,1),X=We(Xe)}let $=X;if(O&&L!==!1){const S=Object.keys(O),{shapeFlag:z}=$;S.length&&z&7&&(i&&S.some(qa)&&(O=pg(O,i)),$=zn($,O,!1,!0))}return n.dirs&&($=zn($,null,!1,!0),$.dirs=$.dirs?$.dirs.concat(n.dirs):n.dirs),n.transition&&eo($,n.transition),X=$,wi(M),X}const dg=e=>{let t;for(const n in e)(n==="class"||n==="style"||Ki(n))&&((t||(t={}))[n]=e[n]);return t},pg=(e,t)=>{const n={};for(const r in e)(!qa(r)||!(r.slice(9)in t))&&(n[r]=e[r]);return n};function mg(e,t,n){const{props:r,children:s,component:i}=e,{props:a,children:l,patchFlag:c}=t,f=i.emitsOptions;if(t.dirs||t.transition)return!0;if(n&&c>=0){if(c&1024)return!0;if(c&16)return r?zu(r,a,f):!!a;if(c&8){const d=t.dynamicProps;for(let m=0;m<d.length;m++){const _=d[m];if(a[_]!==r[_]&&!io(f,_))return!0}}}else return(s||l)&&(!l||!l.$stable)?!0:r===a?!1:r?a?zu(r,a,f):!0:!!a;return!1}function zu(e,t,n){const r=Object.keys(t);if(r.length!==Object.keys(e).length)return!0;for(let s=0;s<r.length;s++){const i=r[s];if(t[i]!==e[i]&&!io(n,i))return!0}return!1}function gg({vnode:e,parent:t},n){for(;t;){const r=t.subTree;if(r.suspense&&r.suspense.activeBranch===e&&(r.el=e.el),r===e)(e=t.vnode).el=n,t=t.parent;else break}}const Ci=e=>e.__isSuspense;function _g(e,t){t&&t.pendingBranch?st(e)?t.effects.push(...e):t.effects.push(e):Rm(e)}const re=Symbol.for("v-fgt"),oo=Symbol.for("v-txt"),Xe=Symbol.for("v-cmt"),Xo=Symbol.for("v-stc"),os=[];let _e=null;function Ct(e=!1){os.push(_e=e?null:[])}function yg(){os.pop(),_e=os[os.length-1]||null}let _s=1;function Ku(e,t=!1){_s+=e,e<0&&_e&&t&&(_e.hasOnce=!0)}function Ef(e){return e.dynamicChildren=_s>0?_e||ur:null,yg(),_s>0&&_e&&_e.push(e),e}function kt(e,t,n,r,s,i){return Ef(Q(e,t,n,r,s,i,!0))}function Xr(e,t,n,r,s){return Ef(We(e,t,n,r,s,!0))}function sl(e){return e?e.__v_isVNode===!0:!1}function sr(e,t){return e.type===t.type&&e.key===t.key}const Tf=({key:e})=>e??null,ci=({ref:e,ref_key:t,ref_for:n})=>(typeof e=="number"&&(e=""+e),e!=null?Dt(e)||oe(e)||lt(e)?{i:ge,r:e,k:t,f:!!n}:e:null);function Q(e,t=null,n=null,r=0,s=null,i=e===re?0:1,a=!1,l=!1){const c={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&Tf(t),ref:t&&ci(t),scopeId:Yh,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:i,patchFlag:r,dynamicProps:s,dynamicChildren:null,appContext:null,ctx:ge};return l?(il(c,n),i&128&&e.normalize(c)):n&&(c.shapeFlag|=Dt(n)?8:16),_s>0&&!a&&_e&&(c.patchFlag>0||i&6)&&c.patchFlag!==32&&_e.push(c),c}const We=vg;function vg(e,t=null,n=null,r=0,s=null,i=!1){if((!e||e===jm)&&(e=Xe),sl(e)){const l=zn(e,t,!0);return n&&il(l,n),_s>0&&!i&&_e&&(l.shapeFlag&6?_e[_e.indexOf(e)]=l:_e.push(l)),l.patchFlag=-2,l}if(Vg(e)&&(e=e.__vccOpts),t){t=Eg(t);let{class:l,style:c}=t;l&&!Dt(l)&&(t.class=Xi(l)),bt(c)&&(Za(c)&&!st(c)&&(c=ae({},c)),t.style=Yi(c))}const a=Dt(e)?1:Ci(e)?128:Vm(e)?64:bt(e)?4:lt(e)?2:0;return Q(e,t,n,r,s,a,i,!0)}function Eg(e){return e?Za(e)||uf(e)?ae({},e):e:null}function zn(e,t,n=!1,r=!1){const{props:s,ref:i,patchFlag:a,children:l,transition:c}=e,f=t?Tg(s||{},t):s,d={__v_isVNode:!0,__v_skip:!0,type:e.type,props:f,key:f&&Tf(f),ref:t&&t.ref?n&&i?st(i)?i.concat(ci(t)):[i,ci(t)]:ci(t):i,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:l,target:e.target,targetStart:e.targetStart,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==re?a===-1?16:a|16:a,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:c,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&zn(e.ssContent),ssFallback:e.ssFallback&&zn(e.ssFallback),el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce};return c&&r&&eo(d,c.clone(d)),d}function wf(e=" ",t=0){return We(oo,null,e,t)}function ys(e="",t=!1){return t?(Ct(),Xr(Xe,null,e)):We(Xe,null,e)}function xe(e){return e==null||typeof e=="boolean"?We(Xe):st(e)?We(re,null,e.slice()):sl(e)?cn(e):We(oo,null,String(e))}function cn(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:zn(e)}function il(e,t){let n=0;const{shapeFlag:r}=e;if(t==null)t=null;else if(st(t))n=16;else if(typeof t=="object")if(r&65){const s=t.default;s&&(s._c&&(s._d=!1),il(e,s()),s._c&&(s._d=!0));return}else{n=32;const s=t._;!s&&!uf(t)?t._ctx=ge:s===3&&ge&&(ge.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else lt(t)?(t={default:t,_ctx:ge},n=32):(t=String(t),r&64?(n=16,t=[wf(t)]):n=8);e.children=t,e.shapeFlag|=n}function Tg(...e){const t={};for(let n=0;n<e.length;n++){const r=e[n];for(const s in r)if(s==="class")t.class!==r.class&&(t.class=Xi([t.class,r.class]));else if(s==="style")t.style=Yi([t.style,r.style]);else if(Ki(s)){const i=t[s],a=r[s];a&&i!==a&&!(st(i)&&i.includes(a))&&(t[s]=i?[].concat(i,a):a)}else s!==""&&(t[s]=r[s])}return t}function we(e,t,n,r=null){Me(e,t,7,[n,r])}const wg=of();let Ig=0;function Ag(e,t,n){const r=e.type,s=(t?t.appContext:e.appContext)||wg,i={uid:Ig++,vnode:e,type:r,parent:t,appContext:s,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new Yp(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(s.provides),ids:t?t.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:hf(r,s),emitsOptions:vf(r,s),emit:null,emitted:null,propsDefaults:wt,inheritAttrs:r.inheritAttrs,ctx:wt,data:wt,props:wt,attrs:wt,slots:wt,refs:wt,setupState:wt,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return i.ctx={_:i},i.root=t?t.root:i,i.emit=fg.bind(null,i),e.ce&&e.ce(i),i}let ie=null;const bg=()=>ie||ge;let Ri,ya;{const e=Qi(),t=(n,r)=>{let s;return(s=e[n])||(s=e[n]=[]),s.push(r),i=>{s.length>1?s.forEach(a=>a(i)):s[0](i)}};Ri=t("__VUE_INSTANCE_SETTERS__",n=>ie=n),ya=t("__VUE_SSR_SETTERS__",n=>vs=n)}const Ps=e=>{const t=ie;return Ri(e),e.scope.on(),()=>{e.scope.off(),Ri(t)}},Gu=()=>{ie&&ie.scope.off(),Ri(null)};function If(e){return e.vnode.shapeFlag&4}let vs=!1;function Cg(e,t=!1,n=!1){t&&ya(t);const{props:r,children:s}=e.vnode,i=If(e);Jm(e,r,i,t),ng(e,s,n||t);const a=i?Rg(e,t):void 0;return t&&ya(!1),a}function Rg(e,t){const n=e.type;e.accessCache=Object.create(null),e.proxy=new Proxy(e.ctx,qm);const{setup:r}=n;if(r){Qe();const s=e.setupContext=r.length>1?Pg(e):null,i=Ps(e),a=Ss(r,e,0,[e.props,s]),l=Th(a);if(Ye(),i(),(l||e.sp)&&!pr(e)&&Xh(e),l){if(a.then(Gu,Gu),t)return a.then(c=>{Wu(e,c)}).catch(c=>{to(c,e,0)});e.asyncDep=a}else Wu(e,a)}else Af(e)}function Wu(e,t,n){lt(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:bt(t)&&(e.setupState=Hh(t)),Af(e)}function Af(e,t,n){const r=e.type;e.render||(e.render=r.render||Ce);{const s=Ps(e);Qe();try{Hm(e)}finally{Ye(),s()}}}const Sg={get(e,t){return ne(e,"get",""),e[t]}};function Pg(e){const t=n=>{e.exposed=n||{}};return{attrs:new Proxy(e.attrs,Sg),slots:e.slots,emit:e.emit,expose:t}}function ao(e){return e.exposed?e.exposeProxy||(e.exposeProxy=new Proxy(Hh(_m(e.exposed)),{get(t,n){if(n in t)return t[n];if(n in is)return is[n](e)},has(t,n){return n in t||n in is}})):e.proxy}function Qu(e,t=!0){return lt(e)?e.displayName||e.name:e.name||t&&e.__name}function Vg(e){return lt(e)&&"__vccOpts"in e}const as=(e,t)=>wm(e,t,vs),Dg="3.5.14",Jo=Ce;/**
* @vue/runtime-dom v3.5.14
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let va;const Yu=typeof window<"u"&&window.trustedTypes;if(Yu)try{va=Yu.createPolicy("vue",{createHTML:e=>e})}catch{}const bf=va?e=>va.createHTML(e):e=>e,xg="http://www.w3.org/2000/svg",Ng="http://www.w3.org/1998/Math/MathML",ze=typeof document<"u"?document:null,Xu=ze&&ze.createElement("template"),Og={insert:(e,t,n)=>{t.insertBefore(e,n||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,n,r)=>{const s=t==="svg"?ze.createElementNS(xg,e):t==="mathml"?ze.createElementNS(Ng,e):n?ze.createElement(e,{is:n}):ze.createElement(e);return e==="select"&&r&&r.multiple!=null&&s.setAttribute("multiple",r.multiple),s},createText:e=>ze.createTextNode(e),createComment:e=>ze.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>ze.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,n,r,s,i){const a=n?n.previousSibling:t.lastChild;if(s&&(s===i||s.nextSibling))for(;t.insertBefore(s.cloneNode(!0),n),!(s===i||!(s=s.nextSibling)););else{Xu.innerHTML=bf(r==="svg"?`<svg>${e}</svg>`:r==="mathml"?`<math>${e}</math>`:e);const l=Xu.content;if(r==="svg"||r==="mathml"){const c=l.firstChild;for(;c.firstChild;)l.appendChild(c.firstChild);l.removeChild(c)}t.insertBefore(l,n)}return[a?a.nextSibling:t.firstChild,n?n.previousSibling:t.lastChild]}},kg=Symbol("_vtc");function Mg(e,t,n){const r=e[kg];r&&(t=(t?[t,...r]:[...r]).join(" ")),t==null?e.removeAttribute("class"):n?e.setAttribute("class",t):e.className=t}const Ju=Symbol("_vod"),Lg=Symbol("_vsh"),Fg=Symbol(""),Bg=/(^|;)\s*display\s*:/;function Ug(e,t,n){const r=e.style,s=Dt(n);let i=!1;if(n&&!s){if(t)if(Dt(t))for(const a of t.split(";")){const l=a.slice(0,a.indexOf(":")).trim();n[l]==null&&hi(r,l,"")}else for(const a in t)n[a]==null&&hi(r,a,"");for(const a in n)a==="display"&&(i=!0),hi(r,a,n[a])}else if(s){if(t!==n){const a=r[Fg];a&&(n+=";"+a),r.cssText=n,i=Bg.test(n)}}else t&&e.removeAttribute("style");Ju in e&&(e[Ju]=i?r.display:"",e[Lg]&&(r.display="none"))}const Zu=/\s*!important$/;function hi(e,t,n){if(st(n))n.forEach(r=>hi(e,t,r));else if(n==null&&(n=""),t.startsWith("--"))e.setProperty(t,n);else{const r=$g(e,t);Zu.test(n)?e.setProperty(Wn(r),n.replace(Zu,""),"important"):e[r]=n}}const tc=["Webkit","Moz","ms"],Zo={};function $g(e,t){const n=Zo[t];if(n)return n;let r=yn(t);if(r!=="filter"&&r in e)return Zo[t]=r;r=Ah(r);for(let s=0;s<tc.length;s++){const i=tc[s]+r;if(i in e)return Zo[t]=i}return t}const ec="http://www.w3.org/1999/xlink";function nc(e,t,n,r,s,i=Gp(t)){r&&t.startsWith("xlink:")?n==null?e.removeAttributeNS(ec,t.slice(6,t.length)):e.setAttributeNS(ec,t,n):n==null||i&&!Ch(n)?e.removeAttribute(t):e.setAttribute(t,i?"":ke(n)?String(n):n)}function rc(e,t,n,r,s){if(t==="innerHTML"||t==="textContent"){n!=null&&(e[t]=t==="innerHTML"?bf(n):n);return}const i=e.tagName;if(t==="value"&&i!=="PROGRESS"&&!i.includes("-")){const l=i==="OPTION"?e.getAttribute("value")||"":e.value,c=n==null?e.type==="checkbox"?"on":"":String(n);(l!==c||!("_value"in e))&&(e.value=c),n==null&&e.removeAttribute(t),e._value=n;return}let a=!1;if(n===""||n==null){const l=typeof e[t];l==="boolean"?n=Ch(n):n==null&&l==="string"?(n="",a=!0):l==="number"&&(n=0,a=!0)}try{e[t]=n}catch{}a&&e.removeAttribute(s||t)}function jn(e,t,n,r){e.addEventListener(t,n,r)}function jg(e,t,n,r){e.removeEventListener(t,n,r)}const sc=Symbol("_vei");function qg(e,t,n,r,s=null){const i=e[sc]||(e[sc]={}),a=i[t];if(r&&a)a.value=r;else{const[l,c]=Hg(t);if(r){const f=i[t]=Gg(r,s);jn(e,l,f,c)}else a&&(jg(e,l,a,c),i[t]=void 0)}}const ic=/(?:Once|Passive|Capture)$/;function Hg(e){let t;if(ic.test(e)){t={};let r;for(;r=e.match(ic);)e=e.slice(0,e.length-r[0].length),t[r[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):Wn(e.slice(2)),t]}let ta=0;const zg=Promise.resolve(),Kg=()=>ta||(zg.then(()=>ta=0),ta=Date.now());function Gg(e,t){const n=r=>{if(!r._vts)r._vts=Date.now();else if(r._vts<=n.attached)return;Me(Wg(r,n.value),t,5,[r])};return n.value=e,n.attached=Kg(),n}function Wg(e,t){if(st(t)){const n=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{n.call(e),e._stopped=!0},t.map(r=>s=>!s._stopped&&r&&r(s))}else return t}const oc=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)>96&&e.charCodeAt(2)<123,Qg=(e,t,n,r,s,i)=>{const a=s==="svg";t==="class"?Mg(e,r,a):t==="style"?Ug(e,n,r):Ki(t)?qa(t)||qg(e,t,n,r,i):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):Yg(e,t,r,a))?(rc(e,t,r),!e.tagName.includes("-")&&(t==="value"||t==="checked"||t==="selected")&&nc(e,t,r,a,i,t!=="value")):e._isVueCE&&(/[A-Z]/.test(t)||!Dt(r))?rc(e,yn(t),r,i,t):(t==="true-value"?e._trueValue=r:t==="false-value"&&(e._falseValue=r),nc(e,t,r,a))};function Yg(e,t,n,r){if(r)return!!(t==="innerHTML"||t==="textContent"||t in e&&oc(t)&&lt(n));if(t==="spellcheck"||t==="draggable"||t==="translate"||t==="autocorrect"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA")return!1;if(t==="width"||t==="height"){const s=e.tagName;if(s==="IMG"||s==="VIDEO"||s==="CANVAS"||s==="SOURCE")return!1}return oc(t)&&Dt(n)?!1:t in e}const Si=e=>{const t=e.props["onUpdate:modelValue"]||!1;return st(t)?n=>hr(t,n):t};function Xg(e){e.target.composing=!0}function ac(e){const t=e.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}const _r=Symbol("_assign"),Jr={created(e,{modifiers:{lazy:t,trim:n,number:r}},s){e[_r]=Si(s);const i=r||s.props&&s.props.type==="number";jn(e,t?"change":"input",a=>{if(a.target.composing)return;let l=e.value;n&&(l=l.trim()),i&&(l=yi(l)),e[_r](l)}),n&&jn(e,"change",()=>{e.value=e.value.trim()}),t||(jn(e,"compositionstart",Xg),jn(e,"compositionend",ac),jn(e,"change",ac))},mounted(e,{value:t}){e.value=t??""},beforeUpdate(e,{value:t,oldValue:n,modifiers:{lazy:r,trim:s,number:i}},a){if(e[_r]=Si(a),e.composing)return;const l=(i||e.type==="number")&&!/^0\d/.test(e.value)?yi(e.value):e.value,c=t??"";l!==c&&(document.activeElement===e&&e.type!=="range"&&(r&&t===n||s&&e.value.trim()===c)||(e.value=c))}},ea={deep:!0,created(e,{value:t,modifiers:{number:n}},r){const s=Gi(t);jn(e,"change",()=>{const i=Array.prototype.filter.call(e.options,a=>a.selected).map(a=>n?yi(Pi(a)):Pi(a));e[_r](e.multiple?s?new Set(i):i:i[0]),e._assigning=!0,Kh(()=>{e._assigning=!1})}),e[_r]=Si(r)},mounted(e,{value:t}){lc(e,t)},beforeUpdate(e,t,n){e[_r]=Si(n)},updated(e,{value:t}){e._assigning||lc(e,t)}};function lc(e,t){const n=e.multiple,r=st(t);if(!(n&&!r&&!Gi(t))){for(let s=0,i=e.options.length;s<i;s++){const a=e.options[s],l=Pi(a);if(n)if(r){const c=typeof l;c==="string"||c==="number"?a.selected=t.some(f=>String(f)===String(l)):a.selected=Qp(t,l)>-1}else a.selected=t.has(l);else if(Ji(Pi(a),t)){e.selectedIndex!==s&&(e.selectedIndex=s);return}}!n&&e.selectedIndex!==-1&&(e.selectedIndex=-1)}}function Pi(e){return"_value"in e?e._value:e.value}const Jg=ae({patchProp:Qg},Og);let uc;function Zg(){return uc||(uc=sg(Jg))}const t_=(...e)=>{const t=Zg().createApp(...e),{mount:n}=t;return t.mount=r=>{const s=n_(r);if(!s)return;const i=t._component;!lt(i)&&!i.render&&!i.template&&(i.template=s.innerHTML),s.nodeType===1&&(s.textContent="");const a=n(s,!1,e_(s));return s instanceof Element&&(s.removeAttribute("v-cloak"),s.setAttribute("data-v-app","")),a},t};function e_(e){if(e instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&e instanceof MathMLElement)return"mathml"}function n_(e){return Dt(e)?document.querySelector(e):e}const r_=()=>{};var cc={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cf=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let s=e.charCodeAt(r);s<128?t[n++]=s:s<2048?(t[n++]=s>>6|192,t[n++]=s&63|128):(s&64512)===55296&&r+1<e.length&&(e.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(e.charCodeAt(++r)&1023),t[n++]=s>>18|240,t[n++]=s>>12&63|128,t[n++]=s>>6&63|128,t[n++]=s&63|128):(t[n++]=s>>12|224,t[n++]=s>>6&63|128,t[n++]=s&63|128)}return t},s_=function(e){const t=[];let n=0,r=0;for(;n<e.length;){const s=e[n++];if(s<128)t[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=e[n++];t[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=e[n++],a=e[n++],l=e[n++],c=((s&7)<<18|(i&63)<<12|(a&63)<<6|l&63)-65536;t[r++]=String.fromCharCode(55296+(c>>10)),t[r++]=String.fromCharCode(56320+(c&1023))}else{const i=e[n++],a=e[n++];t[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|a&63)}}return t.join("")},Rf={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<e.length;s+=3){const i=e[s],a=s+1<e.length,l=a?e[s+1]:0,c=s+2<e.length,f=c?e[s+2]:0,d=i>>2,m=(i&3)<<4|l>>4;let _=(l&15)<<2|f>>6,b=f&63;c||(b=64,a||(_=64)),r.push(n[d],n[m],n[_],n[b])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(Cf(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):s_(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<e.length;){const i=n[e.charAt(s++)],l=s<e.length?n[e.charAt(s)]:0;++s;const f=s<e.length?n[e.charAt(s)]:64;++s;const m=s<e.length?n[e.charAt(s)]:64;if(++s,i==null||l==null||f==null||m==null)throw new i_;const _=i<<2|l>>4;if(r.push(_),f!==64){const b=l<<4&240|f>>2;if(r.push(b),m!==64){const D=f<<6&192|m;r.push(D)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class i_ extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const o_=function(e){const t=Cf(e);return Rf.encodeByteArray(t,!0)},Vi=function(e){return o_(e).replace(/\./g,"")},a_=function(e){try{return Rf.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l_(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u_=()=>l_().__FIREBASE_DEFAULTS__,c_=()=>{if(typeof process>"u"||typeof cc>"u")return;const e=cc.__FIREBASE_DEFAULTS__;if(e)return JSON.parse(e)},h_=()=>{if(typeof document>"u")return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=e&&a_(e[1]);return t&&JSON.parse(t)},ol=()=>{try{return r_()||u_()||c_()||h_()}catch(e){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`);return}},f_=e=>{var t,n;return(n=(t=ol())===null||t===void 0?void 0:t.emulatorHosts)===null||n===void 0?void 0:n[e]},d_=e=>{const t=f_(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const r=parseInt(t.substring(n+1),10);return t[0]==="["?[t.substring(1,n-1),r]:[t.substring(0,n),r]},Sf=()=>{var e;return(e=ol())===null||e===void 0?void 0:e.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p_{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}wrapCallback(t){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(n):t(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function al(e){return e.endsWith(".cloudworkstations.dev")}async function m_(e){return(await fetch(e,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g_(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=t||"demo-project",s=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[Vi(JSON.stringify(n)),Vi(JSON.stringify(a)),""].join(".")}const ls={};function __(){const e={prod:[],emulator:[]};for(const t of Object.keys(ls))ls[t]?e.emulator.push(t):e.prod.push(t);return e}function y_(e){let t=document.getElementById(e),n=!1;return t||(t=document.createElement("div"),t.setAttribute("id",e),n=!0),{created:n,element:t}}let hc=!1;function v_(e,t){if(typeof window>"u"||typeof document>"u"||!al(window.location.host)||ls[e]===t||ls[e]||hc)return;ls[e]=t;function n(_){return`__firebase__banner__${_}`}const r="__firebase__banner",i=__().prod.length>0;function a(){const _=document.getElementById(r);_&&_.remove()}function l(_){_.style.display="flex",_.style.background="#7faaf0",_.style.position="fixed",_.style.bottom="5px",_.style.left="5px",_.style.padding=".5em",_.style.borderRadius="5px",_.style.alignItems="center"}function c(_,b){_.setAttribute("width","24"),_.setAttribute("id",b),_.setAttribute("height","24"),_.setAttribute("viewBox","0 0 24 24"),_.setAttribute("fill","none"),_.style.marginLeft="-6px"}function f(){const _=document.createElement("span");return _.style.cursor="pointer",_.style.marginLeft="16px",_.style.fontSize="24px",_.innerHTML=" &times;",_.onclick=()=>{hc=!0,a()},_}function d(_,b){_.setAttribute("id",b),_.innerText="Learn more",_.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",_.setAttribute("target","__blank"),_.style.paddingLeft="5px",_.style.textDecoration="underline"}function m(){const _=y_(r),b=n("text"),D=document.getElementById(b)||document.createElement("span"),L=n("learnmore"),M=document.getElementById(L)||document.createElement("a"),X=n("preprendIcon"),O=document.getElementById(X)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(_.created){const $=_.element;l($),d(M,L);const S=f();c(O,X),$.append(O,D,M,S),document.body.appendChild($)}i?(D.innerText="Preview backend disconnected.",O.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(O.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,D.innerText="Preview backend running in this workspace."),D.setAttribute("id",b)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",m):m()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E_(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function T_(){var e;const t=(e=ol())===null||e===void 0?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function w_(){return!T_()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function I_(){try{return typeof indexedDB=="object"}catch{return!1}}function A_(){return new Promise((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;t(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(n){t(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b_="FirebaseError";class Sr extends Error{constructor(t,n,r){super(n),this.code=t,this.customData=r,this.name=b_,Object.setPrototypeOf(this,Sr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Pf.prototype.create)}}class Pf{constructor(t,n,r){this.service=t,this.serviceName=n,this.errors=r}create(t,...n){const r=n[0]||{},s=`${this.service}/${t}`,i=this.errors[t],a=i?C_(i,r):"Error",l=`${this.serviceName}: ${a} (${s}).`;return new Sr(s,l,r)}}function C_(e,t){return e.replace(R_,(n,r)=>{const s=t[r];return s!=null?String(s):`<${r}?>`})}const R_=/\{\$([^}]+)}/g;function Di(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const s of n){if(!r.includes(s))return!1;const i=e[s],a=t[s];if(fc(i)&&fc(a)){if(!Di(i,a))return!1}else if(i!==a)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function fc(e){return e!==null&&typeof e=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function En(e){return e&&e._delegate?e._delegate:e}class Es{constructor(t,n,r){this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $n="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S_{constructor(t,n){this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const n=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(n)){const r=new p_;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(t){var n;const r=this.normalizeInstanceIdentifier(t==null?void 0:t.identifier),s=(n=t==null?void 0:t.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(V_(t))try{this.getOrInitializeService({instanceIdentifier:$n})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(t=$n){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...t.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=$n){return this.instances.has(t)}getOptions(t=$n){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:n={}}=t,r=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,a]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(i);r===l&&a.resolve(s)}return s}onInit(t,n){var r;const s=this.normalizeInstanceIdentifier(n),i=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;i.add(t),this.onInitCallbacks.set(s,i);const a=this.instances.get(s);return a&&t(a,s),()=>{i.delete(t)}}invokeOnInitCallbacks(t,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(t,n)}catch{}}getOrInitializeService({instanceIdentifier:t,options:n={}}){let r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:P_(t),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch{}return r||null}normalizeInstanceIdentifier(t=$n){return this.component?this.component.multipleInstances?t:$n:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function P_(e){return e===$n?void 0:e}function V_(e){return e.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D_{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const n=this.getProvider(t.name);if(n.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);n.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const n=new S_(t,this);return this.providers.set(t,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var pt;(function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"})(pt||(pt={}));const x_={debug:pt.DEBUG,verbose:pt.VERBOSE,info:pt.INFO,warn:pt.WARN,error:pt.ERROR,silent:pt.SILENT},N_=pt.INFO,O_={[pt.DEBUG]:"log",[pt.VERBOSE]:"log",[pt.INFO]:"info",[pt.WARN]:"warn",[pt.ERROR]:"error"},k_=(e,t,...n)=>{if(t<e.logLevel)return;const r=new Date().toISOString(),s=O_[t];if(s)console[s](`[${r}]  ${e.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class Vf{constructor(t){this.name=t,this._logLevel=N_,this._logHandler=k_,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in pt))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?x_[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,pt.DEBUG,...t),this._logHandler(this,pt.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,pt.VERBOSE,...t),this._logHandler(this,pt.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,pt.INFO,...t),this._logHandler(this,pt.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,pt.WARN,...t),this._logHandler(this,pt.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,pt.ERROR,...t),this._logHandler(this,pt.ERROR,...t)}}const M_=(e,t)=>t.some(n=>e instanceof n);let dc,pc;function L_(){return dc||(dc=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function F_(){return pc||(pc=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Df=new WeakMap,Ea=new WeakMap,xf=new WeakMap,na=new WeakMap,ll=new WeakMap;function B_(e){const t=new Promise((n,r)=>{const s=()=>{e.removeEventListener("success",i),e.removeEventListener("error",a)},i=()=>{n(dn(e.result)),s()},a=()=>{r(e.error),s()};e.addEventListener("success",i),e.addEventListener("error",a)});return t.then(n=>{n instanceof IDBCursor&&Df.set(n,e)}).catch(()=>{}),ll.set(t,e),t}function U_(e){if(Ea.has(e))return;const t=new Promise((n,r)=>{const s=()=>{e.removeEventListener("complete",i),e.removeEventListener("error",a),e.removeEventListener("abort",a)},i=()=>{n(),s()},a=()=>{r(e.error||new DOMException("AbortError","AbortError")),s()};e.addEventListener("complete",i),e.addEventListener("error",a),e.addEventListener("abort",a)});Ea.set(e,t)}let Ta={get(e,t,n){if(e instanceof IDBTransaction){if(t==="done")return Ea.get(e);if(t==="objectStoreNames")return e.objectStoreNames||xf.get(e);if(t==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return dn(e[t])},set(e,t,n){return e[t]=n,!0},has(e,t){return e instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in e}};function $_(e){Ta=e(Ta)}function j_(e){return e===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...n){const r=e.call(ra(this),t,...n);return xf.set(r,t.sort?t.sort():[t]),dn(r)}:F_().includes(e)?function(...t){return e.apply(ra(this),t),dn(Df.get(this))}:function(...t){return dn(e.apply(ra(this),t))}}function q_(e){return typeof e=="function"?j_(e):(e instanceof IDBTransaction&&U_(e),M_(e,L_())?new Proxy(e,Ta):e)}function dn(e){if(e instanceof IDBRequest)return B_(e);if(na.has(e))return na.get(e);const t=q_(e);return t!==e&&(na.set(e,t),ll.set(t,e)),t}const ra=e=>ll.get(e);function H_(e,t,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const a=indexedDB.open(e,t),l=dn(a);return r&&a.addEventListener("upgradeneeded",c=>{r(dn(a.result),c.oldVersion,c.newVersion,dn(a.transaction),c)}),n&&a.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),l.then(c=>{i&&c.addEventListener("close",()=>i()),s&&c.addEventListener("versionchange",f=>s(f.oldVersion,f.newVersion,f))}).catch(()=>{}),l}const z_=["get","getKey","getAll","getAllKeys","count"],K_=["put","add","delete","clear"],sa=new Map;function mc(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&typeof t=="string"))return;if(sa.get(t))return sa.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,s=K_.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||z_.includes(n)))return;const i=async function(a,...l){const c=this.transaction(a,s?"readwrite":"readonly");let f=c.store;return r&&(f=f.index(l.shift())),(await Promise.all([f[n](...l),s&&c.done]))[0]};return sa.set(t,i),i}$_(e=>({...e,get:(t,n,r)=>mc(t,n)||e.get(t,n,r),has:(t,n)=>!!mc(t,n)||e.has(t,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G_{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(W_(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function W_(e){const t=e.getComponent();return(t==null?void 0:t.type)==="VERSION"}const wa="@firebase/app",gc="0.13.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Je=new Vf("@firebase/app"),Q_="@firebase/app-compat",Y_="@firebase/analytics-compat",X_="@firebase/analytics",J_="@firebase/app-check-compat",Z_="@firebase/app-check",ty="@firebase/auth",ey="@firebase/auth-compat",ny="@firebase/database",ry="@firebase/data-connect",sy="@firebase/database-compat",iy="@firebase/functions",oy="@firebase/functions-compat",ay="@firebase/installations",ly="@firebase/installations-compat",uy="@firebase/messaging",cy="@firebase/messaging-compat",hy="@firebase/performance",fy="@firebase/performance-compat",dy="@firebase/remote-config",py="@firebase/remote-config-compat",my="@firebase/storage",gy="@firebase/storage-compat",_y="@firebase/firestore",yy="@firebase/ai",vy="@firebase/firestore-compat",Ey="firebase",Ty="11.8.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ia="[DEFAULT]",wy={[wa]:"fire-core",[Q_]:"fire-core-compat",[X_]:"fire-analytics",[Y_]:"fire-analytics-compat",[Z_]:"fire-app-check",[J_]:"fire-app-check-compat",[ty]:"fire-auth",[ey]:"fire-auth-compat",[ny]:"fire-rtdb",[ry]:"fire-data-connect",[sy]:"fire-rtdb-compat",[iy]:"fire-fn",[oy]:"fire-fn-compat",[ay]:"fire-iid",[ly]:"fire-iid-compat",[uy]:"fire-fcm",[cy]:"fire-fcm-compat",[hy]:"fire-perf",[fy]:"fire-perf-compat",[dy]:"fire-rc",[py]:"fire-rc-compat",[my]:"fire-gcs",[gy]:"fire-gcs-compat",[_y]:"fire-fst",[vy]:"fire-fst-compat",[yy]:"fire-vertex","fire-js":"fire-js",[Ey]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xi=new Map,Iy=new Map,Aa=new Map;function _c(e,t){try{e.container.addComponent(t)}catch(n){Je.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function Ni(e){const t=e.name;if(Aa.has(t))return Je.debug(`There were multiple attempts to register component ${t}.`),!1;Aa.set(t,e);for(const n of xi.values())_c(n,e);for(const n of Iy.values())_c(n,e);return!0}function Ay(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function by(e){return e==null?!1:e.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cy={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},pn=new Pf("app","Firebase",Cy);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ry{constructor(t,n,r){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Es("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw pn.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sy=Ty;function Nf(e,t={}){let n=e;typeof t!="object"&&(t={name:t});const r=Object.assign({name:Ia,automaticDataCollectionEnabled:!0},t),s=r.name;if(typeof s!="string"||!s)throw pn.create("bad-app-name",{appName:String(s)});if(n||(n=Sf()),!n)throw pn.create("no-options");const i=xi.get(s);if(i){if(Di(n,i.options)&&Di(r,i.config))return i;throw pn.create("duplicate-app",{appName:s})}const a=new D_(s);for(const c of Aa.values())a.addComponent(c);const l=new Ry(n,r,a);return xi.set(s,l),l}function Py(e=Ia){const t=xi.get(e);if(!t&&e===Ia&&Sf())return Nf();if(!t)throw pn.create("no-app",{appName:e});return t}function yr(e,t,n){var r;let s=(r=wy[e])!==null&&r!==void 0?r:e;n&&(s+=`-${n}`);const i=s.match(/\s|\//),a=t.match(/\s|\//);if(i||a){const l=[`Unable to register library "${s}" with version "${t}":`];i&&l.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&a&&l.push("and"),a&&l.push(`version name "${t}" contains illegal characters (whitespace or "/")`),Je.warn(l.join(" "));return}Ni(new Es(`${s}-version`,()=>({library:s,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vy="firebase-heartbeat-database",Dy=1,Ts="firebase-heartbeat-store";let ia=null;function Of(){return ia||(ia=H_(Vy,Dy,{upgrade:(e,t)=>{switch(t){case 0:try{e.createObjectStore(Ts)}catch(n){console.warn(n)}}}}).catch(e=>{throw pn.create("idb-open",{originalErrorMessage:e.message})})),ia}async function xy(e){try{const n=(await Of()).transaction(Ts),r=await n.objectStore(Ts).get(kf(e));return await n.done,r}catch(t){if(t instanceof Sr)Je.warn(t.message);else{const n=pn.create("idb-get",{originalErrorMessage:t==null?void 0:t.message});Je.warn(n.message)}}}async function yc(e,t){try{const r=(await Of()).transaction(Ts,"readwrite");await r.objectStore(Ts).put(t,kf(e)),await r.done}catch(n){if(n instanceof Sr)Je.warn(n.message);else{const r=pn.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Je.warn(r.message)}}}function kf(e){return`${e.name}!${e.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ny=1024,Oy=30;class ky{constructor(t){this.container=t,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new Ly(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var t,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=vc();if(((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(a=>a.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats.length>Oy){const a=Fy(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(a,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Je.warn(r)}}async getHeartbeatsHeader(){var t;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=vc(),{heartbeatsToSend:r,unsentEntries:s}=My(this._heartbeatsCache.heartbeats),i=Vi(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return Je.warn(n),""}}}function vc(){return new Date().toISOString().substring(0,10)}function My(e,t=Ny){const n=[];let r=e.slice();for(const s of e){const i=n.find(a=>a.agent===s.agent);if(i){if(i.dates.push(s.date),Ec(n)>t){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),Ec(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class Ly{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return I_()?A_().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await xy(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return yc(this.app,{lastSentHeartbeatDate:(n=t.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return yc(this.app,{lastSentHeartbeatDate:(n=t.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...t.heartbeats]})}else return}}function Ec(e){return Vi(JSON.stringify({version:2,heartbeats:e})).length}function Fy(e){if(e.length===0)return-1;let t=0,n=e[0].date;for(let r=1;r<e.length;r++)e[r].date<n&&(n=e[r].date,t=r);return t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function By(e){Ni(new Es("platform-logger",t=>new G_(t),"PRIVATE")),Ni(new Es("heartbeat",t=>new ky(t),"PRIVATE")),yr(wa,gc,e),yr(wa,gc,"esm2017"),yr("fire-js","")}By("");var Uy="firebase",$y="11.8.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */yr(Uy,$y,"app");var Tc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var mn,Mf;(function(){var e;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function t(w,g){function E(){}E.prototype=g.prototype,w.D=g.prototype,w.prototype=new E,w.prototype.constructor=w,w.C=function(T,A,R){for(var v=Array(arguments.length-2),pe=2;pe<arguments.length;pe++)v[pe-2]=arguments[pe];return g.prototype[A].apply(T,v)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}t(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(w,g,E){E||(E=0);var T=Array(16);if(typeof g=="string")for(var A=0;16>A;++A)T[A]=g.charCodeAt(E++)|g.charCodeAt(E++)<<8|g.charCodeAt(E++)<<16|g.charCodeAt(E++)<<24;else for(A=0;16>A;++A)T[A]=g[E++]|g[E++]<<8|g[E++]<<16|g[E++]<<24;g=w.g[0],E=w.g[1],A=w.g[2];var R=w.g[3],v=g+(R^E&(A^R))+T[0]+3614090360&4294967295;g=E+(v<<7&4294967295|v>>>25),v=R+(A^g&(E^A))+T[1]+3905402710&4294967295,R=g+(v<<12&4294967295|v>>>20),v=A+(E^R&(g^E))+T[2]+606105819&4294967295,A=R+(v<<17&4294967295|v>>>15),v=E+(g^A&(R^g))+T[3]+3250441966&4294967295,E=A+(v<<22&4294967295|v>>>10),v=g+(R^E&(A^R))+T[4]+4118548399&4294967295,g=E+(v<<7&4294967295|v>>>25),v=R+(A^g&(E^A))+T[5]+1200080426&4294967295,R=g+(v<<12&4294967295|v>>>20),v=A+(E^R&(g^E))+T[6]+2821735955&4294967295,A=R+(v<<17&4294967295|v>>>15),v=E+(g^A&(R^g))+T[7]+4249261313&4294967295,E=A+(v<<22&4294967295|v>>>10),v=g+(R^E&(A^R))+T[8]+1770035416&4294967295,g=E+(v<<7&4294967295|v>>>25),v=R+(A^g&(E^A))+T[9]+2336552879&4294967295,R=g+(v<<12&4294967295|v>>>20),v=A+(E^R&(g^E))+T[10]+4294925233&4294967295,A=R+(v<<17&4294967295|v>>>15),v=E+(g^A&(R^g))+T[11]+2304563134&4294967295,E=A+(v<<22&4294967295|v>>>10),v=g+(R^E&(A^R))+T[12]+1804603682&4294967295,g=E+(v<<7&4294967295|v>>>25),v=R+(A^g&(E^A))+T[13]+4254626195&4294967295,R=g+(v<<12&4294967295|v>>>20),v=A+(E^R&(g^E))+T[14]+2792965006&4294967295,A=R+(v<<17&4294967295|v>>>15),v=E+(g^A&(R^g))+T[15]+1236535329&4294967295,E=A+(v<<22&4294967295|v>>>10),v=g+(A^R&(E^A))+T[1]+4129170786&4294967295,g=E+(v<<5&4294967295|v>>>27),v=R+(E^A&(g^E))+T[6]+3225465664&4294967295,R=g+(v<<9&4294967295|v>>>23),v=A+(g^E&(R^g))+T[11]+643717713&4294967295,A=R+(v<<14&4294967295|v>>>18),v=E+(R^g&(A^R))+T[0]+3921069994&4294967295,E=A+(v<<20&4294967295|v>>>12),v=g+(A^R&(E^A))+T[5]+3593408605&4294967295,g=E+(v<<5&4294967295|v>>>27),v=R+(E^A&(g^E))+T[10]+38016083&4294967295,R=g+(v<<9&4294967295|v>>>23),v=A+(g^E&(R^g))+T[15]+3634488961&4294967295,A=R+(v<<14&4294967295|v>>>18),v=E+(R^g&(A^R))+T[4]+3889429448&4294967295,E=A+(v<<20&4294967295|v>>>12),v=g+(A^R&(E^A))+T[9]+568446438&4294967295,g=E+(v<<5&4294967295|v>>>27),v=R+(E^A&(g^E))+T[14]+3275163606&4294967295,R=g+(v<<9&4294967295|v>>>23),v=A+(g^E&(R^g))+T[3]+4107603335&4294967295,A=R+(v<<14&4294967295|v>>>18),v=E+(R^g&(A^R))+T[8]+1163531501&4294967295,E=A+(v<<20&4294967295|v>>>12),v=g+(A^R&(E^A))+T[13]+2850285829&4294967295,g=E+(v<<5&4294967295|v>>>27),v=R+(E^A&(g^E))+T[2]+4243563512&4294967295,R=g+(v<<9&4294967295|v>>>23),v=A+(g^E&(R^g))+T[7]+1735328473&4294967295,A=R+(v<<14&4294967295|v>>>18),v=E+(R^g&(A^R))+T[12]+2368359562&4294967295,E=A+(v<<20&4294967295|v>>>12),v=g+(E^A^R)+T[5]+4294588738&4294967295,g=E+(v<<4&4294967295|v>>>28),v=R+(g^E^A)+T[8]+2272392833&4294967295,R=g+(v<<11&4294967295|v>>>21),v=A+(R^g^E)+T[11]+1839030562&4294967295,A=R+(v<<16&4294967295|v>>>16),v=E+(A^R^g)+T[14]+4259657740&4294967295,E=A+(v<<23&4294967295|v>>>9),v=g+(E^A^R)+T[1]+2763975236&4294967295,g=E+(v<<4&4294967295|v>>>28),v=R+(g^E^A)+T[4]+1272893353&4294967295,R=g+(v<<11&4294967295|v>>>21),v=A+(R^g^E)+T[7]+4139469664&4294967295,A=R+(v<<16&4294967295|v>>>16),v=E+(A^R^g)+T[10]+3200236656&4294967295,E=A+(v<<23&4294967295|v>>>9),v=g+(E^A^R)+T[13]+681279174&4294967295,g=E+(v<<4&4294967295|v>>>28),v=R+(g^E^A)+T[0]+3936430074&4294967295,R=g+(v<<11&4294967295|v>>>21),v=A+(R^g^E)+T[3]+3572445317&4294967295,A=R+(v<<16&4294967295|v>>>16),v=E+(A^R^g)+T[6]+76029189&4294967295,E=A+(v<<23&4294967295|v>>>9),v=g+(E^A^R)+T[9]+3654602809&4294967295,g=E+(v<<4&4294967295|v>>>28),v=R+(g^E^A)+T[12]+3873151461&4294967295,R=g+(v<<11&4294967295|v>>>21),v=A+(R^g^E)+T[15]+530742520&4294967295,A=R+(v<<16&4294967295|v>>>16),v=E+(A^R^g)+T[2]+3299628645&4294967295,E=A+(v<<23&4294967295|v>>>9),v=g+(A^(E|~R))+T[0]+4096336452&4294967295,g=E+(v<<6&4294967295|v>>>26),v=R+(E^(g|~A))+T[7]+1126891415&4294967295,R=g+(v<<10&4294967295|v>>>22),v=A+(g^(R|~E))+T[14]+2878612391&4294967295,A=R+(v<<15&4294967295|v>>>17),v=E+(R^(A|~g))+T[5]+4237533241&4294967295,E=A+(v<<21&4294967295|v>>>11),v=g+(A^(E|~R))+T[12]+1700485571&4294967295,g=E+(v<<6&4294967295|v>>>26),v=R+(E^(g|~A))+T[3]+2399980690&4294967295,R=g+(v<<10&4294967295|v>>>22),v=A+(g^(R|~E))+T[10]+4293915773&4294967295,A=R+(v<<15&4294967295|v>>>17),v=E+(R^(A|~g))+T[1]+2240044497&4294967295,E=A+(v<<21&4294967295|v>>>11),v=g+(A^(E|~R))+T[8]+1873313359&4294967295,g=E+(v<<6&4294967295|v>>>26),v=R+(E^(g|~A))+T[15]+4264355552&4294967295,R=g+(v<<10&4294967295|v>>>22),v=A+(g^(R|~E))+T[6]+2734768916&4294967295,A=R+(v<<15&4294967295|v>>>17),v=E+(R^(A|~g))+T[13]+1309151649&4294967295,E=A+(v<<21&4294967295|v>>>11),v=g+(A^(E|~R))+T[4]+4149444226&4294967295,g=E+(v<<6&4294967295|v>>>26),v=R+(E^(g|~A))+T[11]+3174756917&4294967295,R=g+(v<<10&4294967295|v>>>22),v=A+(g^(R|~E))+T[2]+718787259&4294967295,A=R+(v<<15&4294967295|v>>>17),v=E+(R^(A|~g))+T[9]+3951481745&4294967295,w.g[0]=w.g[0]+g&4294967295,w.g[1]=w.g[1]+(A+(v<<21&4294967295|v>>>11))&4294967295,w.g[2]=w.g[2]+A&4294967295,w.g[3]=w.g[3]+R&4294967295}r.prototype.u=function(w,g){g===void 0&&(g=w.length);for(var E=g-this.blockSize,T=this.B,A=this.h,R=0;R<g;){if(A==0)for(;R<=E;)s(this,w,R),R+=this.blockSize;if(typeof w=="string"){for(;R<g;)if(T[A++]=w.charCodeAt(R++),A==this.blockSize){s(this,T),A=0;break}}else for(;R<g;)if(T[A++]=w[R++],A==this.blockSize){s(this,T),A=0;break}}this.h=A,this.o+=g},r.prototype.v=function(){var w=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);w[0]=128;for(var g=1;g<w.length-8;++g)w[g]=0;var E=8*this.o;for(g=w.length-8;g<w.length;++g)w[g]=E&255,E/=256;for(this.u(w),w=Array(16),g=E=0;4>g;++g)for(var T=0;32>T;T+=8)w[E++]=this.g[g]>>>T&255;return w};function i(w,g){var E=l;return Object.prototype.hasOwnProperty.call(E,w)?E[w]:E[w]=g(w)}function a(w,g){this.h=g;for(var E=[],T=!0,A=w.length-1;0<=A;A--){var R=w[A]|0;T&&R==g||(E[A]=R,T=!1)}this.g=E}var l={};function c(w){return-128<=w&&128>w?i(w,function(g){return new a([g|0],0>g?-1:0)}):new a([w|0],0>w?-1:0)}function f(w){if(isNaN(w)||!isFinite(w))return m;if(0>w)return M(f(-w));for(var g=[],E=1,T=0;w>=E;T++)g[T]=w/E|0,E*=4294967296;return new a(g,0)}function d(w,g){if(w.length==0)throw Error("number format error: empty string");if(g=g||10,2>g||36<g)throw Error("radix out of range: "+g);if(w.charAt(0)=="-")return M(d(w.substring(1),g));if(0<=w.indexOf("-"))throw Error('number format error: interior "-" character');for(var E=f(Math.pow(g,8)),T=m,A=0;A<w.length;A+=8){var R=Math.min(8,w.length-A),v=parseInt(w.substring(A,A+R),g);8>R?(R=f(Math.pow(g,R)),T=T.j(R).add(f(v))):(T=T.j(E),T=T.add(f(v)))}return T}var m=c(0),_=c(1),b=c(16777216);e=a.prototype,e.m=function(){if(L(this))return-M(this).m();for(var w=0,g=1,E=0;E<this.g.length;E++){var T=this.i(E);w+=(0<=T?T:4294967296+T)*g,g*=4294967296}return w},e.toString=function(w){if(w=w||10,2>w||36<w)throw Error("radix out of range: "+w);if(D(this))return"0";if(L(this))return"-"+M(this).toString(w);for(var g=f(Math.pow(w,6)),E=this,T="";;){var A=S(E,g).g;E=X(E,A.j(g));var R=((0<E.g.length?E.g[0]:E.h)>>>0).toString(w);if(E=A,D(E))return R+T;for(;6>R.length;)R="0"+R;T=R+T}},e.i=function(w){return 0>w?0:w<this.g.length?this.g[w]:this.h};function D(w){if(w.h!=0)return!1;for(var g=0;g<w.g.length;g++)if(w.g[g]!=0)return!1;return!0}function L(w){return w.h==-1}e.l=function(w){return w=X(this,w),L(w)?-1:D(w)?0:1};function M(w){for(var g=w.g.length,E=[],T=0;T<g;T++)E[T]=~w.g[T];return new a(E,~w.h).add(_)}e.abs=function(){return L(this)?M(this):this},e.add=function(w){for(var g=Math.max(this.g.length,w.g.length),E=[],T=0,A=0;A<=g;A++){var R=T+(this.i(A)&65535)+(w.i(A)&65535),v=(R>>>16)+(this.i(A)>>>16)+(w.i(A)>>>16);T=v>>>16,R&=65535,v&=65535,E[A]=v<<16|R}return new a(E,E[E.length-1]&-2147483648?-1:0)};function X(w,g){return w.add(M(g))}e.j=function(w){if(D(this)||D(w))return m;if(L(this))return L(w)?M(this).j(M(w)):M(M(this).j(w));if(L(w))return M(this.j(M(w)));if(0>this.l(b)&&0>w.l(b))return f(this.m()*w.m());for(var g=this.g.length+w.g.length,E=[],T=0;T<2*g;T++)E[T]=0;for(T=0;T<this.g.length;T++)for(var A=0;A<w.g.length;A++){var R=this.i(T)>>>16,v=this.i(T)&65535,pe=w.i(A)>>>16,nn=w.i(A)&65535;E[2*T+2*A]+=v*nn,O(E,2*T+2*A),E[2*T+2*A+1]+=R*nn,O(E,2*T+2*A+1),E[2*T+2*A+1]+=v*pe,O(E,2*T+2*A+1),E[2*T+2*A+2]+=R*pe,O(E,2*T+2*A+2)}for(T=0;T<g;T++)E[T]=E[2*T+1]<<16|E[2*T];for(T=g;T<2*g;T++)E[T]=0;return new a(E,0)};function O(w,g){for(;(w[g]&65535)!=w[g];)w[g+1]+=w[g]>>>16,w[g]&=65535,g++}function $(w,g){this.g=w,this.h=g}function S(w,g){if(D(g))throw Error("division by zero");if(D(w))return new $(m,m);if(L(w))return g=S(M(w),g),new $(M(g.g),M(g.h));if(L(g))return g=S(w,M(g)),new $(M(g.g),g.h);if(30<w.g.length){if(L(w)||L(g))throw Error("slowDivide_ only works with positive integers.");for(var E=_,T=g;0>=T.l(w);)E=z(E),T=z(T);var A=W(E,1),R=W(T,1);for(T=W(T,2),E=W(E,2);!D(T);){var v=R.add(T);0>=v.l(w)&&(A=A.add(E),R=v),T=W(T,1),E=W(E,1)}return g=X(w,A.j(g)),new $(A,g)}for(A=m;0<=w.l(g);){for(E=Math.max(1,Math.floor(w.m()/g.m())),T=Math.ceil(Math.log(E)/Math.LN2),T=48>=T?1:Math.pow(2,T-48),R=f(E),v=R.j(g);L(v)||0<v.l(w);)E-=T,R=f(E),v=R.j(g);D(R)&&(R=_),A=A.add(R),w=X(w,v)}return new $(A,w)}e.A=function(w){return S(this,w).h},e.and=function(w){for(var g=Math.max(this.g.length,w.g.length),E=[],T=0;T<g;T++)E[T]=this.i(T)&w.i(T);return new a(E,this.h&w.h)},e.or=function(w){for(var g=Math.max(this.g.length,w.g.length),E=[],T=0;T<g;T++)E[T]=this.i(T)|w.i(T);return new a(E,this.h|w.h)},e.xor=function(w){for(var g=Math.max(this.g.length,w.g.length),E=[],T=0;T<g;T++)E[T]=this.i(T)^w.i(T);return new a(E,this.h^w.h)};function z(w){for(var g=w.g.length+1,E=[],T=0;T<g;T++)E[T]=w.i(T)<<1|w.i(T-1)>>>31;return new a(E,w.h)}function W(w,g){var E=g>>5;g%=32;for(var T=w.g.length-E,A=[],R=0;R<T;R++)A[R]=0<g?w.i(R+E)>>>g|w.i(R+E+1)<<32-g:w.i(R+E);return new a(A,w.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,Mf=r,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.A,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=f,a.fromString=d,mn=a}).apply(typeof Tc<"u"?Tc:typeof self<"u"?self:typeof window<"u"?window:{});var ri=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Lf,Zr,Ff,fi,ba,Bf,Uf,$f;(function(){var e,t=typeof Object.defineProperties=="function"?Object.defineProperty:function(o,u,h){return o==Array.prototype||o==Object.prototype||(o[u]=h.value),o};function n(o){o=[typeof globalThis=="object"&&globalThis,o,typeof window=="object"&&window,typeof self=="object"&&self,typeof ri=="object"&&ri];for(var u=0;u<o.length;++u){var h=o[u];if(h&&h.Math==Math)return h}throw Error("Cannot find global object")}var r=n(this);function s(o,u){if(u)t:{var h=r;o=o.split(".");for(var p=0;p<o.length-1;p++){var C=o[p];if(!(C in h))break t;h=h[C]}o=o[o.length-1],p=h[o],u=u(p),u!=p&&u!=null&&t(h,o,{configurable:!0,writable:!0,value:u})}}function i(o,u){o instanceof String&&(o+="");var h=0,p=!1,C={next:function(){if(!p&&h<o.length){var P=h++;return{value:u(P,o[P]),done:!1}}return p=!0,{done:!0,value:void 0}}};return C[Symbol.iterator]=function(){return C},C}s("Array.prototype.values",function(o){return o||function(){return i(this,function(u,h){return h})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var a=a||{},l=this||self;function c(o){var u=typeof o;return u=u!="object"?u:o?Array.isArray(o)?"array":u:"null",u=="array"||u=="object"&&typeof o.length=="number"}function f(o){var u=typeof o;return u=="object"&&o!=null||u=="function"}function d(o,u,h){return o.call.apply(o.bind,arguments)}function m(o,u,h){if(!o)throw Error();if(2<arguments.length){var p=Array.prototype.slice.call(arguments,2);return function(){var C=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(C,p),o.apply(u,C)}}return function(){return o.apply(u,arguments)}}function _(o,u,h){return _=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?d:m,_.apply(null,arguments)}function b(o,u){var h=Array.prototype.slice.call(arguments,1);return function(){var p=h.slice();return p.push.apply(p,arguments),o.apply(this,p)}}function D(o,u){function h(){}h.prototype=u.prototype,o.aa=u.prototype,o.prototype=new h,o.prototype.constructor=o,o.Qb=function(p,C,P){for(var H=Array(arguments.length-2),Tt=2;Tt<arguments.length;Tt++)H[Tt-2]=arguments[Tt];return u.prototype[C].apply(p,H)}}function L(o){const u=o.length;if(0<u){const h=Array(u);for(let p=0;p<u;p++)h[p]=o[p];return h}return[]}function M(o,u){for(let h=1;h<arguments.length;h++){const p=arguments[h];if(c(p)){const C=o.length||0,P=p.length||0;o.length=C+P;for(let H=0;H<P;H++)o[C+H]=p[H]}else o.push(p)}}class X{constructor(u,h){this.i=u,this.j=h,this.h=0,this.g=null}get(){let u;return 0<this.h?(this.h--,u=this.g,this.g=u.next,u.next=null):u=this.i(),u}}function O(o){return/^[\s\xa0]*$/.test(o)}function $(){var o=l.navigator;return o&&(o=o.userAgent)?o:""}function S(o){return S[" "](o),o}S[" "]=function(){};var z=$().indexOf("Gecko")!=-1&&!($().toLowerCase().indexOf("webkit")!=-1&&$().indexOf("Edge")==-1)&&!($().indexOf("Trident")!=-1||$().indexOf("MSIE")!=-1)&&$().indexOf("Edge")==-1;function W(o,u,h){for(const p in o)u.call(h,o[p],p,o)}function w(o,u){for(const h in o)u.call(void 0,o[h],h,o)}function g(o){const u={};for(const h in o)u[h]=o[h];return u}const E="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function T(o,u){let h,p;for(let C=1;C<arguments.length;C++){p=arguments[C];for(h in p)o[h]=p[h];for(let P=0;P<E.length;P++)h=E[P],Object.prototype.hasOwnProperty.call(p,h)&&(o[h]=p[h])}}function A(o){var u=1;o=o.split(":");const h=[];for(;0<u&&o.length;)h.push(o.shift()),u--;return o.length&&h.push(o.join(":")),h}function R(o){l.setTimeout(()=>{throw o},0)}function v(){var o=Ae;let u=null;return o.g&&(u=o.g,o.g=o.g.next,o.g||(o.h=null),u.next=null),u}class pe{constructor(){this.h=this.g=null}add(u,h){const p=nn.get();p.set(u,h),this.h?this.h.next=p:this.g=p,this.h=p}}var nn=new X(()=>new Ut,o=>o.reset());class Ut{constructor(){this.next=this.g=this.h=null}set(u,h){this.h=u,this.g=h,this.next=null}reset(){this.next=this.g=this.h=null}}let Et,mt=!1,Ae=new pe,Vn=()=>{const o=l.Promise.resolve(void 0);Et=()=>{o.then(Be)}};var Be=()=>{for(var o;o=v();){try{o.h.call(o.g)}catch(h){R(h)}var u=nn;u.j(o),100>u.h&&(u.h++,o.next=u.g,u.g=o)}mt=!1};function Nt(){this.s=this.s,this.C=this.C}Nt.prototype.s=!1,Nt.prototype.ma=function(){this.s||(this.s=!0,this.N())},Nt.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Ot(o,u){this.type=o,this.g=this.target=u,this.defaultPrevented=!1}Ot.prototype.h=function(){this.defaultPrevented=!0};var Ro=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var o=!1,u=Object.defineProperty({},"passive",{get:function(){o=!0}});try{const h=()=>{};l.addEventListener("test",h,u),l.removeEventListener("test",h,u)}catch{}return o}();function Dn(o,u){if(Ot.call(this,o?o.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,o){var h=this.type=o.type,p=o.changedTouches&&o.changedTouches.length?o.changedTouches[0]:null;if(this.target=o.target||o.srcElement,this.g=u,u=o.relatedTarget){if(z){t:{try{S(u.nodeName);var C=!0;break t}catch{}C=!1}C||(u=null)}}else h=="mouseover"?u=o.fromElement:h=="mouseout"&&(u=o.toElement);this.relatedTarget=u,p?(this.clientX=p.clientX!==void 0?p.clientX:p.pageX,this.clientY=p.clientY!==void 0?p.clientY:p.pageY,this.screenX=p.screenX||0,this.screenY=p.screenY||0):(this.clientX=o.clientX!==void 0?o.clientX:o.pageX,this.clientY=o.clientY!==void 0?o.clientY:o.pageY,this.screenX=o.screenX||0,this.screenY=o.screenY||0),this.button=o.button,this.key=o.key||"",this.ctrlKey=o.ctrlKey,this.altKey=o.altKey,this.shiftKey=o.shiftKey,this.metaKey=o.metaKey,this.pointerId=o.pointerId||0,this.pointerType=typeof o.pointerType=="string"?o.pointerType:xn[o.pointerType]||"",this.state=o.state,this.i=o,o.defaultPrevented&&Dn.aa.h.call(this)}}D(Dn,Ot);var xn={2:"touch",3:"pen",4:"mouse"};Dn.prototype.h=function(){Dn.aa.h.call(this);var o=this.i;o.preventDefault?o.preventDefault():o.returnValue=!1};var Ue="closure_listenable_"+(1e6*Math.random()|0),Nr=0;function Ms(o,u,h,p,C){this.listener=o,this.proxy=null,this.src=u,this.type=h,this.capture=!!p,this.ha=C,this.key=++Nr,this.da=this.fa=!1}function Pe(o){o.da=!0,o.listener=null,o.proxy=null,o.src=null,o.ha=null}function Or(o){this.src=o,this.g={},this.h=0}Or.prototype.add=function(o,u,h,p,C){var P=o.toString();o=this.g[P],o||(o=this.g[P]=[],this.h++);var H=I(o,u,p,C);return-1<H?(u=o[H],h||(u.fa=!1)):(u=new Ms(u,this.src,P,!!p,C),u.fa=h,o.push(u)),u};function y(o,u){var h=u.type;if(h in o.g){var p=o.g[h],C=Array.prototype.indexOf.call(p,u,void 0),P;(P=0<=C)&&Array.prototype.splice.call(p,C,1),P&&(Pe(u),o.g[h].length==0&&(delete o.g[h],o.h--))}}function I(o,u,h,p){for(var C=0;C<o.length;++C){var P=o[C];if(!P.da&&P.listener==u&&P.capture==!!h&&P.ha==p)return C}return-1}var V="closure_lm_"+(1e6*Math.random()|0),B={};function N(o,u,h,p,C){if(Array.isArray(u)){for(var P=0;P<u.length;P++)N(o,u[P],h,p,C);return null}return h=it(h),o&&o[Ue]?o.K(u,h,f(p)?!!p.capture:!1,C):F(o,u,h,!1,p,C)}function F(o,u,h,p,C,P){if(!u)throw Error("Invalid event type");var H=f(C)?!!C.capture:!!C,Tt=K(o);if(Tt||(o[V]=Tt=new Or(o)),h=Tt.add(u,h,p,H,P),h.proxy)return h;if(p=G(),h.proxy=p,p.src=o,p.listener=h,o.addEventListener)Ro||(C=H),C===void 0&&(C=!1),o.addEventListener(u.toString(),p,C);else if(o.attachEvent)o.attachEvent(U(u.toString()),p);else if(o.addListener&&o.removeListener)o.addListener(p);else throw Error("addEventListener and attachEvent are unavailable.");return h}function G(){function o(h){return u.call(o.src,o.listener,h)}const u=tt;return o}function q(o,u,h,p,C){if(Array.isArray(u))for(var P=0;P<u.length;P++)q(o,u[P],h,p,C);else p=f(p)?!!p.capture:!!p,h=it(h),o&&o[Ue]?(o=o.i,u=String(u).toString(),u in o.g&&(P=o.g[u],h=I(P,h,p,C),-1<h&&(Pe(P[h]),Array.prototype.splice.call(P,h,1),P.length==0&&(delete o.g[u],o.h--)))):o&&(o=K(o))&&(u=o.g[u.toString()],o=-1,u&&(o=I(u,h,p,C)),(h=-1<o?u[o]:null)&&j(h))}function j(o){if(typeof o!="number"&&o&&!o.da){var u=o.src;if(u&&u[Ue])y(u.i,o);else{var h=o.type,p=o.proxy;u.removeEventListener?u.removeEventListener(h,p,o.capture):u.detachEvent?u.detachEvent(U(h),p):u.addListener&&u.removeListener&&u.removeListener(p),(h=K(u))?(y(h,o),h.h==0&&(h.src=null,u[V]=null)):Pe(o)}}}function U(o){return o in B?B[o]:B[o]="on"+o}function tt(o,u){if(o.da)o=!0;else{u=new Dn(u,this);var h=o.listener,p=o.ha||o.src;o.fa&&j(o),o=h.call(p,u)}return o}function K(o){return o=o[V],o instanceof Or?o:null}var J="__closure_events_fn_"+(1e9*Math.random()>>>0);function it(o){return typeof o=="function"?o:(o[J]||(o[J]=function(u){return o.handleEvent(u)}),o[J])}function nt(){Nt.call(this),this.i=new Or(this),this.M=this,this.F=null}D(nt,Nt),nt.prototype[Ue]=!0,nt.prototype.removeEventListener=function(o,u,h,p){q(this,o,u,h,p)};function ut(o,u){var h,p=o.F;if(p)for(h=[];p;p=p.F)h.push(p);if(o=o.M,p=u.type||u,typeof u=="string")u=new Ot(u,o);else if(u instanceof Ot)u.target=u.target||o;else{var C=u;u=new Ot(p,o),T(u,C)}if(C=!0,h)for(var P=h.length-1;0<=P;P--){var H=u.g=h[P];C=ft(H,p,!0,u)&&C}if(H=u.g=o,C=ft(H,p,!0,u)&&C,C=ft(H,p,!1,u)&&C,h)for(P=0;P<h.length;P++)H=u.g=h[P],C=ft(H,p,!1,u)&&C}nt.prototype.N=function(){if(nt.aa.N.call(this),this.i){var o=this.i,u;for(u in o.g){for(var h=o.g[u],p=0;p<h.length;p++)Pe(h[p]);delete o.g[u],o.h--}}this.F=null},nt.prototype.K=function(o,u,h,p){return this.i.add(String(o),u,!1,h,p)},nt.prototype.L=function(o,u,h,p){return this.i.add(String(o),u,!0,h,p)};function ft(o,u,h,p){if(u=o.i.g[String(u)],!u)return!0;u=u.concat();for(var C=!0,P=0;P<u.length;++P){var H=u[P];if(H&&!H.da&&H.capture==h){var Tt=H.listener,qt=H.ha||H.src;H.fa&&y(o.i,H),C=Tt.call(qt,p)!==!1&&C}}return C&&!p.defaultPrevented}function Qt(o,u,h){if(typeof o=="function")h&&(o=_(o,h));else if(o&&typeof o.handleEvent=="function")o=_(o.handleEvent,o);else throw Error("Invalid listener argument");return 2147483647<Number(u)?-1:l.setTimeout(o,u||0)}function $t(o){o.g=Qt(()=>{o.g=null,o.i&&(o.i=!1,$t(o))},o.l);const u=o.h;o.h=null,o.m.apply(null,u)}class Ee extends Nt{constructor(u,h){super(),this.m=u,this.l=h,this.h=null,this.i=!1,this.g=null}j(u){this.h=arguments,this.g?this.i=!0:$t(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Yt(o){Nt.call(this),this.h=o,this.g={}}D(Yt,Nt);var rn=[];function kr(o){W(o.g,function(u,h){this.g.hasOwnProperty(h)&&j(u)},o),o.g={}}Yt.prototype.N=function(){Yt.aa.N.call(this),kr(this)},Yt.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var jt=l.JSON.stringify,Te=l.JSON.parse,Ls=class{stringify(o){return l.JSON.stringify(o,void 0)}parse(o){return l.JSON.parse(o,void 0)}};function So(){}So.prototype.h=null;function ql(o){return o.h||(o.h=o.i())}function Hl(){}var Mr={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Po(){Ot.call(this,"d")}D(Po,Ot);function Vo(){Ot.call(this,"c")}D(Vo,Ot);var Nn={},zl=null;function Fs(){return zl=zl||new nt}Nn.La="serverreachability";function Kl(o){Ot.call(this,Nn.La,o)}D(Kl,Ot);function Lr(o){const u=Fs();ut(u,new Kl(u))}Nn.STAT_EVENT="statevent";function Gl(o,u){Ot.call(this,Nn.STAT_EVENT,o),this.stat=u}D(Gl,Ot);function le(o){const u=Fs();ut(u,new Gl(u,o))}Nn.Ma="timingevent";function Wl(o,u){Ot.call(this,Nn.Ma,o),this.size=u}D(Wl,Ot);function Fr(o,u){if(typeof o!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){o()},u)}function Br(){this.g=!0}Br.prototype.xa=function(){this.g=!1};function dp(o,u,h,p,C,P){o.info(function(){if(o.g)if(P)for(var H="",Tt=P.split("&"),qt=0;qt<Tt.length;qt++){var gt=Tt[qt].split("=");if(1<gt.length){var Xt=gt[0];gt=gt[1];var Jt=Xt.split("_");H=2<=Jt.length&&Jt[1]=="type"?H+(Xt+"="+gt+"&"):H+(Xt+"=redacted&")}}else H=null;else H=P;return"XMLHTTP REQ ("+p+") [attempt "+C+"]: "+u+`
`+h+`
`+H})}function pp(o,u,h,p,C,P,H){o.info(function(){return"XMLHTTP RESP ("+p+") [ attempt "+C+"]: "+u+`
`+h+`
`+P+" "+H})}function Jn(o,u,h,p){o.info(function(){return"XMLHTTP TEXT ("+u+"): "+gp(o,h)+(p?" "+p:"")})}function mp(o,u){o.info(function(){return"TIMEOUT: "+u})}Br.prototype.info=function(){};function gp(o,u){if(!o.g)return u;if(!u)return null;try{var h=JSON.parse(u);if(h){for(o=0;o<h.length;o++)if(Array.isArray(h[o])){var p=h[o];if(!(2>p.length)){var C=p[1];if(Array.isArray(C)&&!(1>C.length)){var P=C[0];if(P!="noop"&&P!="stop"&&P!="close")for(var H=1;H<C.length;H++)C[H]=""}}}}return jt(h)}catch{return u}}var Bs={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Ql={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Do;function Us(){}D(Us,So),Us.prototype.g=function(){return new XMLHttpRequest},Us.prototype.i=function(){return{}},Do=new Us;function sn(o,u,h,p){this.j=o,this.i=u,this.l=h,this.R=p||1,this.U=new Yt(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Yl}function Yl(){this.i=null,this.g="",this.h=!1}var Xl={},xo={};function No(o,u,h){o.L=1,o.v=Hs($e(u)),o.m=h,o.P=!0,Jl(o,null)}function Jl(o,u){o.F=Date.now(),$s(o),o.A=$e(o.v);var h=o.A,p=o.R;Array.isArray(p)||(p=[String(p)]),fu(h.i,"t",p),o.C=0,h=o.j.J,o.h=new Yl,o.g=Vu(o.j,h?u:null,!o.m),0<o.O&&(o.M=new Ee(_(o.Y,o,o.g),o.O)),u=o.U,h=o.g,p=o.ca;var C="readystatechange";Array.isArray(C)||(C&&(rn[0]=C.toString()),C=rn);for(var P=0;P<C.length;P++){var H=N(h,C[P],p||u.handleEvent,!1,u.h||u);if(!H)break;u.g[H.key]=H}u=o.H?g(o.H):{},o.m?(o.u||(o.u="POST"),u["Content-Type"]="application/x-www-form-urlencoded",o.g.ea(o.A,o.u,o.m,u)):(o.u="GET",o.g.ea(o.A,o.u,null,u)),Lr(),dp(o.i,o.u,o.A,o.l,o.R,o.m)}sn.prototype.ca=function(o){o=o.target;const u=this.M;u&&je(o)==3?u.j():this.Y(o)},sn.prototype.Y=function(o){try{if(o==this.g)t:{const Jt=je(this.g);var u=this.g.Ba();const er=this.g.Z();if(!(3>Jt)&&(Jt!=3||this.g&&(this.h.h||this.g.oa()||vu(this.g)))){this.J||Jt!=4||u==7||(u==8||0>=er?Lr(3):Lr(2)),Oo(this);var h=this.g.Z();this.X=h;e:if(Zl(this)){var p=vu(this.g);o="";var C=p.length,P=je(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){On(this),Ur(this);var H="";break e}this.h.i=new l.TextDecoder}for(u=0;u<C;u++)this.h.h=!0,o+=this.h.i.decode(p[u],{stream:!(P&&u==C-1)});p.length=0,this.h.g+=o,this.C=0,H=this.h.g}else H=this.g.oa();if(this.o=h==200,pp(this.i,this.u,this.A,this.l,this.R,Jt,h),this.o){if(this.T&&!this.K){e:{if(this.g){var Tt,qt=this.g;if((Tt=qt.g?qt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!O(Tt)){var gt=Tt;break e}}gt=null}if(h=gt)Jn(this.i,this.l,h,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,ko(this,h);else{this.o=!1,this.s=3,le(12),On(this),Ur(this);break t}}if(this.P){h=!0;let be;for(;!this.J&&this.C<H.length;)if(be=_p(this,H),be==xo){Jt==4&&(this.s=4,le(14),h=!1),Jn(this.i,this.l,null,"[Incomplete Response]");break}else if(be==Xl){this.s=4,le(15),Jn(this.i,this.l,H,"[Invalid Chunk]"),h=!1;break}else Jn(this.i,this.l,be,null),ko(this,be);if(Zl(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Jt!=4||H.length!=0||this.h.h||(this.s=1,le(16),h=!1),this.o=this.o&&h,!h)Jn(this.i,this.l,H,"[Invalid Chunked Response]"),On(this),Ur(this);else if(0<H.length&&!this.W){this.W=!0;var Xt=this.j;Xt.g==this&&Xt.ba&&!Xt.M&&(Xt.j.info("Great, no buffering proxy detected. Bytes received: "+H.length),$o(Xt),Xt.M=!0,le(11))}}else Jn(this.i,this.l,H,null),ko(this,H);Jt==4&&On(this),this.o&&!this.J&&(Jt==4?Cu(this.j,this):(this.o=!1,$s(this)))}else Op(this.g),h==400&&0<H.indexOf("Unknown SID")?(this.s=3,le(12)):(this.s=0,le(13)),On(this),Ur(this)}}}catch{}finally{}};function Zl(o){return o.g?o.u=="GET"&&o.L!=2&&o.j.Ca:!1}function _p(o,u){var h=o.C,p=u.indexOf(`
`,h);return p==-1?xo:(h=Number(u.substring(h,p)),isNaN(h)?Xl:(p+=1,p+h>u.length?xo:(u=u.slice(p,p+h),o.C=p+h,u)))}sn.prototype.cancel=function(){this.J=!0,On(this)};function $s(o){o.S=Date.now()+o.I,tu(o,o.I)}function tu(o,u){if(o.B!=null)throw Error("WatchDog timer not null");o.B=Fr(_(o.ba,o),u)}function Oo(o){o.B&&(l.clearTimeout(o.B),o.B=null)}sn.prototype.ba=function(){this.B=null;const o=Date.now();0<=o-this.S?(mp(this.i,this.A),this.L!=2&&(Lr(),le(17)),On(this),this.s=2,Ur(this)):tu(this,this.S-o)};function Ur(o){o.j.G==0||o.J||Cu(o.j,o)}function On(o){Oo(o);var u=o.M;u&&typeof u.ma=="function"&&u.ma(),o.M=null,kr(o.U),o.g&&(u=o.g,o.g=null,u.abort(),u.ma())}function ko(o,u){try{var h=o.j;if(h.G!=0&&(h.g==o||Mo(h.h,o))){if(!o.K&&Mo(h.h,o)&&h.G==3){try{var p=h.Da.g.parse(u)}catch{p=null}if(Array.isArray(p)&&p.length==3){var C=p;if(C[0]==0){t:if(!h.u){if(h.g)if(h.g.F+3e3<o.F)Ys(h),Ws(h);else break t;Uo(h),le(18)}}else h.za=C[1],0<h.za-h.T&&37500>C[2]&&h.F&&h.v==0&&!h.C&&(h.C=Fr(_(h.Za,h),6e3));if(1>=ru(h.h)&&h.ca){try{h.ca()}catch{}h.ca=void 0}}else Mn(h,11)}else if((o.K||h.g==o)&&Ys(h),!O(u))for(C=h.Da.g.parse(u),u=0;u<C.length;u++){let gt=C[u];if(h.T=gt[0],gt=gt[1],h.G==2)if(gt[0]=="c"){h.K=gt[1],h.ia=gt[2];const Xt=gt[3];Xt!=null&&(h.la=Xt,h.j.info("VER="+h.la));const Jt=gt[4];Jt!=null&&(h.Aa=Jt,h.j.info("SVER="+h.Aa));const er=gt[5];er!=null&&typeof er=="number"&&0<er&&(p=1.5*er,h.L=p,h.j.info("backChannelRequestTimeoutMs_="+p)),p=h;const be=o.g;if(be){const Js=be.g?be.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Js){var P=p.h;P.g||Js.indexOf("spdy")==-1&&Js.indexOf("quic")==-1&&Js.indexOf("h2")==-1||(P.j=P.l,P.g=new Set,P.h&&(Lo(P,P.h),P.h=null))}if(p.D){const jo=be.g?be.g.getResponseHeader("X-HTTP-Session-Id"):null;jo&&(p.ya=jo,At(p.I,p.D,jo))}}h.G=3,h.l&&h.l.ua(),h.ba&&(h.R=Date.now()-o.F,h.j.info("Handshake RTT: "+h.R+"ms")),p=h;var H=o;if(p.qa=Pu(p,p.J?p.ia:null,p.W),H.K){su(p.h,H);var Tt=H,qt=p.L;qt&&(Tt.I=qt),Tt.B&&(Oo(Tt),$s(Tt)),p.g=H}else Au(p);0<h.i.length&&Qs(h)}else gt[0]!="stop"&&gt[0]!="close"||Mn(h,7);else h.G==3&&(gt[0]=="stop"||gt[0]=="close"?gt[0]=="stop"?Mn(h,7):Bo(h):gt[0]!="noop"&&h.l&&h.l.ta(gt),h.v=0)}}Lr(4)}catch{}}var yp=class{constructor(o,u){this.g=o,this.map=u}};function eu(o){this.l=o||10,l.PerformanceNavigationTiming?(o=l.performance.getEntriesByType("navigation"),o=0<o.length&&(o[0].nextHopProtocol=="hq"||o[0].nextHopProtocol=="h2")):o=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=o?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function nu(o){return o.h?!0:o.g?o.g.size>=o.j:!1}function ru(o){return o.h?1:o.g?o.g.size:0}function Mo(o,u){return o.h?o.h==u:o.g?o.g.has(u):!1}function Lo(o,u){o.g?o.g.add(u):o.h=u}function su(o,u){o.h&&o.h==u?o.h=null:o.g&&o.g.has(u)&&o.g.delete(u)}eu.prototype.cancel=function(){if(this.i=iu(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const o of this.g.values())o.cancel();this.g.clear()}};function iu(o){if(o.h!=null)return o.i.concat(o.h.D);if(o.g!=null&&o.g.size!==0){let u=o.i;for(const h of o.g.values())u=u.concat(h.D);return u}return L(o.i)}function vp(o){if(o.V&&typeof o.V=="function")return o.V();if(typeof Map<"u"&&o instanceof Map||typeof Set<"u"&&o instanceof Set)return Array.from(o.values());if(typeof o=="string")return o.split("");if(c(o)){for(var u=[],h=o.length,p=0;p<h;p++)u.push(o[p]);return u}u=[],h=0;for(p in o)u[h++]=o[p];return u}function Ep(o){if(o.na&&typeof o.na=="function")return o.na();if(!o.V||typeof o.V!="function"){if(typeof Map<"u"&&o instanceof Map)return Array.from(o.keys());if(!(typeof Set<"u"&&o instanceof Set)){if(c(o)||typeof o=="string"){var u=[];o=o.length;for(var h=0;h<o;h++)u.push(h);return u}u=[],h=0;for(const p in o)u[h++]=p;return u}}}function ou(o,u){if(o.forEach&&typeof o.forEach=="function")o.forEach(u,void 0);else if(c(o)||typeof o=="string")Array.prototype.forEach.call(o,u,void 0);else for(var h=Ep(o),p=vp(o),C=p.length,P=0;P<C;P++)u.call(void 0,p[P],h&&h[P],o)}var au=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Tp(o,u){if(o){o=o.split("&");for(var h=0;h<o.length;h++){var p=o[h].indexOf("="),C=null;if(0<=p){var P=o[h].substring(0,p);C=o[h].substring(p+1)}else P=o[h];u(P,C?decodeURIComponent(C.replace(/\+/g," ")):"")}}}function kn(o){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,o instanceof kn){this.h=o.h,js(this,o.j),this.o=o.o,this.g=o.g,qs(this,o.s),this.l=o.l;var u=o.i,h=new qr;h.i=u.i,u.g&&(h.g=new Map(u.g),h.h=u.h),lu(this,h),this.m=o.m}else o&&(u=String(o).match(au))?(this.h=!1,js(this,u[1]||"",!0),this.o=$r(u[2]||""),this.g=$r(u[3]||"",!0),qs(this,u[4]),this.l=$r(u[5]||"",!0),lu(this,u[6]||"",!0),this.m=$r(u[7]||"")):(this.h=!1,this.i=new qr(null,this.h))}kn.prototype.toString=function(){var o=[],u=this.j;u&&o.push(jr(u,uu,!0),":");var h=this.g;return(h||u=="file")&&(o.push("//"),(u=this.o)&&o.push(jr(u,uu,!0),"@"),o.push(encodeURIComponent(String(h)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h=this.s,h!=null&&o.push(":",String(h))),(h=this.l)&&(this.g&&h.charAt(0)!="/"&&o.push("/"),o.push(jr(h,h.charAt(0)=="/"?Ap:Ip,!0))),(h=this.i.toString())&&o.push("?",h),(h=this.m)&&o.push("#",jr(h,Cp)),o.join("")};function $e(o){return new kn(o)}function js(o,u,h){o.j=h?$r(u,!0):u,o.j&&(o.j=o.j.replace(/:$/,""))}function qs(o,u){if(u){if(u=Number(u),isNaN(u)||0>u)throw Error("Bad port number "+u);o.s=u}else o.s=null}function lu(o,u,h){u instanceof qr?(o.i=u,Rp(o.i,o.h)):(h||(u=jr(u,bp)),o.i=new qr(u,o.h))}function At(o,u,h){o.i.set(u,h)}function Hs(o){return At(o,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),o}function $r(o,u){return o?u?decodeURI(o.replace(/%25/g,"%2525")):decodeURIComponent(o):""}function jr(o,u,h){return typeof o=="string"?(o=encodeURI(o).replace(u,wp),h&&(o=o.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),o):null}function wp(o){return o=o.charCodeAt(0),"%"+(o>>4&15).toString(16)+(o&15).toString(16)}var uu=/[#\/\?@]/g,Ip=/[#\?:]/g,Ap=/[#\?]/g,bp=/[#\?@]/g,Cp=/#/g;function qr(o,u){this.h=this.g=null,this.i=o||null,this.j=!!u}function on(o){o.g||(o.g=new Map,o.h=0,o.i&&Tp(o.i,function(u,h){o.add(decodeURIComponent(u.replace(/\+/g," ")),h)}))}e=qr.prototype,e.add=function(o,u){on(this),this.i=null,o=Zn(this,o);var h=this.g.get(o);return h||this.g.set(o,h=[]),h.push(u),this.h+=1,this};function cu(o,u){on(o),u=Zn(o,u),o.g.has(u)&&(o.i=null,o.h-=o.g.get(u).length,o.g.delete(u))}function hu(o,u){return on(o),u=Zn(o,u),o.g.has(u)}e.forEach=function(o,u){on(this),this.g.forEach(function(h,p){h.forEach(function(C){o.call(u,C,p,this)},this)},this)},e.na=function(){on(this);const o=Array.from(this.g.values()),u=Array.from(this.g.keys()),h=[];for(let p=0;p<u.length;p++){const C=o[p];for(let P=0;P<C.length;P++)h.push(u[p])}return h},e.V=function(o){on(this);let u=[];if(typeof o=="string")hu(this,o)&&(u=u.concat(this.g.get(Zn(this,o))));else{o=Array.from(this.g.values());for(let h=0;h<o.length;h++)u=u.concat(o[h])}return u},e.set=function(o,u){return on(this),this.i=null,o=Zn(this,o),hu(this,o)&&(this.h-=this.g.get(o).length),this.g.set(o,[u]),this.h+=1,this},e.get=function(o,u){return o?(o=this.V(o),0<o.length?String(o[0]):u):u};function fu(o,u,h){cu(o,u),0<h.length&&(o.i=null,o.g.set(Zn(o,u),L(h)),o.h+=h.length)}e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const o=[],u=Array.from(this.g.keys());for(var h=0;h<u.length;h++){var p=u[h];const P=encodeURIComponent(String(p)),H=this.V(p);for(p=0;p<H.length;p++){var C=P;H[p]!==""&&(C+="="+encodeURIComponent(String(H[p]))),o.push(C)}}return this.i=o.join("&")};function Zn(o,u){return u=String(u),o.j&&(u=u.toLowerCase()),u}function Rp(o,u){u&&!o.j&&(on(o),o.i=null,o.g.forEach(function(h,p){var C=p.toLowerCase();p!=C&&(cu(this,p),fu(this,C,h))},o)),o.j=u}function Sp(o,u){const h=new Br;if(l.Image){const p=new Image;p.onload=b(an,h,"TestLoadImage: loaded",!0,u,p),p.onerror=b(an,h,"TestLoadImage: error",!1,u,p),p.onabort=b(an,h,"TestLoadImage: abort",!1,u,p),p.ontimeout=b(an,h,"TestLoadImage: timeout",!1,u,p),l.setTimeout(function(){p.ontimeout&&p.ontimeout()},1e4),p.src=o}else u(!1)}function Pp(o,u){const h=new Br,p=new AbortController,C=setTimeout(()=>{p.abort(),an(h,"TestPingServer: timeout",!1,u)},1e4);fetch(o,{signal:p.signal}).then(P=>{clearTimeout(C),P.ok?an(h,"TestPingServer: ok",!0,u):an(h,"TestPingServer: server error",!1,u)}).catch(()=>{clearTimeout(C),an(h,"TestPingServer: error",!1,u)})}function an(o,u,h,p,C){try{C&&(C.onload=null,C.onerror=null,C.onabort=null,C.ontimeout=null),p(h)}catch{}}function Vp(){this.g=new Ls}function Dp(o,u,h){const p=h||"";try{ou(o,function(C,P){let H=C;f(C)&&(H=jt(C)),u.push(p+P+"="+encodeURIComponent(H))})}catch(C){throw u.push(p+"type="+encodeURIComponent("_badmap")),C}}function zs(o){this.l=o.Ub||null,this.j=o.eb||!1}D(zs,So),zs.prototype.g=function(){return new Ks(this.l,this.j)},zs.prototype.i=function(o){return function(){return o}}({});function Ks(o,u){nt.call(this),this.D=o,this.o=u,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}D(Ks,nt),e=Ks.prototype,e.open=function(o,u){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=o,this.A=u,this.readyState=1,zr(this)},e.send=function(o){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const u={headers:this.u,method:this.B,credentials:this.m,cache:void 0};o&&(u.body=o),(this.D||l).fetch(new Request(this.A,u)).then(this.Sa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Hr(this)),this.readyState=0},e.Sa=function(o){if(this.g&&(this.l=o,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=o.headers,this.readyState=2,zr(this)),this.g&&(this.readyState=3,zr(this),this.g)))if(this.responseType==="arraybuffer")o.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in o){if(this.j=o.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;du(this)}else o.text().then(this.Ra.bind(this),this.ga.bind(this))};function du(o){o.j.read().then(o.Pa.bind(o)).catch(o.ga.bind(o))}e.Pa=function(o){if(this.g){if(this.o&&o.value)this.response.push(o.value);else if(!this.o){var u=o.value?o.value:new Uint8Array(0);(u=this.v.decode(u,{stream:!o.done}))&&(this.response=this.responseText+=u)}o.done?Hr(this):zr(this),this.readyState==3&&du(this)}},e.Ra=function(o){this.g&&(this.response=this.responseText=o,Hr(this))},e.Qa=function(o){this.g&&(this.response=o,Hr(this))},e.ga=function(){this.g&&Hr(this)};function Hr(o){o.readyState=4,o.l=null,o.j=null,o.v=null,zr(o)}e.setRequestHeader=function(o,u){this.u.append(o,u)},e.getResponseHeader=function(o){return this.h&&this.h.get(o.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const o=[],u=this.h.entries();for(var h=u.next();!h.done;)h=h.value,o.push(h[0]+": "+h[1]),h=u.next();return o.join(`\r
`)};function zr(o){o.onreadystatechange&&o.onreadystatechange.call(o)}Object.defineProperty(Ks.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(o){this.m=o?"include":"same-origin"}});function pu(o){let u="";return W(o,function(h,p){u+=p,u+=":",u+=h,u+=`\r
`}),u}function Fo(o,u,h){t:{for(p in h){var p=!1;break t}p=!0}p||(h=pu(h),typeof o=="string"?h!=null&&encodeURIComponent(String(h)):At(o,u,h))}function Pt(o){nt.call(this),this.headers=new Map,this.o=o||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}D(Pt,nt);var xp=/^https?$/i,Np=["POST","PUT"];e=Pt.prototype,e.Ha=function(o){this.J=o},e.ea=function(o,u,h,p){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+o);u=u?u.toUpperCase():"GET",this.D=o,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Do.g(),this.v=this.o?ql(this.o):ql(Do),this.g.onreadystatechange=_(this.Ea,this);try{this.B=!0,this.g.open(u,String(o),!0),this.B=!1}catch(P){mu(this,P);return}if(o=h||"",h=new Map(this.headers),p)if(Object.getPrototypeOf(p)===Object.prototype)for(var C in p)h.set(C,p[C]);else if(typeof p.keys=="function"&&typeof p.get=="function")for(const P of p.keys())h.set(P,p.get(P));else throw Error("Unknown input type for opt_headers: "+String(p));p=Array.from(h.keys()).find(P=>P.toLowerCase()=="content-type"),C=l.FormData&&o instanceof l.FormData,!(0<=Array.prototype.indexOf.call(Np,u,void 0))||p||C||h.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[P,H]of h)this.g.setRequestHeader(P,H);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{yu(this),this.u=!0,this.g.send(o),this.u=!1}catch(P){mu(this,P)}};function mu(o,u){o.h=!1,o.g&&(o.j=!0,o.g.abort(),o.j=!1),o.l=u,o.m=5,gu(o),Gs(o)}function gu(o){o.A||(o.A=!0,ut(o,"complete"),ut(o,"error"))}e.abort=function(o){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=o||7,ut(this,"complete"),ut(this,"abort"),Gs(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Gs(this,!0)),Pt.aa.N.call(this)},e.Ea=function(){this.s||(this.B||this.u||this.j?_u(this):this.bb())},e.bb=function(){_u(this)};function _u(o){if(o.h&&typeof a<"u"&&(!o.v[1]||je(o)!=4||o.Z()!=2)){if(o.u&&je(o)==4)Qt(o.Ea,0,o);else if(ut(o,"readystatechange"),je(o)==4){o.h=!1;try{const H=o.Z();t:switch(H){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var u=!0;break t;default:u=!1}var h;if(!(h=u)){var p;if(p=H===0){var C=String(o.D).match(au)[1]||null;!C&&l.self&&l.self.location&&(C=l.self.location.protocol.slice(0,-1)),p=!xp.test(C?C.toLowerCase():"")}h=p}if(h)ut(o,"complete"),ut(o,"success");else{o.m=6;try{var P=2<je(o)?o.g.statusText:""}catch{P=""}o.l=P+" ["+o.Z()+"]",gu(o)}}finally{Gs(o)}}}}function Gs(o,u){if(o.g){yu(o);const h=o.g,p=o.v[0]?()=>{}:null;o.g=null,o.v=null,u||ut(o,"ready");try{h.onreadystatechange=p}catch{}}}function yu(o){o.I&&(l.clearTimeout(o.I),o.I=null)}e.isActive=function(){return!!this.g};function je(o){return o.g?o.g.readyState:0}e.Z=function(){try{return 2<je(this)?this.g.status:-1}catch{return-1}},e.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},e.Oa=function(o){if(this.g){var u=this.g.responseText;return o&&u.indexOf(o)==0&&(u=u.substring(o.length)),Te(u)}};function vu(o){try{if(!o.g)return null;if("response"in o.g)return o.g.response;switch(o.H){case"":case"text":return o.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in o.g)return o.g.mozResponseArrayBuffer}return null}catch{return null}}function Op(o){const u={};o=(o.g&&2<=je(o)&&o.g.getAllResponseHeaders()||"").split(`\r
`);for(let p=0;p<o.length;p++){if(O(o[p]))continue;var h=A(o[p]);const C=h[0];if(h=h[1],typeof h!="string")continue;h=h.trim();const P=u[C]||[];u[C]=P,P.push(h)}w(u,function(p){return p.join(", ")})}e.Ba=function(){return this.m},e.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Kr(o,u,h){return h&&h.internalChannelParams&&h.internalChannelParams[o]||u}function Eu(o){this.Aa=0,this.i=[],this.j=new Br,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Kr("failFast",!1,o),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Kr("baseRetryDelayMs",5e3,o),this.cb=Kr("retryDelaySeedMs",1e4,o),this.Wa=Kr("forwardChannelMaxRetries",2,o),this.wa=Kr("forwardChannelRequestTimeoutMs",2e4,o),this.pa=o&&o.xmlHttpFactory||void 0,this.Xa=o&&o.Tb||void 0,this.Ca=o&&o.useFetchStreams||!1,this.L=void 0,this.J=o&&o.supportsCrossDomainXhr||!1,this.K="",this.h=new eu(o&&o.concurrentRequestLimit),this.Da=new Vp,this.P=o&&o.fastHandshake||!1,this.O=o&&o.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=o&&o.Rb||!1,o&&o.xa&&this.j.xa(),o&&o.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&o&&o.detectBufferingProxy||!1,this.ja=void 0,o&&o.longPollingTimeout&&0<o.longPollingTimeout&&(this.ja=o.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}e=Eu.prototype,e.la=8,e.G=1,e.connect=function(o,u,h,p){le(0),this.W=o,this.H=u||{},h&&p!==void 0&&(this.H.OSID=h,this.H.OAID=p),this.F=this.X,this.I=Pu(this,null,this.W),Qs(this)};function Bo(o){if(Tu(o),o.G==3){var u=o.U++,h=$e(o.I);if(At(h,"SID",o.K),At(h,"RID",u),At(h,"TYPE","terminate"),Gr(o,h),u=new sn(o,o.j,u),u.L=2,u.v=Hs($e(h)),h=!1,l.navigator&&l.navigator.sendBeacon)try{h=l.navigator.sendBeacon(u.v.toString(),"")}catch{}!h&&l.Image&&(new Image().src=u.v,h=!0),h||(u.g=Vu(u.j,null),u.g.ea(u.v)),u.F=Date.now(),$s(u)}Su(o)}function Ws(o){o.g&&($o(o),o.g.cancel(),o.g=null)}function Tu(o){Ws(o),o.u&&(l.clearTimeout(o.u),o.u=null),Ys(o),o.h.cancel(),o.s&&(typeof o.s=="number"&&l.clearTimeout(o.s),o.s=null)}function Qs(o){if(!nu(o.h)&&!o.s){o.s=!0;var u=o.Ga;Et||Vn(),mt||(Et(),mt=!0),Ae.add(u,o),o.B=0}}function kp(o,u){return ru(o.h)>=o.h.j-(o.s?1:0)?!1:o.s?(o.i=u.D.concat(o.i),!0):o.G==1||o.G==2||o.B>=(o.Va?0:o.Wa)?!1:(o.s=Fr(_(o.Ga,o,u),Ru(o,o.B)),o.B++,!0)}e.Ga=function(o){if(this.s)if(this.s=null,this.G==1){if(!o){this.U=Math.floor(1e5*Math.random()),o=this.U++;const C=new sn(this,this.j,o);let P=this.o;if(this.S&&(P?(P=g(P),T(P,this.S)):P=this.S),this.m!==null||this.O||(C.H=P,P=null),this.P)t:{for(var u=0,h=0;h<this.i.length;h++){e:{var p=this.i[h];if("__data__"in p.map&&(p=p.map.__data__,typeof p=="string")){p=p.length;break e}p=void 0}if(p===void 0)break;if(u+=p,4096<u){u=h;break t}if(u===4096||h===this.i.length-1){u=h+1;break t}}u=1e3}else u=1e3;u=Iu(this,C,u),h=$e(this.I),At(h,"RID",o),At(h,"CVER",22),this.D&&At(h,"X-HTTP-Session-Id",this.D),Gr(this,h),P&&(this.O?u="headers="+encodeURIComponent(String(pu(P)))+"&"+u:this.m&&Fo(h,this.m,P)),Lo(this.h,C),this.Ua&&At(h,"TYPE","init"),this.P?(At(h,"$req",u),At(h,"SID","null"),C.T=!0,No(C,h,null)):No(C,h,u),this.G=2}}else this.G==3&&(o?wu(this,o):this.i.length==0||nu(this.h)||wu(this))};function wu(o,u){var h;u?h=u.l:h=o.U++;const p=$e(o.I);At(p,"SID",o.K),At(p,"RID",h),At(p,"AID",o.T),Gr(o,p),o.m&&o.o&&Fo(p,o.m,o.o),h=new sn(o,o.j,h,o.B+1),o.m===null&&(h.H=o.o),u&&(o.i=u.D.concat(o.i)),u=Iu(o,h,1e3),h.I=Math.round(.5*o.wa)+Math.round(.5*o.wa*Math.random()),Lo(o.h,h),No(h,p,u)}function Gr(o,u){o.H&&W(o.H,function(h,p){At(u,p,h)}),o.l&&ou({},function(h,p){At(u,p,h)})}function Iu(o,u,h){h=Math.min(o.i.length,h);var p=o.l?_(o.l.Na,o.l,o):null;t:{var C=o.i;let P=-1;for(;;){const H=["count="+h];P==-1?0<h?(P=C[0].g,H.push("ofs="+P)):P=0:H.push("ofs="+P);let Tt=!0;for(let qt=0;qt<h;qt++){let gt=C[qt].g;const Xt=C[qt].map;if(gt-=P,0>gt)P=Math.max(0,C[qt].g-100),Tt=!1;else try{Dp(Xt,H,"req"+gt+"_")}catch{p&&p(Xt)}}if(Tt){p=H.join("&");break t}}}return o=o.i.splice(0,h),u.D=o,p}function Au(o){if(!o.g&&!o.u){o.Y=1;var u=o.Fa;Et||Vn(),mt||(Et(),mt=!0),Ae.add(u,o),o.v=0}}function Uo(o){return o.g||o.u||3<=o.v?!1:(o.Y++,o.u=Fr(_(o.Fa,o),Ru(o,o.v)),o.v++,!0)}e.Fa=function(){if(this.u=null,bu(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var o=2*this.R;this.j.info("BP detection timer enabled: "+o),this.A=Fr(_(this.ab,this),o)}},e.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,le(10),Ws(this),bu(this))};function $o(o){o.A!=null&&(l.clearTimeout(o.A),o.A=null)}function bu(o){o.g=new sn(o,o.j,"rpc",o.Y),o.m===null&&(o.g.H=o.o),o.g.O=0;var u=$e(o.qa);At(u,"RID","rpc"),At(u,"SID",o.K),At(u,"AID",o.T),At(u,"CI",o.F?"0":"1"),!o.F&&o.ja&&At(u,"TO",o.ja),At(u,"TYPE","xmlhttp"),Gr(o,u),o.m&&o.o&&Fo(u,o.m,o.o),o.L&&(o.g.I=o.L);var h=o.g;o=o.ia,h.L=1,h.v=Hs($e(u)),h.m=null,h.P=!0,Jl(h,o)}e.Za=function(){this.C!=null&&(this.C=null,Ws(this),Uo(this),le(19))};function Ys(o){o.C!=null&&(l.clearTimeout(o.C),o.C=null)}function Cu(o,u){var h=null;if(o.g==u){Ys(o),$o(o),o.g=null;var p=2}else if(Mo(o.h,u))h=u.D,su(o.h,u),p=1;else return;if(o.G!=0){if(u.o)if(p==1){h=u.m?u.m.length:0,u=Date.now()-u.F;var C=o.B;p=Fs(),ut(p,new Wl(p,h)),Qs(o)}else Au(o);else if(C=u.s,C==3||C==0&&0<u.X||!(p==1&&kp(o,u)||p==2&&Uo(o)))switch(h&&0<h.length&&(u=o.h,u.i=u.i.concat(h)),C){case 1:Mn(o,5);break;case 4:Mn(o,10);break;case 3:Mn(o,6);break;default:Mn(o,2)}}}function Ru(o,u){let h=o.Ta+Math.floor(Math.random()*o.cb);return o.isActive()||(h*=2),h*u}function Mn(o,u){if(o.j.info("Error code "+u),u==2){var h=_(o.fb,o),p=o.Xa;const C=!p;p=new kn(p||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||js(p,"https"),Hs(p),C?Sp(p.toString(),h):Pp(p.toString(),h)}else le(2);o.G=0,o.l&&o.l.sa(u),Su(o),Tu(o)}e.fb=function(o){o?(this.j.info("Successfully pinged google.com"),le(2)):(this.j.info("Failed to ping google.com"),le(1))};function Su(o){if(o.G=0,o.ka=[],o.l){const u=iu(o.h);(u.length!=0||o.i.length!=0)&&(M(o.ka,u),M(o.ka,o.i),o.h.i.length=0,L(o.i),o.i.length=0),o.l.ra()}}function Pu(o,u,h){var p=h instanceof kn?$e(h):new kn(h);if(p.g!="")u&&(p.g=u+"."+p.g),qs(p,p.s);else{var C=l.location;p=C.protocol,u=u?u+"."+C.hostname:C.hostname,C=+C.port;var P=new kn(null);p&&js(P,p),u&&(P.g=u),C&&qs(P,C),h&&(P.l=h),p=P}return h=o.D,u=o.ya,h&&u&&At(p,h,u),At(p,"VER",o.la),Gr(o,p),p}function Vu(o,u,h){if(u&&!o.J)throw Error("Can't create secondary domain capable XhrIo object.");return u=o.Ca&&!o.pa?new Pt(new zs({eb:h})):new Pt(o.pa),u.Ha(o.J),u}e.isActive=function(){return!!this.l&&this.l.isActive(this)};function Du(){}e=Du.prototype,e.ua=function(){},e.ta=function(){},e.sa=function(){},e.ra=function(){},e.isActive=function(){return!0},e.Na=function(){};function Xs(){}Xs.prototype.g=function(o,u){return new me(o,u)};function me(o,u){nt.call(this),this.g=new Eu(u),this.l=o,this.h=u&&u.messageUrlParams||null,o=u&&u.messageHeaders||null,u&&u.clientProtocolHeaderRequired&&(o?o["X-Client-Protocol"]="webchannel":o={"X-Client-Protocol":"webchannel"}),this.g.o=o,o=u&&u.initMessageHeaders||null,u&&u.messageContentType&&(o?o["X-WebChannel-Content-Type"]=u.messageContentType:o={"X-WebChannel-Content-Type":u.messageContentType}),u&&u.va&&(o?o["X-WebChannel-Client-Profile"]=u.va:o={"X-WebChannel-Client-Profile":u.va}),this.g.S=o,(o=u&&u.Sb)&&!O(o)&&(this.g.m=o),this.v=u&&u.supportsCrossDomainXhr||!1,this.u=u&&u.sendRawJson||!1,(u=u&&u.httpSessionIdParam)&&!O(u)&&(this.g.D=u,o=this.h,o!==null&&u in o&&(o=this.h,u in o&&delete o[u])),this.j=new tr(this)}D(me,nt),me.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},me.prototype.close=function(){Bo(this.g)},me.prototype.o=function(o){var u=this.g;if(typeof o=="string"){var h={};h.__data__=o,o=h}else this.u&&(h={},h.__data__=jt(o),o=h);u.i.push(new yp(u.Ya++,o)),u.G==3&&Qs(u)},me.prototype.N=function(){this.g.l=null,delete this.j,Bo(this.g),delete this.g,me.aa.N.call(this)};function xu(o){Po.call(this),o.__headers__&&(this.headers=o.__headers__,this.statusCode=o.__status__,delete o.__headers__,delete o.__status__);var u=o.__sm__;if(u){t:{for(const h in u){o=h;break t}o=void 0}(this.i=o)&&(o=this.i,u=u!==null&&o in u?u[o]:void 0),this.data=u}else this.data=o}D(xu,Po);function Nu(){Vo.call(this),this.status=1}D(Nu,Vo);function tr(o){this.g=o}D(tr,Du),tr.prototype.ua=function(){ut(this.g,"a")},tr.prototype.ta=function(o){ut(this.g,new xu(o))},tr.prototype.sa=function(o){ut(this.g,new Nu)},tr.prototype.ra=function(){ut(this.g,"b")},Xs.prototype.createWebChannel=Xs.prototype.g,me.prototype.send=me.prototype.o,me.prototype.open=me.prototype.m,me.prototype.close=me.prototype.close,$f=function(){return new Xs},Uf=function(){return Fs()},Bf=Nn,ba={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Bs.NO_ERROR=0,Bs.TIMEOUT=8,Bs.HTTP_ERROR=6,fi=Bs,Ql.COMPLETE="complete",Ff=Ql,Hl.EventType=Mr,Mr.OPEN="a",Mr.CLOSE="b",Mr.ERROR="c",Mr.MESSAGE="d",nt.prototype.listen=nt.prototype.K,Zr=Hl,Pt.prototype.listenOnce=Pt.prototype.L,Pt.prototype.getLastError=Pt.prototype.Ka,Pt.prototype.getLastErrorCode=Pt.prototype.Ba,Pt.prototype.getStatus=Pt.prototype.Z,Pt.prototype.getResponseJson=Pt.prototype.Oa,Pt.prototype.getResponseText=Pt.prototype.oa,Pt.prototype.send=Pt.prototype.ea,Pt.prototype.setWithCredentials=Pt.prototype.Ha,Lf=Pt}).apply(typeof ri<"u"?ri:typeof self<"u"?self:typeof window<"u"?window:{});const wc="@firebase/firestore",Ic="4.7.16";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class te{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}te.UNAUTHENTICATED=new te(null),te.GOOGLE_CREDENTIALS=new te("google-credentials-uid"),te.FIRST_PARTY=new te("first-party-uid"),te.MOCK_USER=new te("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Pr="11.8.1";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kn=new Vf("@firebase/firestore");function ir(){return Kn.logLevel}function Y(e,...t){if(Kn.logLevel<=pt.DEBUG){const n=t.map(ul);Kn.debug(`Firestore (${Pr}): ${e}`,...n)}}function Ze(e,...t){if(Kn.logLevel<=pt.ERROR){const n=t.map(ul);Kn.error(`Firestore (${Pr}): ${e}`,...n)}}function Er(e,...t){if(Kn.logLevel<=pt.WARN){const n=t.map(ul);Kn.warn(`Firestore (${Pr}): ${e}`,...n)}}function ul(e){if(typeof e=="string")return e;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(e)}catch{return e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rt(e,t,n){let r="Unexpected state";typeof t=="string"?r=t:n=t,jf(e,r,n)}function jf(e,t,n){let r=`FIRESTORE (${Pr}) INTERNAL ASSERTION FAILED: ${t} (ID: ${e.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw Ze(r),new Error(r)}function vt(e,t,n,r){let s="Unexpected state";typeof n=="string"?s=n:r=n,e||jf(t,s,r)}function at(e,t){return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Z extends Sr{constructor(t,n){super(t,n),this.code=t,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gn{constructor(){this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qf{constructor(t,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class jy{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,n){t.enqueueRetryable(()=>n(te.UNAUTHENTICATED))}shutdown(){}}class qy{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,n){this.changeListener=n,t.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class Hy{constructor(t){this.t=t,this.currentUser=te.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,n){vt(this.o===void 0,42304);let r=this.i;const s=c=>this.i!==r?(r=this.i,n(c)):Promise.resolve();let i=new gn;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new gn,t.enqueueRetryable(()=>s(this.currentUser))};const a=()=>{const c=i;t.enqueueRetryable(async()=>{await c.promise,await s(this.currentUser)})},l=c=>{Y("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(c=>l(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?l(c):(Y("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new gn)}},0),a()}getToken(){const t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==t?(Y("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(vt(typeof r.accessToken=="string",31837,{l:r}),new qf(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return vt(t===null||typeof t=="string",2055,{h:t}),new te(t)}}class zy{constructor(t,n,r){this.P=t,this.T=n,this.I=r,this.type="FirstParty",this.user=te.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const t=this.R();return t&&this.A.set("Authorization",t),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class Ky{constructor(t,n,r){this.P=t,this.T=n,this.I=r}getToken(){return Promise.resolve(new zy(this.P,this.T,this.I))}start(t,n){t.enqueueRetryable(()=>n(te.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Ac{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Gy{constructor(t,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,by(t)&&t.settings.appCheckToken&&(this.p=t.settings.appCheckToken)}start(t,n){vt(this.o===void 0,3512);const r=i=>{i.error!=null&&Y("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const a=i.token!==this.m;return this.m=i.token,Y("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?n(i.token):Promise.resolve()};this.o=i=>{t.enqueueRetryable(()=>r(i))};const s=i=>{Y("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.V.getImmediate({optional:!0});i?s(i):Y("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new Ac(this.p));const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(n=>n?(vt(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new Ac(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wy(e){const t=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hf(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zf{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=Wy(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=t.charAt(s[i]%62))}return r}}function ct(e,t){return e<t?-1:e>t?1:0}function Ca(e,t){let n=0;for(;n<e.length&&n<t.length;){const r=e.codePointAt(n),s=t.codePointAt(n);if(r!==s){if(r<128&&s<128)return ct(r,s);{const i=Hf(),a=Qy(i.encode(bc(e,n)),i.encode(bc(t,n)));return a!==0?a:ct(r,s)}}n+=r>65535?2:1}return ct(e.length,t.length)}function bc(e,t){return e.codePointAt(t)>65535?e.substring(t,t+2):e.substring(t,t+1)}function Qy(e,t){for(let n=0;n<e.length&&n<t.length;++n)if(e[n]!==t[n])return ct(e[n],t[n]);return ct(e.length,t.length)}function Tr(e,t,n){return e.length===t.length&&e.every((r,s)=>n(r,t[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cc=-62135596800,Rc=1e6;class Lt{static now(){return Lt.fromMillis(Date.now())}static fromDate(t){return Lt.fromMillis(t.getTime())}static fromMillis(t){const n=Math.floor(t/1e3),r=Math.floor((t-1e3*n)*Rc);return new Lt(n,r)}constructor(t,n){if(this.seconds=t,this.nanoseconds=n,n<0)throw new Z(k.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Z(k.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<Cc)throw new Z(k.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Z(k.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Rc}_compareTo(t){return this.seconds===t.seconds?ct(this.nanoseconds,t.nanoseconds):ct(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const t=this.seconds-Cc;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ot{static fromTimestamp(t){return new ot(t)}static min(){return new ot(new Lt(0,0))}static max(){return new ot(new Lt(253402300799,999999999))}constructor(t){this.timestamp=t}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sc="__name__";class De{constructor(t,n,r){n===void 0?n=0:n>t.length&&rt(637,{offset:n,range:t.length}),r===void 0?r=t.length-n:r>t.length-n&&rt(1746,{length:r,range:t.length-n}),this.segments=t,this.offset=n,this.len=r}get length(){return this.len}isEqual(t){return De.comparator(this,t)===0}child(t){const n=this.segments.slice(this.offset,this.limit());return t instanceof De?t.forEach(r=>{n.push(r)}):n.push(t),this.construct(n)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}forEach(t){for(let n=this.offset,r=this.limit();n<r;n++)t(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,n){const r=Math.min(t.length,n.length);for(let s=0;s<r;s++){const i=De.compareSegments(t.get(s),n.get(s));if(i!==0)return i}return ct(t.length,n.length)}static compareSegments(t,n){const r=De.isNumericId(t),s=De.isNumericId(n);return r&&!s?-1:!r&&s?1:r&&s?De.extractNumericId(t).compare(De.extractNumericId(n)):Ca(t,n)}static isNumericId(t){return t.startsWith("__id")&&t.endsWith("__")}static extractNumericId(t){return mn.fromString(t.substring(4,t.length-2))}}class Rt extends De{construct(t,n,r){return new Rt(t,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const n=[];for(const r of t){if(r.indexOf("//")>=0)throw new Z(k.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new Rt(n)}static emptyPath(){return new Rt([])}}const Yy=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Gt extends De{construct(t,n,r){return new Gt(t,n,r)}static isValidIdentifier(t){return Yy.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Gt.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Sc}static keyField(){return new Gt([Sc])}static fromServerFormat(t){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new Z(k.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let a=!1;for(;s<t.length;){const l=t[s];if(l==="\\"){if(s+1===t.length)throw new Z(k.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const c=t[s+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new Z(k.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=c,s+=2}else l==="`"?(a=!a,s++):l!=="."||a?(r+=l,s++):(i(),s++)}if(i(),a)throw new Z(k.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new Gt(n)}static emptyPath(){return new Gt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class et{constructor(t){this.path=t}static fromPath(t){return new et(Rt.fromString(t))}static fromName(t){return new et(Rt.fromString(t).popFirst(5))}static empty(){return new et(Rt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&Rt.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,n){return Rt.comparator(t.path,n.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new et(new Rt(t.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ws=-1;function Xy(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,s=ot.fromTimestamp(r===1e9?new Lt(n+1,0):new Lt(n,r));return new Tn(s,et.empty(),t)}function Jy(e){return new Tn(e.readTime,e.key,ws)}class Tn{constructor(t,n,r){this.readTime=t,this.documentKey=n,this.largestBatchId=r}static min(){return new Tn(ot.min(),et.empty(),ws)}static max(){return new Tn(ot.max(),et.empty(),ws)}}function Zy(e,t){let n=e.readTime.compareTo(t.readTime);return n!==0?n:(n=et.comparator(e.documentKey,t.documentKey),n!==0?n:ct(e.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tv="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class ev{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Vr(e){if(e.code!==k.FAILED_PRECONDITION||e.message!==tv)throw e;Y("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(t){return this.next(void 0,t)}next(t,n){return this.callbackAttached&&rt(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new x((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(t,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((t,n)=>{this.next(t,n)})}wrapUserFunction(t){try{const n=t();return n instanceof x?n:x.resolve(n)}catch(n){return x.reject(n)}}wrapSuccess(t,n){return t?this.wrapUserFunction(()=>t(n)):x.resolve(n)}wrapFailure(t,n){return t?this.wrapUserFunction(()=>t(n)):x.reject(n)}static resolve(t){return new x((n,r)=>{n(t)})}static reject(t){return new x((n,r)=>{r(t)})}static waitFor(t){return new x((n,r)=>{let s=0,i=0,a=!1;t.forEach(l=>{++s,l.next(()=>{++i,a&&i===s&&n()},c=>r(c))}),a=!0,i===s&&n()})}static or(t){let n=x.resolve(!1);for(const r of t)n=n.next(s=>s?x.resolve(s):r());return n}static forEach(t,n){const r=[];return t.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(t,n){return new x((r,s)=>{const i=t.length,a=new Array(i);let l=0;for(let c=0;c<i;c++){const f=c;n(t[f]).next(d=>{a[f]=d,++l,l===i&&r(a)},d=>s(d))}})}static doWhile(t,n){return new x((r,s)=>{const i=()=>{t()===!0?n().next(()=>{i()},s):r()};i()})}}function nv(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Dr(e){return e.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lo{constructor(t,n){this.previousValue=t,n&&(n.sequenceNumberHandler=r=>this.ue(r),this.ce=r=>n.writeSequenceNumber(r))}ue(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ce&&this.ce(t),t}}lo.le=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cl=-1;function uo(e){return e==null}function Oi(e){return e===0&&1/e==-1/0}function rv(e){return typeof e=="number"&&Number.isInteger(e)&&!Oi(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kf="";function sv(e){let t="";for(let n=0;n<e.length;n++)t.length>0&&(t=Pc(t)),t=iv(e.get(n),t);return Pc(t)}function iv(e,t){let n=t;const r=e.length;for(let s=0;s<r;s++){const i=e.charAt(s);switch(i){case"\0":n+="";break;case Kf:n+="";break;default:n+=i}}return n}function Pc(e){return e+Kf+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vc(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function Sn(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function Gf(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class St{constructor(t,n){this.comparator=t,this.root=n||zt.EMPTY}insert(t,n){return new St(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,zt.BLACK,null,null))}remove(t){return new St(this.comparator,this.root.remove(t,this.comparator).copy(null,null,zt.BLACK,null,null))}get(t){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(t,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(t){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(t,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((n,r)=>(t(n,r),!1))}toString(){const t=[];return this.inorderTraversal((n,r)=>(t.push(`${n}:${r}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new si(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new si(this.root,t,this.comparator,!1)}getReverseIterator(){return new si(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new si(this.root,t,this.comparator,!0)}}class si{constructor(t,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!t.isEmpty();)if(i=n?r(t.key,n):1,n&&s&&(i*=-1),i<0)t=this.isReverse?t.left:t.right;else{if(i===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const n={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class zt{constructor(t,n,r,s,i){this.key=t,this.value=n,this.color=r??zt.RED,this.left=s??zt.EMPTY,this.right=i??zt.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,n,r,s,i){return new zt(t??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,n,r){let s=this;const i=r(t,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(t,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(t,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return zt.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,n){let r,s=this;if(n(t,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(t,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(t,s.key)===0){if(s.right.isEmpty())return zt.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(t,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,zt.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,zt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,n)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw rt(43730,{key:this.key,value:this.value});if(this.right.isRed())throw rt(14113,{key:this.key,value:this.value});const t=this.left.check();if(t!==this.right.check())throw rt(27949);return t+(this.isRed()?0:1)}}zt.EMPTY=null,zt.RED=!0,zt.BLACK=!1;zt.EMPTY=new class{constructor(){this.size=0}get key(){throw rt(57766)}get value(){throw rt(16141)}get color(){throw rt(16727)}get left(){throw rt(29726)}get right(){throw rt(36894)}copy(t,n,r,s,i){return this}insert(t,n,r){return new zt(t,n)}remove(t,n){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ft{constructor(t){this.comparator=t,this.data=new St(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((n,r)=>(t(n),!1))}forEachInRange(t,n){const r=this.data.getIteratorFrom(t[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,t[1])>=0)return;n(s.key)}}forEachWhile(t,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!t(r.getNext().key))return}firstAfterOrEqual(t){const n=this.data.getIteratorFrom(t);return n.hasNext()?n.getNext().key:null}getIterator(){return new Dc(this.data.getIterator())}getIteratorFrom(t){return new Dc(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let n=this;return n.size<t.size&&(n=t,t=this),t.forEach(r=>{n=n.add(r)}),n}isEqual(t){if(!(t instanceof Ft)||this.size!==t.size)return!1;const n=this.data.getIterator(),r=t.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const t=[];return this.forEach(n=>{t.push(n)}),t}toString(){const t=[];return this.forEach(n=>t.push(n)),"SortedSet("+t.toString()+")"}copy(t){const n=new Ft(this.comparator);return n.data=t,n}}class Dc{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ye{constructor(t){this.fields=t,t.sort(Gt.comparator)}static empty(){return new ye([])}unionWith(t){let n=new Ft(Gt.comparator);for(const r of this.fields)n=n.add(r);for(const r of t)n=n.add(r);return new ye(n.toArray())}covers(t){for(const n of this.fields)if(n.isPrefixOf(t))return!0;return!1}isEqual(t){return Tr(this.fields,t.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wf extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wt{constructor(t){this.binaryString=t}static fromBase64String(t){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new Wf("Invalid base64 string: "+i):i}}(t);return new Wt(n)}static fromUint8Array(t){const n=function(s){let i="";for(let a=0;a<s.length;++a)i+=String.fromCharCode(s[a]);return i}(t);return new Wt(n)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return ct(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}Wt.EMPTY_BYTE_STRING=new Wt("");const ov=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function wn(e){if(vt(!!e,39018),typeof e=="string"){let t=0;const n=ov.exec(e);if(vt(!!n,46558,{timestamp:e}),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),t=Number(s)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:Vt(e.seconds),nanos:Vt(e.nanos)}}function Vt(e){return typeof e=="number"?e:typeof e=="string"?Number(e):0}function In(e){return typeof e=="string"?Wt.fromBase64String(e):Wt.fromUint8Array(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qf="server_timestamp",Yf="__type__",Xf="__previous_value__",Jf="__local_write_time__";function hl(e){var t,n;return((n=(((t=e==null?void 0:e.mapValue)===null||t===void 0?void 0:t.fields)||{})[Yf])===null||n===void 0?void 0:n.stringValue)===Qf}function co(e){const t=e.mapValue.fields[Xf];return hl(t)?co(t):t}function Is(e){const t=wn(e.mapValue.fields[Jf].timestampValue);return new Lt(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class av{constructor(t,n,r,s,i,a,l,c,f,d){this.databaseId=t,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=a,this.autoDetectLongPolling=l,this.longPollingOptions=c,this.useFetchStreams=f,this.isUsingEmulator=d}}const ki="(default)";class As{constructor(t,n){this.projectId=t,this.database=n||ki}static empty(){return new As("","")}get isDefaultDatabase(){return this.database===ki}isEqual(t){return t instanceof As&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zf="__type__",lv="__max__",ii={mapValue:{}},td="__vector__",Mi="value";function An(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?hl(e)?4:cv(e)?9007199254740991:uv(e)?10:11:rt(28295,{value:e})}function Le(e,t){if(e===t)return!0;const n=An(e);if(n!==An(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return Is(e).isEqual(Is(t));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const a=wn(s.timestampValue),l=wn(i.timestampValue);return a.seconds===l.seconds&&a.nanos===l.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(s,i){return In(s.bytesValue).isEqual(In(i.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(s,i){return Vt(s.geoPointValue.latitude)===Vt(i.geoPointValue.latitude)&&Vt(s.geoPointValue.longitude)===Vt(i.geoPointValue.longitude)}(e,t);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return Vt(s.integerValue)===Vt(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const a=Vt(s.doubleValue),l=Vt(i.doubleValue);return a===l?Oi(a)===Oi(l):isNaN(a)&&isNaN(l)}return!1}(e,t);case 9:return Tr(e.arrayValue.values||[],t.arrayValue.values||[],Le);case 10:case 11:return function(s,i){const a=s.mapValue.fields||{},l=i.mapValue.fields||{};if(Vc(a)!==Vc(l))return!1;for(const c in a)if(a.hasOwnProperty(c)&&(l[c]===void 0||!Le(a[c],l[c])))return!1;return!0}(e,t);default:return rt(52216,{left:e})}}function bs(e,t){return(e.values||[]).find(n=>Le(n,t))!==void 0}function wr(e,t){if(e===t)return 0;const n=An(e),r=An(t);if(n!==r)return ct(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return ct(e.booleanValue,t.booleanValue);case 2:return function(i,a){const l=Vt(i.integerValue||i.doubleValue),c=Vt(a.integerValue||a.doubleValue);return l<c?-1:l>c?1:l===c?0:isNaN(l)?isNaN(c)?0:-1:1}(e,t);case 3:return xc(e.timestampValue,t.timestampValue);case 4:return xc(Is(e),Is(t));case 5:return Ca(e.stringValue,t.stringValue);case 6:return function(i,a){const l=In(i),c=In(a);return l.compareTo(c)}(e.bytesValue,t.bytesValue);case 7:return function(i,a){const l=i.split("/"),c=a.split("/");for(let f=0;f<l.length&&f<c.length;f++){const d=ct(l[f],c[f]);if(d!==0)return d}return ct(l.length,c.length)}(e.referenceValue,t.referenceValue);case 8:return function(i,a){const l=ct(Vt(i.latitude),Vt(a.latitude));return l!==0?l:ct(Vt(i.longitude),Vt(a.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return Nc(e.arrayValue,t.arrayValue);case 10:return function(i,a){var l,c,f,d;const m=i.fields||{},_=a.fields||{},b=(l=m[Mi])===null||l===void 0?void 0:l.arrayValue,D=(c=_[Mi])===null||c===void 0?void 0:c.arrayValue,L=ct(((f=b==null?void 0:b.values)===null||f===void 0?void 0:f.length)||0,((d=D==null?void 0:D.values)===null||d===void 0?void 0:d.length)||0);return L!==0?L:Nc(b,D)}(e.mapValue,t.mapValue);case 11:return function(i,a){if(i===ii.mapValue&&a===ii.mapValue)return 0;if(i===ii.mapValue)return 1;if(a===ii.mapValue)return-1;const l=i.fields||{},c=Object.keys(l),f=a.fields||{},d=Object.keys(f);c.sort(),d.sort();for(let m=0;m<c.length&&m<d.length;++m){const _=Ca(c[m],d[m]);if(_!==0)return _;const b=wr(l[c[m]],f[d[m]]);if(b!==0)return b}return ct(c.length,d.length)}(e.mapValue,t.mapValue);default:throw rt(23264,{Pe:n})}}function xc(e,t){if(typeof e=="string"&&typeof t=="string"&&e.length===t.length)return ct(e,t);const n=wn(e),r=wn(t),s=ct(n.seconds,r.seconds);return s!==0?s:ct(n.nanos,r.nanos)}function Nc(e,t){const n=e.values||[],r=t.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=wr(n[s],r[s]);if(i)return i}return ct(n.length,r.length)}function Ir(e){return Ra(e)}function Ra(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(n){const r=wn(n);return`time(${r.seconds},${r.nanos})`}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(n){return In(n).toBase64()}(e.bytesValue):"referenceValue"in e?function(n){return et.fromName(n).toString()}(e.referenceValue):"geoPointValue"in e?function(n){return`geo(${n.latitude},${n.longitude})`}(e.geoPointValue):"arrayValue"in e?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=Ra(i);return r+"]"}(e.arrayValue):"mapValue"in e?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const a of r)i?i=!1:s+=",",s+=`${a}:${Ra(n.fields[a])}`;return s+"}"}(e.mapValue):rt(61005,{value:e})}function di(e){switch(An(e)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=co(e);return t?16+di(t):16;case 5:return 2*e.stringValue.length;case 6:return In(e.bytesValue).approximateByteSize();case 7:return e.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((s,i)=>s+di(i),0)}(e.arrayValue);case 10:case 11:return function(r){let s=0;return Sn(r.fields,(i,a)=>{s+=i.length+di(a)}),s}(e.mapValue);default:throw rt(13486,{value:e})}}function Sa(e){return!!e&&"integerValue"in e}function fl(e){return!!e&&"arrayValue"in e}function Oc(e){return!!e&&"nullValue"in e}function kc(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function pi(e){return!!e&&"mapValue"in e}function uv(e){var t,n;return((n=(((t=e==null?void 0:e.mapValue)===null||t===void 0?void 0:t.fields)||{})[Zf])===null||n===void 0?void 0:n.stringValue)===td}function us(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&typeof e.timestampValue=="object")return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return Sn(e.mapValue.fields,(n,r)=>t.mapValue.fields[n]=us(r)),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=us(e.arrayValue.values[n]);return t}return Object.assign({},e)}function cv(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue===lv}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class de{constructor(t){this.value=t}static empty(){return new de({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let n=this.value;for(let r=0;r<t.length-1;++r)if(n=(n.mapValue.fields||{})[t.get(r)],!pi(n))return null;return n=(n.mapValue.fields||{})[t.lastSegment()],n||null}}set(t,n){this.getFieldsMap(t.popLast())[t.lastSegment()]=us(n)}setAll(t){let n=Gt.emptyPath(),r={},s=[];t.forEach((a,l)=>{if(!n.isImmediateParentOf(l)){const c=this.getFieldsMap(n);this.applyChanges(c,r,s),r={},s=[],n=l.popLast()}a?r[l.lastSegment()]=us(a):s.push(l.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(t){const n=this.field(t.popLast());pi(n)&&n.mapValue.fields&&delete n.mapValue.fields[t.lastSegment()]}isEqual(t){return Le(this.value,t.value)}getFieldsMap(t){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<t.length;++r){let s=n.mapValue.fields[t.get(r)];pi(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[t.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(t,n,r){Sn(n,(s,i)=>t[s]=i);for(const s of r)delete t[s]}clone(){return new de(us(this.value))}}function ed(e){const t=[];return Sn(e.fields,(n,r)=>{const s=new Gt([n]);if(pi(r)){const i=ed(r.mapValue).fields;if(i.length===0)t.push(s);else for(const a of i)t.push(s.child(a))}else t.push(s)}),new ye(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class se{constructor(t,n,r,s,i,a,l){this.key=t,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=a,this.documentState=l}static newInvalidDocument(t){return new se(t,0,ot.min(),ot.min(),ot.min(),de.empty(),0)}static newFoundDocument(t,n,r,s){return new se(t,1,n,ot.min(),r,s,0)}static newNoDocument(t,n){return new se(t,2,n,ot.min(),ot.min(),de.empty(),0)}static newUnknownDocument(t,n){return new se(t,3,n,ot.min(),ot.min(),de.empty(),2)}convertToFoundDocument(t,n){return!this.createTime.isEqual(ot.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=de.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=de.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ot.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof se&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new se(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Li{constructor(t,n){this.position=t,this.inclusive=n}}function Mc(e,t,n){let r=0;for(let s=0;s<e.position.length;s++){const i=t[s],a=e.position[s];if(i.field.isKeyField()?r=et.comparator(et.fromName(a.referenceValue),n.key):r=wr(a,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function Lc(e,t){if(e===null)return t===null;if(t===null||e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!Le(e.position[n],t.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fi{constructor(t,n="asc"){this.field=t,this.dir=n}}function hv(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nd{}class Mt extends nd{constructor(t,n,r){super(),this.field=t,this.op=n,this.value=r}static create(t,n,r){return t.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(t,n,r):new dv(t,n,r):n==="array-contains"?new gv(t,r):n==="in"?new _v(t,r):n==="not-in"?new yv(t,r):n==="array-contains-any"?new vv(t,r):new Mt(t,n,r)}static createKeyFieldInFilter(t,n,r){return n==="in"?new pv(t,r):new mv(t,r)}matches(t){const n=t.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(wr(n,this.value)):n!==null&&An(this.value)===An(n)&&this.matchesComparison(wr(n,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return rt(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Fe extends nd{constructor(t,n){super(),this.filters=t,this.op=n,this.Te=null}static create(t,n){return new Fe(t,n)}matches(t){return rd(this)?this.filters.find(n=>!n.matches(t))===void 0:this.filters.find(n=>n.matches(t))!==void 0}getFlattenedFilters(){return this.Te!==null||(this.Te=this.filters.reduce((t,n)=>t.concat(n.getFlattenedFilters()),[])),this.Te}getFilters(){return Object.assign([],this.filters)}}function rd(e){return e.op==="and"}function sd(e){return fv(e)&&rd(e)}function fv(e){for(const t of e.filters)if(t instanceof Fe)return!1;return!0}function Pa(e){if(e instanceof Mt)return e.field.canonicalString()+e.op.toString()+Ir(e.value);if(sd(e))return e.filters.map(t=>Pa(t)).join(",");{const t=e.filters.map(n=>Pa(n)).join(",");return`${e.op}(${t})`}}function id(e,t){return e instanceof Mt?function(r,s){return s instanceof Mt&&r.op===s.op&&r.field.isEqual(s.field)&&Le(r.value,s.value)}(e,t):e instanceof Fe?function(r,s){return s instanceof Fe&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,a,l)=>i&&id(a,s.filters[l]),!0):!1}(e,t):void rt(19439)}function od(e){return e instanceof Mt?function(n){return`${n.field.canonicalString()} ${n.op} ${Ir(n.value)}`}(e):e instanceof Fe?function(n){return n.op.toString()+" {"+n.getFilters().map(od).join(" ,")+"}"}(e):"Filter"}class dv extends Mt{constructor(t,n,r){super(t,n,r),this.key=et.fromName(r.referenceValue)}matches(t){const n=et.comparator(t.key,this.key);return this.matchesComparison(n)}}class pv extends Mt{constructor(t,n){super(t,"in",n),this.keys=ad("in",n)}matches(t){return this.keys.some(n=>n.isEqual(t.key))}}class mv extends Mt{constructor(t,n){super(t,"not-in",n),this.keys=ad("not-in",n)}matches(t){return!this.keys.some(n=>n.isEqual(t.key))}}function ad(e,t){var n;return(((n=t.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>et.fromName(r.referenceValue))}class gv extends Mt{constructor(t,n){super(t,"array-contains",n)}matches(t){const n=t.data.field(this.field);return fl(n)&&bs(n.arrayValue,this.value)}}class _v extends Mt{constructor(t,n){super(t,"in",n)}matches(t){const n=t.data.field(this.field);return n!==null&&bs(this.value.arrayValue,n)}}class yv extends Mt{constructor(t,n){super(t,"not-in",n)}matches(t){if(bs(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=t.data.field(this.field);return n!==null&&n.nullValue===void 0&&!bs(this.value.arrayValue,n)}}class vv extends Mt{constructor(t,n){super(t,"array-contains-any",n)}matches(t){const n=t.data.field(this.field);return!(!fl(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>bs(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ev{constructor(t,n=null,r=[],s=[],i=null,a=null,l=null){this.path=t,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=a,this.endAt=l,this.Ie=null}}function Fc(e,t=null,n=[],r=[],s=null,i=null,a=null){return new Ev(e,t,n,r,s,i,a)}function dl(e){const t=at(e);if(t.Ie===null){let n=t.path.canonicalString();t.collectionGroup!==null&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map(r=>Pa(r)).join(","),n+="|ob:",n+=t.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),uo(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map(r=>Ir(r)).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map(r=>Ir(r)).join(",")),t.Ie=n}return t.Ie}function pl(e,t){if(e.limit!==t.limit||e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!hv(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!id(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!Lc(e.startAt,t.startAt)&&Lc(e.endAt,t.endAt)}function Va(e){return et.isDocumentKey(e.path)&&e.collectionGroup===null&&e.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ho{constructor(t,n=null,r=[],s=[],i=null,a="F",l=null,c=null){this.path=t,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=a,this.startAt=l,this.endAt=c,this.Ee=null,this.de=null,this.Ae=null,this.startAt,this.endAt}}function Tv(e,t,n,r,s,i,a,l){return new ho(e,t,n,r,s,i,a,l)}function ld(e){return new ho(e)}function Bc(e){return e.filters.length===0&&e.limit===null&&e.startAt==null&&e.endAt==null&&(e.explicitOrderBy.length===0||e.explicitOrderBy.length===1&&e.explicitOrderBy[0].field.isKeyField())}function wv(e){return e.collectionGroup!==null}function cs(e){const t=at(e);if(t.Ee===null){t.Ee=[];const n=new Set;for(const i of t.explicitOrderBy)t.Ee.push(i),n.add(i.field.canonicalString());const r=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(a){let l=new Ft(Gt.comparator);return a.filters.forEach(c=>{c.getFlattenedFilters().forEach(f=>{f.isInequality()&&(l=l.add(f.field))})}),l})(t).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||t.Ee.push(new Fi(i,r))}),n.has(Gt.keyField().canonicalString())||t.Ee.push(new Fi(Gt.keyField(),r))}return t.Ee}function Ne(e){const t=at(e);return t.de||(t.de=Iv(t,cs(e))),t.de}function Iv(e,t){if(e.limitType==="F")return Fc(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new Fi(s.field,i)});const n=e.endAt?new Li(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new Li(e.startAt.position,e.startAt.inclusive):null;return Fc(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}}function Da(e,t,n){return new ho(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function fo(e,t){return pl(Ne(e),Ne(t))&&e.limitType===t.limitType}function ud(e){return`${dl(Ne(e))}|lt:${e.limitType}`}function or(e){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>od(s)).join(", ")}]`),uo(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(a){return`${a.field.canonicalString()} (${a.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>Ir(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>Ir(s)).join(",")),`Target(${r})`}(Ne(e))}; limitType=${e.limitType})`}function po(e,t){return t.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):et.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(e,t)&&function(r,s){for(const i of cs(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(e,t)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(e,t)&&function(r,s){return!(r.startAt&&!function(a,l,c){const f=Mc(a,l,c);return a.inclusive?f<=0:f<0}(r.startAt,cs(r),s)||r.endAt&&!function(a,l,c){const f=Mc(a,l,c);return a.inclusive?f>=0:f>0}(r.endAt,cs(r),s))}(e,t)}function Av(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function cd(e){return(t,n)=>{let r=!1;for(const s of cs(e)){const i=bv(s,t,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function bv(e,t,n){const r=e.field.isKeyField()?et.comparator(t.key,n.key):function(i,a,l){const c=a.data.field(i),f=l.data.field(i);return c!==null&&f!==null?wr(c,f):rt(42886)}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return rt(19790,{direction:e.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qn{constructor(t,n){this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}get(t){const n=this.mapKeyFn(t),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,t))return i}}has(t){return this.get(t)!==void 0}set(t,n){const r=this.mapKeyFn(t),s=this.inner[r];if(s===void 0)return this.inner[r]=[[t,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],t))return void(s[i]=[t,n]);s.push([t,n]),this.innerSize++}delete(t){const n=this.mapKeyFn(t),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],t))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(t){Sn(this.inner,(n,r)=>{for(const[s,i]of r)t(s,i)})}isEmpty(){return Gf(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cv=new St(et.comparator);function tn(){return Cv}const hd=new St(et.comparator);function ts(...e){let t=hd;for(const n of e)t=t.insert(n.key,n);return t}function fd(e){let t=hd;return e.forEach((n,r)=>t=t.insert(n,r.overlayedDocument)),t}function qn(){return hs()}function dd(){return hs()}function hs(){return new Qn(e=>e.toString(),(e,t)=>e.isEqual(t))}const Rv=new St(et.comparator),Sv=new Ft(et.comparator);function ht(...e){let t=Sv;for(const n of e)t=t.add(n);return t}const Pv=new Ft(ct);function Vv(){return Pv}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ml(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Oi(t)?"-0":t}}function pd(e){return{integerValue:""+e}}function Dv(e,t){return rv(t)?pd(t):ml(e,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mo{constructor(){this._=void 0}}function xv(e,t,n){return e instanceof Bi?function(s,i){const a={fields:{[Yf]:{stringValue:Qf},[Jf]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&hl(i)&&(i=co(i)),i&&(a.fields[Xf]=i),{mapValue:a}}(n,t):e instanceof Cs?gd(e,t):e instanceof Rs?_d(e,t):function(s,i){const a=md(s,i),l=Uc(a)+Uc(s.Re);return Sa(a)&&Sa(s.Re)?pd(l):ml(s.serializer,l)}(e,t)}function Nv(e,t,n){return e instanceof Cs?gd(e,t):e instanceof Rs?_d(e,t):n}function md(e,t){return e instanceof Ui?function(r){return Sa(r)||function(i){return!!i&&"doubleValue"in i}(r)}(t)?t:{integerValue:0}:null}class Bi extends mo{}class Cs extends mo{constructor(t){super(),this.elements=t}}function gd(e,t){const n=yd(t);for(const r of e.elements)n.some(s=>Le(s,r))||n.push(r);return{arrayValue:{values:n}}}class Rs extends mo{constructor(t){super(),this.elements=t}}function _d(e,t){let n=yd(t);for(const r of e.elements)n=n.filter(s=>!Le(s,r));return{arrayValue:{values:n}}}class Ui extends mo{constructor(t,n){super(),this.serializer=t,this.Re=n}}function Uc(e){return Vt(e.integerValue||e.doubleValue)}function yd(e){return fl(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}function Ov(e,t){return e.field.isEqual(t.field)&&function(r,s){return r instanceof Cs&&s instanceof Cs||r instanceof Rs&&s instanceof Rs?Tr(r.elements,s.elements,Le):r instanceof Ui&&s instanceof Ui?Le(r.Re,s.Re):r instanceof Bi&&s instanceof Bi}(e.transform,t.transform)}class kv{constructor(t,n){this.version=t,this.transformResults=n}}class Se{constructor(t,n){this.updateTime=t,this.exists=n}static none(){return new Se}static exists(t){return new Se(void 0,t)}static updateTime(t){return new Se(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function mi(e,t){return e.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(e.updateTime):e.exists===void 0||e.exists===t.isFoundDocument()}class go{}function vd(e,t){if(!e.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return e.isNoDocument()?new Td(e.key,Se.none()):new Vs(e.key,e.data,Se.none());{const n=e.data,r=de.empty();let s=new Ft(Gt.comparator);for(let i of t.fields)if(!s.has(i)){let a=n.field(i);a===null&&i.length>1&&(i=i.popLast(),a=n.field(i)),a===null?r.delete(i):r.set(i,a),s=s.add(i)}return new Pn(e.key,r,new ye(s.toArray()),Se.none())}}function Mv(e,t,n){e instanceof Vs?function(s,i,a){const l=s.value.clone(),c=jc(s.fieldTransforms,i,a.transformResults);l.setAll(c),i.convertToFoundDocument(a.version,l).setHasCommittedMutations()}(e,t,n):e instanceof Pn?function(s,i,a){if(!mi(s.precondition,i))return void i.convertToUnknownDocument(a.version);const l=jc(s.fieldTransforms,i,a.transformResults),c=i.data;c.setAll(Ed(s)),c.setAll(l),i.convertToFoundDocument(a.version,c).setHasCommittedMutations()}(e,t,n):function(s,i,a){i.convertToNoDocument(a.version).setHasCommittedMutations()}(0,t,n)}function fs(e,t,n,r){return e instanceof Vs?function(i,a,l,c){if(!mi(i.precondition,a))return l;const f=i.value.clone(),d=qc(i.fieldTransforms,c,a);return f.setAll(d),a.convertToFoundDocument(a.version,f).setHasLocalMutations(),null}(e,t,n,r):e instanceof Pn?function(i,a,l,c){if(!mi(i.precondition,a))return l;const f=qc(i.fieldTransforms,c,a),d=a.data;return d.setAll(Ed(i)),d.setAll(f),a.convertToFoundDocument(a.version,d).setHasLocalMutations(),l===null?null:l.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(m=>m.field))}(e,t,n,r):function(i,a,l){return mi(i.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):l}(e,t,n)}function Lv(e,t){let n=null;for(const r of e.fieldTransforms){const s=t.data.field(r.field),i=md(r.transform,s||null);i!=null&&(n===null&&(n=de.empty()),n.set(r.field,i))}return n||null}function $c(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&Tr(r,s,(i,a)=>Ov(i,a))}(e.fieldTransforms,t.fieldTransforms)&&(e.type===0?e.value.isEqual(t.value):e.type!==1||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class Vs extends go{constructor(t,n,r,s=[]){super(),this.key=t,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Pn extends go{constructor(t,n,r,s,i=[]){super(),this.key=t,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function Ed(e){const t=new Map;return e.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}}),t}function jc(e,t,n){const r=new Map;vt(e.length===n.length,32656,{Ve:n.length,me:e.length});for(let s=0;s<n.length;s++){const i=e[s],a=i.transform,l=t.data.field(i.field);r.set(i.field,Nv(a,l,n[s]))}return r}function qc(e,t,n){const r=new Map;for(const s of e){const i=s.transform,a=n.data.field(s.field);r.set(s.field,xv(i,a,t))}return r}class Td extends go{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Fv extends go{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bv{constructor(t,n,r,s){this.batchId=t,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(t,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(t.key)&&Mv(i,t,r[s])}}applyToLocalView(t,n){for(const r of this.baseMutations)r.key.isEqual(t.key)&&(n=fs(r,t,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(t.key)&&(n=fs(r,t,n,this.localWriteTime));return n}applyToLocalDocumentSet(t,n){const r=dd();return this.mutations.forEach(s=>{const i=t.get(s.key),a=i.overlayedDocument;let l=this.applyToLocalView(a,i.mutatedFields);l=n.has(s.key)?null:l;const c=vd(a,l);c!==null&&r.set(s.key,c),a.isValidDocument()||a.convertToNoDocument(ot.min())}),r}keys(){return this.mutations.reduce((t,n)=>t.add(n.key),ht())}isEqual(t){return this.batchId===t.batchId&&Tr(this.mutations,t.mutations,(n,r)=>$c(n,r))&&Tr(this.baseMutations,t.baseMutations,(n,r)=>$c(n,r))}}class gl{constructor(t,n,r,s){this.batch=t,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(t,n,r){vt(t.mutations.length===r.length,58842,{fe:t.mutations.length,ge:r.length});let s=function(){return Rv}();const i=t.mutations;for(let a=0;a<i.length;a++)s=s.insert(i[a].key,r[a].version);return new gl(t,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uv{constructor(t,n){this.largestBatchId=t,this.mutation=n}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $v{constructor(t,n){this.count=t,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var xt,dt;function jv(e){switch(e){case k.OK:return rt(64938);case k.CANCELLED:case k.UNKNOWN:case k.DEADLINE_EXCEEDED:case k.RESOURCE_EXHAUSTED:case k.INTERNAL:case k.UNAVAILABLE:case k.UNAUTHENTICATED:return!1;case k.INVALID_ARGUMENT:case k.NOT_FOUND:case k.ALREADY_EXISTS:case k.PERMISSION_DENIED:case k.FAILED_PRECONDITION:case k.ABORTED:case k.OUT_OF_RANGE:case k.UNIMPLEMENTED:case k.DATA_LOSS:return!0;default:return rt(15467,{code:e})}}function wd(e){if(e===void 0)return Ze("GRPC error has no .code"),k.UNKNOWN;switch(e){case xt.OK:return k.OK;case xt.CANCELLED:return k.CANCELLED;case xt.UNKNOWN:return k.UNKNOWN;case xt.DEADLINE_EXCEEDED:return k.DEADLINE_EXCEEDED;case xt.RESOURCE_EXHAUSTED:return k.RESOURCE_EXHAUSTED;case xt.INTERNAL:return k.INTERNAL;case xt.UNAVAILABLE:return k.UNAVAILABLE;case xt.UNAUTHENTICATED:return k.UNAUTHENTICATED;case xt.INVALID_ARGUMENT:return k.INVALID_ARGUMENT;case xt.NOT_FOUND:return k.NOT_FOUND;case xt.ALREADY_EXISTS:return k.ALREADY_EXISTS;case xt.PERMISSION_DENIED:return k.PERMISSION_DENIED;case xt.FAILED_PRECONDITION:return k.FAILED_PRECONDITION;case xt.ABORTED:return k.ABORTED;case xt.OUT_OF_RANGE:return k.OUT_OF_RANGE;case xt.UNIMPLEMENTED:return k.UNIMPLEMENTED;case xt.DATA_LOSS:return k.DATA_LOSS;default:return rt(39323,{code:e})}}(dt=xt||(xt={}))[dt.OK=0]="OK",dt[dt.CANCELLED=1]="CANCELLED",dt[dt.UNKNOWN=2]="UNKNOWN",dt[dt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",dt[dt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",dt[dt.NOT_FOUND=5]="NOT_FOUND",dt[dt.ALREADY_EXISTS=6]="ALREADY_EXISTS",dt[dt.PERMISSION_DENIED=7]="PERMISSION_DENIED",dt[dt.UNAUTHENTICATED=16]="UNAUTHENTICATED",dt[dt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",dt[dt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",dt[dt.ABORTED=10]="ABORTED",dt[dt.OUT_OF_RANGE=11]="OUT_OF_RANGE",dt[dt.UNIMPLEMENTED=12]="UNIMPLEMENTED",dt[dt.INTERNAL=13]="INTERNAL",dt[dt.UNAVAILABLE=14]="UNAVAILABLE",dt[dt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qv=new mn([4294967295,4294967295],0);function Hc(e){const t=Hf().encode(e),n=new Mf;return n.update(t),new Uint8Array(n.digest())}function zc(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),s=t.getUint32(8,!0),i=t.getUint32(12,!0);return[new mn([n,r],0),new mn([s,i],0)]}class _l{constructor(t,n,r){if(this.bitmap=t,this.padding=n,this.hashCount=r,n<0||n>=8)throw new es(`Invalid padding: ${n}`);if(r<0)throw new es(`Invalid hash count: ${r}`);if(t.length>0&&this.hashCount===0)throw new es(`Invalid hash count: ${r}`);if(t.length===0&&n!==0)throw new es(`Invalid padding when bitmap length is 0: ${n}`);this.pe=8*t.length-n,this.ye=mn.fromNumber(this.pe)}we(t,n,r){let s=t.add(n.multiply(mn.fromNumber(r)));return s.compare(qv)===1&&(s=new mn([s.getBits(0),s.getBits(1)],0)),s.modulo(this.ye).toNumber()}Se(t){return!!(this.bitmap[Math.floor(t/8)]&1<<t%8)}mightContain(t){if(this.pe===0)return!1;const n=Hc(t),[r,s]=zc(n);for(let i=0;i<this.hashCount;i++){const a=this.we(r,s,i);if(!this.Se(a))return!1}return!0}static create(t,n,r){const s=t%8==0?0:8-t%8,i=new Uint8Array(Math.ceil(t/8)),a=new _l(i,s,n);return r.forEach(l=>a.insert(l)),a}insert(t){if(this.pe===0)return;const n=Hc(t),[r,s]=zc(n);for(let i=0;i<this.hashCount;i++){const a=this.we(r,s,i);this.be(a)}}be(t){const n=Math.floor(t/8),r=t%8;this.bitmap[n]|=1<<r}}class es extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _o{constructor(t,n,r,s,i){this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(t,n,r){const s=new Map;return s.set(t,Ds.createSynthesizedTargetChangeForCurrentChange(t,n,r)),new _o(ot.min(),s,new St(ct),tn(),ht())}}class Ds{constructor(t,n,r,s,i){this.resumeToken=t,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(t,n,r){return new Ds(r,n,ht(),ht(),ht())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gi{constructor(t,n,r,s){this.De=t,this.removedTargetIds=n,this.key=r,this.ve=s}}class Id{constructor(t,n){this.targetId=t,this.Ce=n}}class Ad{constructor(t,n,r=Wt.EMPTY_BYTE_STRING,s=null){this.state=t,this.targetIds=n,this.resumeToken=r,this.cause=s}}class Kc{constructor(){this.Fe=0,this.Me=Gc(),this.xe=Wt.EMPTY_BYTE_STRING,this.Oe=!1,this.Ne=!0}get current(){return this.Oe}get resumeToken(){return this.xe}get Be(){return this.Fe!==0}get Le(){return this.Ne}ke(t){t.approximateByteSize()>0&&(this.Ne=!0,this.xe=t)}qe(){let t=ht(),n=ht(),r=ht();return this.Me.forEach((s,i)=>{switch(i){case 0:t=t.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:rt(38017,{changeType:i})}}),new Ds(this.xe,this.Oe,t,n,r)}Qe(){this.Ne=!1,this.Me=Gc()}$e(t,n){this.Ne=!0,this.Me=this.Me.insert(t,n)}Ue(t){this.Ne=!0,this.Me=this.Me.remove(t)}Ke(){this.Fe+=1}We(){this.Fe-=1,vt(this.Fe>=0,3241,{Fe:this.Fe})}Ge(){this.Ne=!0,this.Oe=!0}}class Hv{constructor(t){this.ze=t,this.je=new Map,this.He=tn(),this.Je=oi(),this.Ye=oi(),this.Ze=new St(ct)}Xe(t){for(const n of t.De)t.ve&&t.ve.isFoundDocument()?this.et(n,t.ve):this.tt(n,t.key,t.ve);for(const n of t.removedTargetIds)this.tt(n,t.key,t.ve)}nt(t){this.forEachTarget(t,n=>{const r=this.rt(n);switch(t.state){case 0:this.it(n)&&r.ke(t.resumeToken);break;case 1:r.We(),r.Be||r.Qe(),r.ke(t.resumeToken);break;case 2:r.We(),r.Be||this.removeTarget(n);break;case 3:this.it(n)&&(r.Ge(),r.ke(t.resumeToken));break;case 4:this.it(n)&&(this.st(n),r.ke(t.resumeToken));break;default:rt(56790,{state:t.state})}})}forEachTarget(t,n){t.targetIds.length>0?t.targetIds.forEach(n):this.je.forEach((r,s)=>{this.it(s)&&n(s)})}ot(t){const n=t.targetId,r=t.Ce.count,s=this._t(n);if(s){const i=s.target;if(Va(i))if(r===0){const a=new et(i.path);this.tt(n,a,se.newNoDocument(a,ot.min()))}else vt(r===1,20013,{expectedCount:r});else{const a=this.ut(n);if(a!==r){const l=this.ct(t),c=l?this.lt(l,t,a):1;if(c!==0){this.st(n);const f=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(n,f)}}}}}ct(t){const n=t.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let a,l;try{a=In(r).toUint8Array()}catch(c){if(c instanceof Wf)return Er("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{l=new _l(a,s,i)}catch(c){return Er(c instanceof es?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return l.pe===0?null:l}lt(t,n,r){return n.Ce.count===r-this.Tt(t,n.targetId)?0:2}Tt(t,n){const r=this.ze.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const a=this.ze.Pt(),l=`projects/${a.projectId}/databases/${a.database}/documents/${i.path.canonicalString()}`;t.mightContain(l)||(this.tt(n,i,null),s++)}),s}It(t){const n=new Map;this.je.forEach((i,a)=>{const l=this._t(a);if(l){if(i.current&&Va(l.target)){const c=new et(l.target.path);this.Et(c).has(a)||this.dt(a,c)||this.tt(a,c,se.newNoDocument(c,t))}i.Le&&(n.set(a,i.qe()),i.Qe())}});let r=ht();this.Ye.forEach((i,a)=>{let l=!0;a.forEachWhile(c=>{const f=this._t(c);return!f||f.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(r=r.add(i))}),this.He.forEach((i,a)=>a.setReadTime(t));const s=new _o(t,n,this.Ze,this.He,r);return this.He=tn(),this.Je=oi(),this.Ye=oi(),this.Ze=new St(ct),s}et(t,n){if(!this.it(t))return;const r=this.dt(t,n.key)?2:0;this.rt(t).$e(n.key,r),this.He=this.He.insert(n.key,n),this.Je=this.Je.insert(n.key,this.Et(n.key).add(t)),this.Ye=this.Ye.insert(n.key,this.At(n.key).add(t))}tt(t,n,r){if(!this.it(t))return;const s=this.rt(t);this.dt(t,n)?s.$e(n,1):s.Ue(n),this.Ye=this.Ye.insert(n,this.At(n).delete(t)),this.Ye=this.Ye.insert(n,this.At(n).add(t)),r&&(this.He=this.He.insert(n,r))}removeTarget(t){this.je.delete(t)}ut(t){const n=this.rt(t).qe();return this.ze.getRemoteKeysForTarget(t).size+n.addedDocuments.size-n.removedDocuments.size}Ke(t){this.rt(t).Ke()}rt(t){let n=this.je.get(t);return n||(n=new Kc,this.je.set(t,n)),n}At(t){let n=this.Ye.get(t);return n||(n=new Ft(ct),this.Ye=this.Ye.insert(t,n)),n}Et(t){let n=this.Je.get(t);return n||(n=new Ft(ct),this.Je=this.Je.insert(t,n)),n}it(t){const n=this._t(t)!==null;return n||Y("WatchChangeAggregator","Detected inactive target",t),n}_t(t){const n=this.je.get(t);return n&&n.Be?null:this.ze.Rt(t)}st(t){this.je.set(t,new Kc),this.ze.getRemoteKeysForTarget(t).forEach(n=>{this.tt(t,n,null)})}dt(t,n){return this.ze.getRemoteKeysForTarget(t).has(n)}}function oi(){return new St(et.comparator)}function Gc(){return new St(et.comparator)}const zv={asc:"ASCENDING",desc:"DESCENDING"},Kv={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Gv={and:"AND",or:"OR"};class Wv{constructor(t,n){this.databaseId=t,this.useProto3Json=n}}function xa(e,t){return e.useProto3Json||uo(t)?t:{value:t}}function $i(e,t){return e.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function bd(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function Qv(e,t){return $i(e,t.toTimestamp())}function Oe(e){return vt(!!e,49232),ot.fromTimestamp(function(n){const r=wn(n);return new Lt(r.seconds,r.nanos)}(e))}function yl(e,t){return Na(e,t).canonicalString()}function Na(e,t){const n=function(s){return new Rt(["projects",s.projectId,"databases",s.database])}(e).child("documents");return t===void 0?n:n.child(t)}function Cd(e){const t=Rt.fromString(e);return vt(Dd(t),10190,{key:t.toString()}),t}function Oa(e,t){return yl(e.databaseId,t.path)}function oa(e,t){const n=Cd(t);if(n.get(1)!==e.databaseId.projectId)throw new Z(k.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new Z(k.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new et(Sd(n))}function Rd(e,t){return yl(e.databaseId,t)}function Yv(e){const t=Cd(e);return t.length===4?Rt.emptyPath():Sd(t)}function ka(e){return new Rt(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function Sd(e){return vt(e.length>4&&e.get(4)==="documents",29091,{key:e.toString()}),e.popFirst(5)}function Wc(e,t,n){return{name:Oa(e,t),fields:n.value.mapValue.fields}}function Xv(e,t){let n;if("targetChange"in t){t.targetChange;const r=function(f){return f==="NO_CHANGE"?0:f==="ADD"?1:f==="REMOVE"?2:f==="CURRENT"?3:f==="RESET"?4:rt(39313,{state:f})}(t.targetChange.targetChangeType||"NO_CHANGE"),s=t.targetChange.targetIds||[],i=function(f,d){return f.useProto3Json?(vt(d===void 0||typeof d=="string",58123),Wt.fromBase64String(d||"")):(vt(d===void 0||d instanceof Buffer||d instanceof Uint8Array,16193),Wt.fromUint8Array(d||new Uint8Array))}(e,t.targetChange.resumeToken),a=t.targetChange.cause,l=a&&function(f){const d=f.code===void 0?k.UNKNOWN:wd(f.code);return new Z(d,f.message||"")}(a);n=new Ad(r,s,i,l||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const s=oa(e,r.document.name),i=Oe(r.document.updateTime),a=r.document.createTime?Oe(r.document.createTime):ot.min(),l=new de({mapValue:{fields:r.document.fields}}),c=se.newFoundDocument(s,i,a,l),f=r.targetIds||[],d=r.removedTargetIds||[];n=new gi(f,d,c.key,c)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const s=oa(e,r.document),i=r.readTime?Oe(r.readTime):ot.min(),a=se.newNoDocument(s,i),l=r.removedTargetIds||[];n=new gi([],l,a.key,a)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const s=oa(e,r.document),i=r.removedTargetIds||[];n=new gi([],i,s,null)}else{if(!("filter"in t))return rt(11601,{Vt:t});{t.filter;const r=t.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,a=new $v(s,i),l=r.targetId;n=new Id(l,a)}}return n}function Jv(e,t){let n;if(t instanceof Vs)n={update:Wc(e,t.key,t.value)};else if(t instanceof Td)n={delete:Oa(e,t.key)};else if(t instanceof Pn)n={update:Wc(e,t.key,t.data),updateMask:aE(t.fieldMask)};else{if(!(t instanceof Fv))return rt(16599,{ft:t.type});n={verify:Oa(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(r=>function(i,a){const l=a.transform;if(l instanceof Bi)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof Cs)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof Rs)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof Ui)return{fieldPath:a.field.canonicalString(),increment:l.Re};throw rt(20930,{transform:a.transform})}(0,r))),t.precondition.isNone||(n.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:Qv(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:rt(27497)}(e,t.precondition)),n}function Zv(e,t){return e&&e.length>0?(vt(t!==void 0,14353),e.map(n=>function(s,i){let a=s.updateTime?Oe(s.updateTime):Oe(i);return a.isEqual(ot.min())&&(a=Oe(i)),new kv(a,s.transformResults||[])}(n,t))):[]}function tE(e,t){return{documents:[Rd(e,t.path)]}}function eE(e,t){const n={structuredQuery:{}},r=t.path;let s;t.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=Rd(e,s);const i=function(f){if(f.length!==0)return Vd(Fe.create(f,"and"))}(t.filters);i&&(n.structuredQuery.where=i);const a=function(f){if(f.length!==0)return f.map(d=>function(_){return{field:ar(_.field),direction:sE(_.dir)}}(d))}(t.orderBy);a&&(n.structuredQuery.orderBy=a);const l=xa(e,t.limit);return l!==null&&(n.structuredQuery.limit=l),t.startAt&&(n.structuredQuery.startAt=function(f){return{before:f.inclusive,values:f.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(f){return{before:!f.inclusive,values:f.position}}(t.endAt)),{gt:n,parent:s}}function nE(e){let t=Yv(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){vt(r===1,65062);const d=n.from[0];d.allDescendants?s=d.collectionId:t=t.child(d.collectionId)}let i=[];n.where&&(i=function(m){const _=Pd(m);return _ instanceof Fe&&sd(_)?_.getFilters():[_]}(n.where));let a=[];n.orderBy&&(a=function(m){return m.map(_=>function(D){return new Fi(lr(D.field),function(M){switch(M){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(D.direction))}(_))}(n.orderBy));let l=null;n.limit&&(l=function(m){let _;return _=typeof m=="object"?m.value:m,uo(_)?null:_}(n.limit));let c=null;n.startAt&&(c=function(m){const _=!!m.before,b=m.values||[];return new Li(b,_)}(n.startAt));let f=null;return n.endAt&&(f=function(m){const _=!m.before,b=m.values||[];return new Li(b,_)}(n.endAt)),Tv(t,s,a,i,l,"F",c,f)}function rE(e,t){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return rt(28987,{purpose:s})}}(t.purpose);return n==null?null:{"goog-listen-tags":n}}function Pd(e){return e.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=lr(n.unaryFilter.field);return Mt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=lr(n.unaryFilter.field);return Mt.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=lr(n.unaryFilter.field);return Mt.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=lr(n.unaryFilter.field);return Mt.create(a,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return rt(61313);default:return rt(60726)}}(e):e.fieldFilter!==void 0?function(n){return Mt.create(lr(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return rt(58110);default:return rt(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(e):e.compositeFilter!==void 0?function(n){return Fe.create(n.compositeFilter.filters.map(r=>Pd(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return rt(1026)}}(n.compositeFilter.op))}(e):rt(30097,{filter:e})}function sE(e){return zv[e]}function iE(e){return Kv[e]}function oE(e){return Gv[e]}function ar(e){return{fieldPath:e.canonicalString()}}function lr(e){return Gt.fromServerFormat(e.fieldPath)}function Vd(e){return e instanceof Mt?function(n){if(n.op==="=="){if(kc(n.value))return{unaryFilter:{field:ar(n.field),op:"IS_NAN"}};if(Oc(n.value))return{unaryFilter:{field:ar(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(kc(n.value))return{unaryFilter:{field:ar(n.field),op:"IS_NOT_NAN"}};if(Oc(n.value))return{unaryFilter:{field:ar(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ar(n.field),op:iE(n.op),value:n.value}}}(e):e instanceof Fe?function(n){const r=n.getFilters().map(s=>Vd(s));return r.length===1?r[0]:{compositeFilter:{op:oE(n.op),filters:r}}}(e):rt(54877,{filter:e})}function aE(e){const t=[];return e.fields.forEach(n=>t.push(n.canonicalString())),{fieldPaths:t}}function Dd(e){return e.length>=4&&e.get(0)==="projects"&&e.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hn{constructor(t,n,r,s,i=ot.min(),a=ot.min(),l=Wt.EMPTY_BYTE_STRING,c=null){this.target=t,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=l,this.expectedCount=c}withSequenceNumber(t){return new hn(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,n){return new hn(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new hn(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new hn(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lE{constructor(t){this.wt=t}}function uE(e){const t=nE({parent:e.parent,structuredQuery:e.structuredQuery});return e.limitType==="LAST"?Da(t,t.limit,"L"):t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cE{constructor(){this.Cn=new hE}addToCollectionParentIndex(t,n){return this.Cn.add(n),x.resolve()}getCollectionParents(t,n){return x.resolve(this.Cn.getEntries(n))}addFieldIndex(t,n){return x.resolve()}deleteFieldIndex(t,n){return x.resolve()}deleteAllFieldIndexes(t){return x.resolve()}createTargetIndexes(t,n){return x.resolve()}getDocumentsMatchingTarget(t,n){return x.resolve(null)}getIndexType(t,n){return x.resolve(0)}getFieldIndexes(t,n){return x.resolve([])}getNextCollectionGroupToUpdate(t){return x.resolve(null)}getMinOffset(t,n){return x.resolve(Tn.min())}getMinOffsetFromCollectionGroup(t,n){return x.resolve(Tn.min())}updateCollectionGroup(t,n,r){return x.resolve()}updateIndexEntries(t,n){return x.resolve()}}class hE{constructor(){this.index={}}add(t){const n=t.lastSegment(),r=t.popLast(),s=this.index[n]||new Ft(Rt.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(t){const n=t.lastSegment(),r=t.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(t){return(this.index[t]||new Ft(Rt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qc={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},xd=41943040;class fe{static withCacheSize(t){return new fe(t,fe.DEFAULT_COLLECTION_PERCENTILE,fe.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(t,n,r){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */fe.DEFAULT_COLLECTION_PERCENTILE=10,fe.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,fe.DEFAULT=new fe(xd,fe.DEFAULT_COLLECTION_PERCENTILE,fe.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),fe.DISABLED=new fe(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ar{constructor(t){this.ur=t}next(){return this.ur+=2,this.ur}static cr(){return new Ar(0)}static lr(){return new Ar(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yc="LruGarbageCollector",fE=1048576;function Xc([e,t],[n,r]){const s=ct(e,n);return s===0?ct(t,r):s}class dE{constructor(t){this.Er=t,this.buffer=new Ft(Xc),this.dr=0}Ar(){return++this.dr}Rr(t){const n=[t,this.Ar()];if(this.buffer.size<this.Er)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();Xc(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class pE{constructor(t,n,r){this.garbageCollector=t,this.asyncQueue=n,this.localStore=r,this.Vr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.mr(6e4)}stop(){this.Vr&&(this.Vr.cancel(),this.Vr=null)}get started(){return this.Vr!==null}mr(t){Y(Yc,`Garbage collection scheduled in ${t}ms`),this.Vr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,async()=>{this.Vr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Dr(n)?Y(Yc,"Ignoring IndexedDB error during garbage collection: ",n):await Vr(n)}await this.mr(3e5)})}}class mE{constructor(t,n){this.gr=t,this.params=n}calculateTargetCount(t,n){return this.gr.pr(t).next(r=>Math.floor(n/100*r))}nthSequenceNumber(t,n){if(n===0)return x.resolve(lo.le);const r=new dE(n);return this.gr.forEachTarget(t,s=>r.Rr(s.sequenceNumber)).next(()=>this.gr.yr(t,s=>r.Rr(s))).next(()=>r.maxValue)}removeTargets(t,n,r){return this.gr.removeTargets(t,n,r)}removeOrphanedDocuments(t,n){return this.gr.removeOrphanedDocuments(t,n)}collect(t,n){return this.params.cacheSizeCollectionThreshold===-1?(Y("LruGarbageCollector","Garbage collection skipped; disabled"),x.resolve(Qc)):this.getCacheSize(t).next(r=>r<this.params.cacheSizeCollectionThreshold?(Y("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Qc):this.wr(t,n))}getCacheSize(t){return this.gr.getCacheSize(t)}wr(t,n){let r,s,i,a,l,c,f;const d=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(m=>(m>this.params.maximumSequenceNumbersToCollect?(Y("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${m}`),s=this.params.maximumSequenceNumbersToCollect):s=m,a=Date.now(),this.nthSequenceNumber(t,s))).next(m=>(r=m,l=Date.now(),this.removeTargets(t,r,n))).next(m=>(i=m,c=Date.now(),this.removeOrphanedDocuments(t,r))).next(m=>(f=Date.now(),ir()<=pt.DEBUG&&Y("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${a-d}ms
	Determined least recently used ${s} in `+(l-a)+`ms
	Removed ${i} targets in `+(c-l)+`ms
	Removed ${m} documents in `+(f-c)+`ms
Total Duration: ${f-d}ms`),x.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:i,documentsRemoved:m})))}}function gE(e,t){return new mE(e,t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _E{constructor(){this.changes=new Qn(t=>t.toString(),(t,n)=>t.isEqual(n)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,n){this.assertNotApplied(),this.changes.set(t,se.newInvalidDocument(t).setReadTime(n))}getEntry(t,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?x.resolve(r):this.getFromCache(t,n)}getEntries(t,n){return this.getAllFromCache(t,n)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yE{constructor(t,n){this.overlayedDocument=t,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vE{constructor(t,n,r,s){this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(t,n){let r=null;return this.documentOverlayCache.getOverlay(t,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(t,n))).next(s=>(r!==null&&fs(r.mutation,s,ye.empty(),Lt.now()),s))}getDocuments(t,n){return this.remoteDocumentCache.getEntries(t,n).next(r=>this.getLocalViewOfDocuments(t,r,ht()).next(()=>r))}getLocalViewOfDocuments(t,n,r=ht()){const s=qn();return this.populateOverlays(t,s,n).next(()=>this.computeViews(t,n,s,r).next(i=>{let a=ts();return i.forEach((l,c)=>{a=a.insert(l,c.overlayedDocument)}),a}))}getOverlayedDocuments(t,n){const r=qn();return this.populateOverlays(t,r,n).next(()=>this.computeViews(t,n,r,ht()))}populateOverlays(t,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(t,s).next(i=>{i.forEach((a,l)=>{n.set(a,l)})})}computeViews(t,n,r,s){let i=tn();const a=hs(),l=function(){return hs()}();return n.forEach((c,f)=>{const d=r.get(f.key);s.has(f.key)&&(d===void 0||d.mutation instanceof Pn)?i=i.insert(f.key,f):d!==void 0?(a.set(f.key,d.mutation.getFieldMask()),fs(d.mutation,f,d.mutation.getFieldMask(),Lt.now())):a.set(f.key,ye.empty())}),this.recalculateAndSaveOverlays(t,i).next(c=>(c.forEach((f,d)=>a.set(f,d)),n.forEach((f,d)=>{var m;return l.set(f,new yE(d,(m=a.get(f))!==null&&m!==void 0?m:null))}),l))}recalculateAndSaveOverlays(t,n){const r=hs();let s=new St((a,l)=>a-l),i=ht();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,n).next(a=>{for(const l of a)l.keys().forEach(c=>{const f=n.get(c);if(f===null)return;let d=r.get(c)||ye.empty();d=l.applyToLocalView(f,d),r.set(c,d);const m=(s.get(l.batchId)||ht()).add(c);s=s.insert(l.batchId,m)})}).next(()=>{const a=[],l=s.getReverseIterator();for(;l.hasNext();){const c=l.getNext(),f=c.key,d=c.value,m=dd();d.forEach(_=>{if(!i.has(_)){const b=vd(n.get(_),r.get(_));b!==null&&m.set(_,b),i=i.add(_)}}),a.push(this.documentOverlayCache.saveOverlays(t,f,m))}return x.waitFor(a)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(t,n){return this.remoteDocumentCache.getEntries(t,n).next(r=>this.recalculateAndSaveOverlays(t,r))}getDocumentsMatchingQuery(t,n,r,s){return function(a){return et.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(t,n.path):wv(n)?this.getDocumentsMatchingCollectionGroupQuery(t,n,r,s):this.getDocumentsMatchingCollectionQuery(t,n,r,s)}getNextDocuments(t,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(t,n,r,s).next(i=>{const a=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,n,r.largestBatchId,s-i.size):x.resolve(qn());let l=ws,c=i;return a.next(f=>x.forEach(f,(d,m)=>(l<m.largestBatchId&&(l=m.largestBatchId),i.get(d)?x.resolve():this.remoteDocumentCache.getEntry(t,d).next(_=>{c=c.insert(d,_)}))).next(()=>this.populateOverlays(t,f,i)).next(()=>this.computeViews(t,c,f,ht())).next(d=>({batchId:l,changes:fd(d)})))})}getDocumentsMatchingDocumentQuery(t,n){return this.getDocument(t,new et(n)).next(r=>{let s=ts();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(t,n,r,s){const i=n.collectionGroup;let a=ts();return this.indexManager.getCollectionParents(t,i).next(l=>x.forEach(l,c=>{const f=function(m,_){return new ho(_,null,m.explicitOrderBy.slice(),m.filters.slice(),m.limit,m.limitType,m.startAt,m.endAt)}(n,c.child(i));return this.getDocumentsMatchingCollectionQuery(t,f,r,s).next(d=>{d.forEach((m,_)=>{a=a.insert(m,_)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(t,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(t,n.path,r.largestBatchId).next(a=>(i=a,this.remoteDocumentCache.getDocumentsMatchingQuery(t,n,r,i,s))).next(a=>{i.forEach((c,f)=>{const d=f.getKey();a.get(d)===null&&(a=a.insert(d,se.newInvalidDocument(d)))});let l=ts();return a.forEach((c,f)=>{const d=i.get(c);d!==void 0&&fs(d.mutation,f,ye.empty(),Lt.now()),po(n,f)&&(l=l.insert(c,f))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EE{constructor(t){this.serializer=t,this.kr=new Map,this.qr=new Map}getBundleMetadata(t,n){return x.resolve(this.kr.get(n))}saveBundleMetadata(t,n){return this.kr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:Oe(s.createTime)}}(n)),x.resolve()}getNamedQuery(t,n){return x.resolve(this.qr.get(n))}saveNamedQuery(t,n){return this.qr.set(n.name,function(s){return{name:s.name,query:uE(s.bundledQuery),readTime:Oe(s.readTime)}}(n)),x.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TE{constructor(){this.overlays=new St(et.comparator),this.Qr=new Map}getOverlay(t,n){return x.resolve(this.overlays.get(n))}getOverlays(t,n){const r=qn();return x.forEach(n,s=>this.getOverlay(t,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(t,n,r){return r.forEach((s,i)=>{this.bt(t,n,i)}),x.resolve()}removeOverlaysForBatchId(t,n,r){const s=this.Qr.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.Qr.delete(r)),x.resolve()}getOverlaysForCollection(t,n,r){const s=qn(),i=n.length+1,a=new et(n.child("")),l=this.overlays.getIteratorFrom(a);for(;l.hasNext();){const c=l.getNext().value,f=c.getKey();if(!n.isPrefixOf(f.path))break;f.path.length===i&&c.largestBatchId>r&&s.set(c.getKey(),c)}return x.resolve(s)}getOverlaysForCollectionGroup(t,n,r,s){let i=new St((f,d)=>f-d);const a=this.overlays.getIterator();for(;a.hasNext();){const f=a.getNext().value;if(f.getKey().getCollectionGroup()===n&&f.largestBatchId>r){let d=i.get(f.largestBatchId);d===null&&(d=qn(),i=i.insert(f.largestBatchId,d)),d.set(f.getKey(),f)}}const l=qn(),c=i.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((f,d)=>l.set(f,d)),!(l.size()>=s)););return x.resolve(l)}bt(t,n,r){const s=this.overlays.get(r.key);if(s!==null){const a=this.Qr.get(s.largestBatchId).delete(r.key);this.Qr.set(s.largestBatchId,a)}this.overlays=this.overlays.insert(r.key,new Uv(n,r));let i=this.Qr.get(n);i===void 0&&(i=ht(),this.Qr.set(n,i)),this.Qr.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wE{constructor(){this.sessionToken=Wt.EMPTY_BYTE_STRING}getSessionToken(t){return x.resolve(this.sessionToken)}setSessionToken(t,n){return this.sessionToken=n,x.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vl{constructor(){this.$r=new Ft(Bt.Ur),this.Kr=new Ft(Bt.Wr)}isEmpty(){return this.$r.isEmpty()}addReference(t,n){const r=new Bt(t,n);this.$r=this.$r.add(r),this.Kr=this.Kr.add(r)}Gr(t,n){t.forEach(r=>this.addReference(r,n))}removeReference(t,n){this.zr(new Bt(t,n))}jr(t,n){t.forEach(r=>this.removeReference(r,n))}Hr(t){const n=new et(new Rt([])),r=new Bt(n,t),s=new Bt(n,t+1),i=[];return this.Kr.forEachInRange([r,s],a=>{this.zr(a),i.push(a.key)}),i}Jr(){this.$r.forEach(t=>this.zr(t))}zr(t){this.$r=this.$r.delete(t),this.Kr=this.Kr.delete(t)}Yr(t){const n=new et(new Rt([])),r=new Bt(n,t),s=new Bt(n,t+1);let i=ht();return this.Kr.forEachInRange([r,s],a=>{i=i.add(a.key)}),i}containsKey(t){const n=new Bt(t,0),r=this.$r.firstAfterOrEqual(n);return r!==null&&t.isEqual(r.key)}}class Bt{constructor(t,n){this.key=t,this.Zr=n}static Ur(t,n){return et.comparator(t.key,n.key)||ct(t.Zr,n.Zr)}static Wr(t,n){return ct(t.Zr,n.Zr)||et.comparator(t.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IE{constructor(t,n){this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.nr=1,this.Xr=new Ft(Bt.Ur)}checkEmpty(t){return x.resolve(this.mutationQueue.length===0)}addMutationBatch(t,n,r,s){const i=this.nr;this.nr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new Bv(i,n,r,s);this.mutationQueue.push(a);for(const l of s)this.Xr=this.Xr.add(new Bt(l.key,i)),this.indexManager.addToCollectionParentIndex(t,l.key.path.popLast());return x.resolve(a)}lookupMutationBatch(t,n){return x.resolve(this.ei(n))}getNextMutationBatchAfterBatchId(t,n){const r=n+1,s=this.ti(r),i=s<0?0:s;return x.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return x.resolve(this.mutationQueue.length===0?cl:this.nr-1)}getAllMutationBatches(t){return x.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,n){const r=new Bt(n,0),s=new Bt(n,Number.POSITIVE_INFINITY),i=[];return this.Xr.forEachInRange([r,s],a=>{const l=this.ei(a.Zr);i.push(l)}),x.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(t,n){let r=new Ft(ct);return n.forEach(s=>{const i=new Bt(s,0),a=new Bt(s,Number.POSITIVE_INFINITY);this.Xr.forEachInRange([i,a],l=>{r=r.add(l.Zr)})}),x.resolve(this.ni(r))}getAllMutationBatchesAffectingQuery(t,n){const r=n.path,s=r.length+1;let i=r;et.isDocumentKey(i)||(i=i.child(""));const a=new Bt(new et(i),0);let l=new Ft(ct);return this.Xr.forEachWhile(c=>{const f=c.key.path;return!!r.isPrefixOf(f)&&(f.length===s&&(l=l.add(c.Zr)),!0)},a),x.resolve(this.ni(l))}ni(t){const n=[];return t.forEach(r=>{const s=this.ei(r);s!==null&&n.push(s)}),n}removeMutationBatch(t,n){vt(this.ri(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Xr;return x.forEach(n.mutations,s=>{const i=new Bt(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(t,s.key)}).next(()=>{this.Xr=r})}sr(t){}containsKey(t,n){const r=new Bt(n,0),s=this.Xr.firstAfterOrEqual(r);return x.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(t){return this.mutationQueue.length,x.resolve()}ri(t,n){return this.ti(t)}ti(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}ei(t){const n=this.ti(t);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AE{constructor(t){this.ii=t,this.docs=function(){return new St(et.comparator)}(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,a=this.ii(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:a}),this.size+=a-i,this.indexManager.addToCollectionParentIndex(t,r.path.popLast())}removeEntry(t){const n=this.docs.get(t);n&&(this.docs=this.docs.remove(t),this.size-=n.size)}getEntry(t,n){const r=this.docs.get(n);return x.resolve(r?r.document.mutableCopy():se.newInvalidDocument(n))}getEntries(t,n){let r=tn();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():se.newInvalidDocument(s))}),x.resolve(r)}getDocumentsMatchingQuery(t,n,r,s){let i=tn();const a=n.path,l=new et(a.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(l);for(;c.hasNext();){const{key:f,value:{document:d}}=c.getNext();if(!a.isPrefixOf(f.path))break;f.path.length>a.length+1||Zy(Jy(d),r)<=0||(s.has(d.key)||po(n,d))&&(i=i.insert(d.key,d.mutableCopy()))}return x.resolve(i)}getAllFromCollectionGroup(t,n,r,s){rt(9500)}si(t,n){return x.forEach(this.docs,r=>n(r))}newChangeBuffer(t){return new bE(this)}getSize(t){return x.resolve(this.size)}}class bE extends _E{constructor(t){super(),this.Br=t}applyChanges(t){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.Br.addEntry(t,s)):this.Br.removeEntry(r)}),x.waitFor(n)}getFromCache(t,n){return this.Br.getEntry(t,n)}getAllFromCache(t,n){return this.Br.getEntries(t,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CE{constructor(t){this.persistence=t,this.oi=new Qn(n=>dl(n),pl),this.lastRemoteSnapshotVersion=ot.min(),this.highestTargetId=0,this._i=0,this.ai=new vl,this.targetCount=0,this.ui=Ar.cr()}forEachTarget(t,n){return this.oi.forEach((r,s)=>n(s)),x.resolve()}getLastRemoteSnapshotVersion(t){return x.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return x.resolve(this._i)}allocateTargetId(t){return this.highestTargetId=this.ui.next(),x.resolve(this.highestTargetId)}setTargetsMetadata(t,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this._i&&(this._i=n),x.resolve()}Tr(t){this.oi.set(t.target,t);const n=t.targetId;n>this.highestTargetId&&(this.ui=new Ar(n),this.highestTargetId=n),t.sequenceNumber>this._i&&(this._i=t.sequenceNumber)}addTargetData(t,n){return this.Tr(n),this.targetCount+=1,x.resolve()}updateTargetData(t,n){return this.Tr(n),x.resolve()}removeTargetData(t,n){return this.oi.delete(n.target),this.ai.Hr(n.targetId),this.targetCount-=1,x.resolve()}removeTargets(t,n,r){let s=0;const i=[];return this.oi.forEach((a,l)=>{l.sequenceNumber<=n&&r.get(l.targetId)===null&&(this.oi.delete(a),i.push(this.removeMatchingKeysForTargetId(t,l.targetId)),s++)}),x.waitFor(i).next(()=>s)}getTargetCount(t){return x.resolve(this.targetCount)}getTargetData(t,n){const r=this.oi.get(n)||null;return x.resolve(r)}addMatchingKeys(t,n,r){return this.ai.Gr(n,r),x.resolve()}removeMatchingKeys(t,n,r){this.ai.jr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(a=>{i.push(s.markPotentiallyOrphaned(t,a))}),x.waitFor(i)}removeMatchingKeysForTargetId(t,n){return this.ai.Hr(n),x.resolve()}getMatchingKeysForTargetId(t,n){const r=this.ai.Yr(n);return x.resolve(r)}containsKey(t,n){return x.resolve(this.ai.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nd{constructor(t,n){this.ci={},this.overlays={},this.li=new lo(0),this.hi=!1,this.hi=!0,this.Pi=new wE,this.referenceDelegate=t(this),this.Ti=new CE(this),this.indexManager=new cE,this.remoteDocumentCache=function(s){return new AE(s)}(r=>this.referenceDelegate.Ii(r)),this.serializer=new lE(n),this.Ei=new EE(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.hi=!1,Promise.resolve()}get started(){return this.hi}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let n=this.overlays[t.toKey()];return n||(n=new TE,this.overlays[t.toKey()]=n),n}getMutationQueue(t,n){let r=this.ci[t.toKey()];return r||(r=new IE(n,this.referenceDelegate),this.ci[t.toKey()]=r),r}getGlobalsCache(){return this.Pi}getTargetCache(){return this.Ti}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ei}runTransaction(t,n,r){Y("MemoryPersistence","Starting transaction:",t);const s=new RE(this.li.next());return this.referenceDelegate.di(),r(s).next(i=>this.referenceDelegate.Ai(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Ri(t,n){return x.or(Object.values(this.ci).map(r=>()=>r.containsKey(t,n)))}}class RE extends ev{constructor(t){super(),this.currentSequenceNumber=t}}class El{constructor(t){this.persistence=t,this.Vi=new vl,this.mi=null}static fi(t){return new El(t)}get gi(){if(this.mi)return this.mi;throw rt(60996)}addReference(t,n,r){return this.Vi.addReference(r,n),this.gi.delete(r.toString()),x.resolve()}removeReference(t,n,r){return this.Vi.removeReference(r,n),this.gi.add(r.toString()),x.resolve()}markPotentiallyOrphaned(t,n){return this.gi.add(n.toString()),x.resolve()}removeTarget(t,n){this.Vi.Hr(n.targetId).forEach(s=>this.gi.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(t,n.targetId).next(s=>{s.forEach(i=>this.gi.add(i.toString()))}).next(()=>r.removeTargetData(t,n))}di(){this.mi=new Set}Ai(t){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return x.forEach(this.gi,r=>{const s=et.fromPath(r);return this.pi(t,s).next(i=>{i||n.removeEntry(s,ot.min())})}).next(()=>(this.mi=null,n.apply(t)))}updateLimboDocument(t,n){return this.pi(t,n).next(r=>{r?this.gi.delete(n.toString()):this.gi.add(n.toString())})}Ii(t){return 0}pi(t,n){return x.or([()=>x.resolve(this.Vi.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(t,n),()=>this.persistence.Ri(t,n)])}}class ji{constructor(t,n){this.persistence=t,this.yi=new Qn(r=>sv(r.path),(r,s)=>r.isEqual(s)),this.garbageCollector=gE(this,n)}static fi(t,n){return new ji(t,n)}di(){}Ai(t){return x.resolve()}forEachTarget(t,n){return this.persistence.getTargetCache().forEachTarget(t,n)}pr(t){const n=this.Sr(t);return this.persistence.getTargetCache().getTargetCount(t).next(r=>n.next(s=>r+s))}Sr(t){let n=0;return this.yr(t,r=>{n++}).next(()=>n)}yr(t,n){return x.forEach(this.yi,(r,s)=>this.Dr(t,r,s).next(i=>i?x.resolve():n(s)))}removeTargets(t,n,r){return this.persistence.getTargetCache().removeTargets(t,n,r)}removeOrphanedDocuments(t,n){let r=0;const s=this.persistence.getRemoteDocumentCache(),i=s.newChangeBuffer();return s.si(t,a=>this.Dr(t,a,n).next(l=>{l||(r++,i.removeEntry(a,ot.min()))})).next(()=>i.apply(t)).next(()=>r)}markPotentiallyOrphaned(t,n){return this.yi.set(n,t.currentSequenceNumber),x.resolve()}removeTarget(t,n){const r=n.withSequenceNumber(t.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(t,r)}addReference(t,n,r){return this.yi.set(r,t.currentSequenceNumber),x.resolve()}removeReference(t,n,r){return this.yi.set(r,t.currentSequenceNumber),x.resolve()}updateLimboDocument(t,n){return this.yi.set(n,t.currentSequenceNumber),x.resolve()}Ii(t){let n=t.key.toString().length;return t.isFoundDocument()&&(n+=di(t.data.value)),n}Dr(t,n,r){return x.or([()=>this.persistence.Ri(t,n),()=>this.persistence.getTargetCache().containsKey(t,n),()=>{const s=this.yi.get(n);return x.resolve(s!==void 0&&s>r)}])}getCacheSize(t){return this.persistence.getRemoteDocumentCache().getSize(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tl{constructor(t,n,r,s){this.targetId=t,this.fromCache=n,this.ds=r,this.As=s}static Rs(t,n){let r=ht(),s=ht();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new Tl(t,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SE{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PE{constructor(){this.Vs=!1,this.fs=!1,this.gs=100,this.ps=function(){return w_()?8:nv(E_())>0?6:4}()}initialize(t,n){this.ys=t,this.indexManager=n,this.Vs=!0}getDocumentsMatchingQuery(t,n,r,s){const i={result:null};return this.ws(t,n).next(a=>{i.result=a}).next(()=>{if(!i.result)return this.Ss(t,n,s,r).next(a=>{i.result=a})}).next(()=>{if(i.result)return;const a=new SE;return this.bs(t,n,a).next(l=>{if(i.result=l,this.fs)return this.Ds(t,n,a,l.size)})}).next(()=>i.result)}Ds(t,n,r,s){return r.documentReadCount<this.gs?(ir()<=pt.DEBUG&&Y("QueryEngine","SDK will not create cache indexes for query:",or(n),"since it only creates cache indexes for collection contains","more than or equal to",this.gs,"documents"),x.resolve()):(ir()<=pt.DEBUG&&Y("QueryEngine","Query:",or(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.ps*s?(ir()<=pt.DEBUG&&Y("QueryEngine","The SDK decides to create cache indexes for query:",or(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,Ne(n))):x.resolve())}ws(t,n){if(Bc(n))return x.resolve(null);let r=Ne(n);return this.indexManager.getIndexType(t,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=Da(n,null,"F"),r=Ne(n)),this.indexManager.getDocumentsMatchingTarget(t,r).next(i=>{const a=ht(...i);return this.ys.getDocuments(t,a).next(l=>this.indexManager.getMinOffset(t,r).next(c=>{const f=this.vs(n,l);return this.Cs(n,f,a,c.readTime)?this.ws(t,Da(n,null,"F")):this.Fs(t,f,n,c)}))})))}Ss(t,n,r,s){return Bc(n)||s.isEqual(ot.min())?x.resolve(null):this.ys.getDocuments(t,r).next(i=>{const a=this.vs(n,i);return this.Cs(n,a,r,s)?x.resolve(null):(ir()<=pt.DEBUG&&Y("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),or(n)),this.Fs(t,a,n,Xy(s,ws)).next(l=>l))})}vs(t,n){let r=new Ft(cd(t));return n.forEach((s,i)=>{po(t,i)&&(r=r.add(i))}),r}Cs(t,n,r,s){if(t.limit===null)return!1;if(r.size!==n.size)return!0;const i=t.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}bs(t,n,r){return ir()<=pt.DEBUG&&Y("QueryEngine","Using full collection scan to execute query:",or(n)),this.ys.getDocumentsMatchingQuery(t,n,Tn.min(),r)}Fs(t,n,r,s){return this.ys.getDocumentsMatchingQuery(t,r,s).next(i=>(n.forEach(a=>{i=i.insert(a.key,a)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wl="LocalStore",VE=3e8;class DE{constructor(t,n,r,s){this.persistence=t,this.Ms=n,this.serializer=s,this.xs=new St(ct),this.Os=new Qn(i=>dl(i),pl),this.Ns=new Map,this.Bs=t.getRemoteDocumentCache(),this.Ti=t.getTargetCache(),this.Ei=t.getBundleCache(),this.Ls(r)}Ls(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new vE(this.Bs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Bs.setIndexManager(this.indexManager),this.Ms.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>t.collect(n,this.xs))}}function xE(e,t,n,r){return new DE(e,t,n,r)}async function Od(e,t){const n=at(e);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.Ls(t),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const a=[],l=[];let c=ht();for(const f of s){a.push(f.batchId);for(const d of f.mutations)c=c.add(d.key)}for(const f of i){l.push(f.batchId);for(const d of f.mutations)c=c.add(d.key)}return n.localDocuments.getDocuments(r,c).next(f=>({ks:f,removedBatchIds:a,addedBatchIds:l}))})})}function NE(e,t){const n=at(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=t.batch.keys(),i=n.Bs.newChangeBuffer({trackRemovals:!0});return function(l,c,f,d){const m=f.batch,_=m.keys();let b=x.resolve();return _.forEach(D=>{b=b.next(()=>d.getEntry(c,D)).next(L=>{const M=f.docVersions.get(D);vt(M!==null,48541),L.version.compareTo(M)<0&&(m.applyToRemoteDocument(L,f),L.isValidDocument()&&(L.setReadTime(f.commitVersion),d.addEntry(L)))})}),b.next(()=>l.mutationQueue.removeMutationBatch(c,m))}(n,r,t,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,t.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let c=ht();for(let f=0;f<l.mutationResults.length;++f)l.mutationResults[f].transformResults.length>0&&(c=c.add(l.batch.mutations[f].key));return c}(t))).next(()=>n.localDocuments.getDocuments(r,s))})}function kd(e){const t=at(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",n=>t.Ti.getLastRemoteSnapshotVersion(n))}function OE(e,t){const n=at(e),r=t.snapshotVersion;let s=n.xs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const a=n.Bs.newChangeBuffer({trackRemovals:!0});s=n.xs;const l=[];t.targetChanges.forEach((d,m)=>{const _=s.get(m);if(!_)return;l.push(n.Ti.removeMatchingKeys(i,d.removedDocuments,m).next(()=>n.Ti.addMatchingKeys(i,d.addedDocuments,m)));let b=_.withSequenceNumber(i.currentSequenceNumber);t.targetMismatches.get(m)!==null?b=b.withResumeToken(Wt.EMPTY_BYTE_STRING,ot.min()).withLastLimboFreeSnapshotVersion(ot.min()):d.resumeToken.approximateByteSize()>0&&(b=b.withResumeToken(d.resumeToken,r)),s=s.insert(m,b),function(L,M,X){return L.resumeToken.approximateByteSize()===0||M.snapshotVersion.toMicroseconds()-L.snapshotVersion.toMicroseconds()>=VE?!0:X.addedDocuments.size+X.modifiedDocuments.size+X.removedDocuments.size>0}(_,b,d)&&l.push(n.Ti.updateTargetData(i,b))});let c=tn(),f=ht();if(t.documentUpdates.forEach(d=>{t.resolvedLimboDocuments.has(d)&&l.push(n.persistence.referenceDelegate.updateLimboDocument(i,d))}),l.push(kE(i,a,t.documentUpdates).next(d=>{c=d.qs,f=d.Qs})),!r.isEqual(ot.min())){const d=n.Ti.getLastRemoteSnapshotVersion(i).next(m=>n.Ti.setTargetsMetadata(i,i.currentSequenceNumber,r));l.push(d)}return x.waitFor(l).next(()=>a.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,c,f)).next(()=>c)}).then(i=>(n.xs=s,i))}function kE(e,t,n){let r=ht(),s=ht();return n.forEach(i=>r=r.add(i)),t.getEntries(e,r).next(i=>{let a=tn();return n.forEach((l,c)=>{const f=i.get(l);c.isFoundDocument()!==f.isFoundDocument()&&(s=s.add(l)),c.isNoDocument()&&c.version.isEqual(ot.min())?(t.removeEntry(l,c.readTime),a=a.insert(l,c)):!f.isValidDocument()||c.version.compareTo(f.version)>0||c.version.compareTo(f.version)===0&&f.hasPendingWrites?(t.addEntry(c),a=a.insert(l,c)):Y(wl,"Ignoring outdated watch update for ",l,". Current version:",f.version," Watch version:",c.version)}),{qs:a,Qs:s}})}function ME(e,t){const n=at(e);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(t===void 0&&(t=cl),n.mutationQueue.getNextMutationBatchAfterBatchId(r,t)))}function LE(e,t){const n=at(e);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Ti.getTargetData(r,t).next(i=>i?(s=i,x.resolve(s)):n.Ti.allocateTargetId(r).next(a=>(s=new hn(t,a,"TargetPurposeListen",r.currentSequenceNumber),n.Ti.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.xs.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.xs=n.xs.insert(r.targetId,r),n.Os.set(t,r.targetId)),r})}async function Ma(e,t,n){const r=at(e),s=r.xs.get(t),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,a=>r.persistence.referenceDelegate.removeTarget(a,s))}catch(a){if(!Dr(a))throw a;Y(wl,`Failed to update sequence numbers for target ${t}: ${a}`)}r.xs=r.xs.remove(t),r.Os.delete(s.target)}function Jc(e,t,n){const r=at(e);let s=ot.min(),i=ht();return r.persistence.runTransaction("Execute query","readwrite",a=>function(c,f,d){const m=at(c),_=m.Os.get(d);return _!==void 0?x.resolve(m.xs.get(_)):m.Ti.getTargetData(f,d)}(r,a,Ne(t)).next(l=>{if(l)return s=l.lastLimboFreeSnapshotVersion,r.Ti.getMatchingKeysForTargetId(a,l.targetId).next(c=>{i=c})}).next(()=>r.Ms.getDocumentsMatchingQuery(a,t,n?s:ot.min(),n?i:ht())).next(l=>(FE(r,Av(t),l),{documents:l,$s:i})))}function FE(e,t,n){let r=e.Ns.get(t)||ot.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),e.Ns.set(t,r)}class Zc{constructor(){this.activeTargetIds=Vv()}js(t){this.activeTargetIds=this.activeTargetIds.add(t)}Hs(t){this.activeTargetIds=this.activeTargetIds.delete(t)}zs(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class BE{constructor(){this.xo=new Zc,this.Oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,n,r){}addLocalQueryTarget(t,n=!0){return n&&this.xo.js(t),this.Oo[t]||"not-current"}updateQueryState(t,n,r){this.Oo[t]=n}removeLocalQueryTarget(t){this.xo.Hs(t)}isLocalQueryTarget(t){return this.xo.activeTargetIds.has(t)}clearQueryState(t){delete this.Oo[t]}getAllActiveQueryTargets(){return this.xo.activeTargetIds}isActiveQueryTarget(t){return this.xo.activeTargetIds.has(t)}start(){return this.xo=new Zc,Promise.resolve()}handleUserChange(t,n,r){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UE{No(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const th="ConnectivityMonitor";class eh{constructor(){this.Bo=()=>this.Lo(),this.ko=()=>this.qo(),this.Qo=[],this.$o()}No(t){this.Qo.push(t)}shutdown(){window.removeEventListener("online",this.Bo),window.removeEventListener("offline",this.ko)}$o(){window.addEventListener("online",this.Bo),window.addEventListener("offline",this.ko)}Lo(){Y(th,"Network connectivity changed: AVAILABLE");for(const t of this.Qo)t(0)}qo(){Y(th,"Network connectivity changed: UNAVAILABLE");for(const t of this.Qo)t(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ai=null;function La(){return ai===null?ai=function(){return 268435456+Math.round(2147483648*Math.random())}():ai++,"0x"+ai.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aa="RestConnection",$E={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class jE{get Uo(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const n=t.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Ko=n+"://"+t.host,this.Wo=`projects/${r}/databases/${s}`,this.Go=this.databaseId.database===ki?`project_id=${r}`:`project_id=${r}&database_id=${s}`}zo(t,n,r,s,i){const a=La(),l=this.jo(t,n.toUriEncodedString());Y(aa,`Sending RPC '${t}' ${a}:`,l,r);const c={"google-cloud-resource-prefix":this.Wo,"x-goog-request-params":this.Go};this.Ho(c,s,i);const{host:f}=new URL(l),d=al(f);return this.Jo(t,l,c,r,d).then(m=>(Y(aa,`Received RPC '${t}' ${a}: `,m),m),m=>{throw Er(aa,`RPC '${t}' ${a} failed with error: `,m,"url: ",l,"request:",r),m})}Yo(t,n,r,s,i,a){return this.zo(t,n,r,s,i)}Ho(t,n,r){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Pr}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((s,i)=>t[i]=s),r&&r.headers.forEach((s,i)=>t[i]=s)}jo(t,n){const r=$E[t];return`${this.Ko}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qE{constructor(t){this.Zo=t.Zo,this.Xo=t.Xo}e_(t){this.t_=t}n_(t){this.r_=t}i_(t){this.s_=t}onMessage(t){this.o_=t}close(){this.Xo()}send(t){this.Zo(t)}__(){this.t_()}a_(){this.r_()}u_(t){this.s_(t)}c_(t){this.o_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zt="WebChannelConnection";class HE extends jE{constructor(t){super(t),this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Jo(t,n,r,s,i){const a=La();return new Promise((l,c)=>{const f=new Lf;f.setWithCredentials(!0),f.listenOnce(Ff.COMPLETE,()=>{try{switch(f.getLastErrorCode()){case fi.NO_ERROR:const m=f.getResponseJson();Y(Zt,`XHR for RPC '${t}' ${a} received:`,JSON.stringify(m)),l(m);break;case fi.TIMEOUT:Y(Zt,`RPC '${t}' ${a} timed out`),c(new Z(k.DEADLINE_EXCEEDED,"Request time out"));break;case fi.HTTP_ERROR:const _=f.getStatus();if(Y(Zt,`RPC '${t}' ${a} failed with status:`,_,"response text:",f.getResponseText()),_>0){let b=f.getResponseJson();Array.isArray(b)&&(b=b[0]);const D=b==null?void 0:b.error;if(D&&D.status&&D.message){const L=function(X){const O=X.toLowerCase().replace(/_/g,"-");return Object.values(k).indexOf(O)>=0?O:k.UNKNOWN}(D.status);c(new Z(L,D.message))}else c(new Z(k.UNKNOWN,"Server responded with status "+f.getStatus()))}else c(new Z(k.UNAVAILABLE,"Connection failed."));break;default:rt(9055,{l_:t,streamId:a,h_:f.getLastErrorCode(),P_:f.getLastError()})}}finally{Y(Zt,`RPC '${t}' ${a} completed.`)}});const d=JSON.stringify(s);Y(Zt,`RPC '${t}' ${a} sending request:`,s),f.send(n,"POST",d,r,15)})}T_(t,n,r){const s=La(),i=[this.Ko,"/","google.firestore.v1.Firestore","/",t,"/channel"],a=$f(),l=Uf(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},f=this.longPollingOptions.timeoutSeconds;f!==void 0&&(c.longPollingTimeout=Math.round(1e3*f)),this.useFetchStreams&&(c.useFetchStreams=!0),this.Ho(c.initMessageHeaders,n,r),c.encodeInitMessageHeaders=!0;const d=i.join("");Y(Zt,`Creating RPC '${t}' stream ${s}: ${d}`,c);const m=a.createWebChannel(d,c);let _=!1,b=!1;const D=new qE({Zo:M=>{b?Y(Zt,`Not sending because RPC '${t}' stream ${s} is closed:`,M):(_||(Y(Zt,`Opening RPC '${t}' stream ${s} transport.`),m.open(),_=!0),Y(Zt,`RPC '${t}' stream ${s} sending:`,M),m.send(M))},Xo:()=>m.close()}),L=(M,X,O)=>{M.listen(X,$=>{try{O($)}catch(S){setTimeout(()=>{throw S},0)}})};return L(m,Zr.EventType.OPEN,()=>{b||(Y(Zt,`RPC '${t}' stream ${s} transport opened.`),D.__())}),L(m,Zr.EventType.CLOSE,()=>{b||(b=!0,Y(Zt,`RPC '${t}' stream ${s} transport closed`),D.u_())}),L(m,Zr.EventType.ERROR,M=>{b||(b=!0,Er(Zt,`RPC '${t}' stream ${s} transport errored. Name:`,M.name,"Message:",M.message),D.u_(new Z(k.UNAVAILABLE,"The operation could not be completed")))}),L(m,Zr.EventType.MESSAGE,M=>{var X;if(!b){const O=M.data[0];vt(!!O,16349);const $=O,S=($==null?void 0:$.error)||((X=$[0])===null||X===void 0?void 0:X.error);if(S){Y(Zt,`RPC '${t}' stream ${s} received error:`,S);const z=S.status;let W=function(E){const T=xt[E];if(T!==void 0)return wd(T)}(z),w=S.message;W===void 0&&(W=k.INTERNAL,w="Unknown error status: "+z+" with message "+S.message),b=!0,D.u_(new Z(W,w)),m.close()}else Y(Zt,`RPC '${t}' stream ${s} received:`,O),D.c_(O)}}),L(l,Bf.STAT_EVENT,M=>{M.stat===ba.PROXY?Y(Zt,`RPC '${t}' stream ${s} detected buffering proxy`):M.stat===ba.NOPROXY&&Y(Zt,`RPC '${t}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{D.a_()},0),D}}function la(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yo(e){return new Wv(e,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Md{constructor(t,n,r=1e3,s=1.5,i=6e4){this.xi=t,this.timerId=n,this.I_=r,this.E_=s,this.d_=i,this.A_=0,this.R_=null,this.V_=Date.now(),this.reset()}reset(){this.A_=0}m_(){this.A_=this.d_}f_(t){this.cancel();const n=Math.floor(this.A_+this.g_()),r=Math.max(0,Date.now()-this.V_),s=Math.max(0,n-r);s>0&&Y("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.A_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.R_=this.xi.enqueueAfterDelay(this.timerId,s,()=>(this.V_=Date.now(),t())),this.A_*=this.E_,this.A_<this.I_&&(this.A_=this.I_),this.A_>this.d_&&(this.A_=this.d_)}p_(){this.R_!==null&&(this.R_.skipDelay(),this.R_=null)}cancel(){this.R_!==null&&(this.R_.cancel(),this.R_=null)}g_(){return(Math.random()-.5)*this.A_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nh="PersistentStream";class Ld{constructor(t,n,r,s,i,a,l,c){this.xi=t,this.y_=r,this.w_=s,this.connection=i,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=l,this.listener=c,this.state=0,this.S_=0,this.b_=null,this.D_=null,this.stream=null,this.v_=0,this.C_=new Md(t,n)}F_(){return this.state===1||this.state===5||this.M_()}M_(){return this.state===2||this.state===3}start(){this.v_=0,this.state!==4?this.auth():this.x_()}async stop(){this.F_()&&await this.close(0)}O_(){this.state=0,this.C_.reset()}N_(){this.M_()&&this.b_===null&&(this.b_=this.xi.enqueueAfterDelay(this.y_,6e4,()=>this.B_()))}L_(t){this.k_(),this.stream.send(t)}async B_(){if(this.M_())return this.close(0)}k_(){this.b_&&(this.b_.cancel(),this.b_=null)}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}async close(t,n){this.k_(),this.q_(),this.C_.cancel(),this.S_++,t!==4?this.C_.reset():n&&n.code===k.RESOURCE_EXHAUSTED?(Ze(n.toString()),Ze("Using maximum backoff delay to prevent overloading the backend."),this.C_.m_()):n&&n.code===k.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.Q_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.i_(n)}Q_(){}auth(){this.state=1;const t=this.U_(this.S_),n=this.S_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.S_===n&&this.K_(r,s)},r=>{t(()=>{const s=new Z(k.UNKNOWN,"Fetching auth token failed: "+r.message);return this.W_(s)})})}K_(t,n){const r=this.U_(this.S_);this.stream=this.G_(t,n),this.stream.e_(()=>{r(()=>this.listener.e_())}),this.stream.n_(()=>{r(()=>(this.state=2,this.D_=this.xi.enqueueAfterDelay(this.w_,1e4,()=>(this.M_()&&(this.state=3),Promise.resolve())),this.listener.n_()))}),this.stream.i_(s=>{r(()=>this.W_(s))}),this.stream.onMessage(s=>{r(()=>++this.v_==1?this.z_(s):this.onNext(s))})}x_(){this.state=5,this.C_.f_(async()=>{this.state=0,this.start()})}W_(t){return Y(nh,`close with error: ${t}`),this.stream=null,this.close(4,t)}U_(t){return n=>{this.xi.enqueueAndForget(()=>this.S_===t?n():(Y(nh,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class zE extends Ld{constructor(t,n,r,s,i,a){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,a),this.serializer=i}G_(t,n){return this.connection.T_("Listen",t,n)}z_(t){return this.onNext(t)}onNext(t){this.C_.reset();const n=Xv(this.serializer,t),r=function(i){if(!("targetChange"in i))return ot.min();const a=i.targetChange;return a.targetIds&&a.targetIds.length?ot.min():a.readTime?Oe(a.readTime):ot.min()}(t);return this.listener.j_(n,r)}H_(t){const n={};n.database=ka(this.serializer),n.addTarget=function(i,a){let l;const c=a.target;if(l=Va(c)?{documents:tE(i,c)}:{query:eE(i,c).gt},l.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){l.resumeToken=bd(i,a.resumeToken);const f=xa(i,a.expectedCount);f!==null&&(l.expectedCount=f)}else if(a.snapshotVersion.compareTo(ot.min())>0){l.readTime=$i(i,a.snapshotVersion.toTimestamp());const f=xa(i,a.expectedCount);f!==null&&(l.expectedCount=f)}return l}(this.serializer,t);const r=rE(this.serializer,t);r&&(n.labels=r),this.L_(n)}J_(t){const n={};n.database=ka(this.serializer),n.removeTarget=t,this.L_(n)}}class KE extends Ld{constructor(t,n,r,s,i,a){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,a),this.serializer=i}get Y_(){return this.v_>0}start(){this.lastStreamToken=void 0,super.start()}Q_(){this.Y_&&this.Z_([])}G_(t,n){return this.connection.T_("Write",t,n)}z_(t){return vt(!!t.streamToken,31322),this.lastStreamToken=t.streamToken,vt(!t.writeResults||t.writeResults.length===0,55816),this.listener.X_()}onNext(t){vt(!!t.streamToken,12678),this.lastStreamToken=t.streamToken,this.C_.reset();const n=Zv(t.writeResults,t.commitTime),r=Oe(t.commitTime);return this.listener.ea(r,n)}ta(){const t={};t.database=ka(this.serializer),this.L_(t)}Z_(t){const n={streamToken:this.lastStreamToken,writes:t.map(r=>Jv(this.serializer,r))};this.L_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GE{}class WE extends GE{constructor(t,n,r,s){super(),this.authCredentials=t,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.na=!1}ra(){if(this.na)throw new Z(k.FAILED_PRECONDITION,"The client has already been terminated.")}zo(t,n,r,s){return this.ra(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,a])=>this.connection.zo(t,Na(n,r),s,i,a)).catch(i=>{throw i.name==="FirebaseError"?(i.code===k.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Z(k.UNKNOWN,i.toString())})}Yo(t,n,r,s,i){return this.ra(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,l])=>this.connection.Yo(t,Na(n,r),s,a,l,i)).catch(a=>{throw a.name==="FirebaseError"?(a.code===k.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new Z(k.UNKNOWN,a.toString())})}terminate(){this.na=!0,this.connection.terminate()}}class QE{constructor(t,n){this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.ia=0,this.sa=null,this.oa=!0}_a(){this.ia===0&&(this.aa("Unknown"),this.sa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.sa=null,this.ua("Backend didn't respond within 10 seconds."),this.aa("Offline"),Promise.resolve())))}ca(t){this.state==="Online"?this.aa("Unknown"):(this.ia++,this.ia>=1&&(this.la(),this.ua(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.aa("Offline")))}set(t){this.la(),this.ia=0,t==="Online"&&(this.oa=!1),this.aa(t)}aa(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}ua(t){const n=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.oa?(Ze(n),this.oa=!1):Y("OnlineStateTracker",n)}la(){this.sa!==null&&(this.sa.cancel(),this.sa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gn="RemoteStore";class YE{constructor(t,n,r,s,i){this.localStore=t,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.ha=[],this.Pa=new Map,this.Ta=new Set,this.Ia=[],this.Ea=i,this.Ea.No(a=>{r.enqueueAndForget(async()=>{Yn(this)&&(Y(Gn,"Restarting streams for network reachability change."),await async function(c){const f=at(c);f.Ta.add(4),await xs(f),f.da.set("Unknown"),f.Ta.delete(4),await vo(f)}(this))})}),this.da=new QE(r,s)}}async function vo(e){if(Yn(e))for(const t of e.Ia)await t(!0)}async function xs(e){for(const t of e.Ia)await t(!1)}function Fd(e,t){const n=at(e);n.Pa.has(t.targetId)||(n.Pa.set(t.targetId,t),Cl(n)?bl(n):xr(n).M_()&&Al(n,t))}function Il(e,t){const n=at(e),r=xr(n);n.Pa.delete(t),r.M_()&&Bd(n,t),n.Pa.size===0&&(r.M_()?r.N_():Yn(n)&&n.da.set("Unknown"))}function Al(e,t){if(e.Aa.Ke(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(ot.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}xr(e).H_(t)}function Bd(e,t){e.Aa.Ke(t),xr(e).J_(t)}function bl(e){e.Aa=new Hv({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),Rt:t=>e.Pa.get(t)||null,Pt:()=>e.datastore.serializer.databaseId}),xr(e).start(),e.da._a()}function Cl(e){return Yn(e)&&!xr(e).F_()&&e.Pa.size>0}function Yn(e){return at(e).Ta.size===0}function Ud(e){e.Aa=void 0}async function XE(e){e.da.set("Online")}async function JE(e){e.Pa.forEach((t,n)=>{Al(e,t)})}async function ZE(e,t){Ud(e),Cl(e)?(e.da.ca(t),bl(e)):e.da.set("Unknown")}async function tT(e,t,n){if(e.da.set("Online"),t instanceof Ad&&t.state===2&&t.cause)try{await async function(s,i){const a=i.cause;for(const l of i.targetIds)s.Pa.has(l)&&(await s.remoteSyncer.rejectListen(l,a),s.Pa.delete(l),s.Aa.removeTarget(l))}(e,t)}catch(r){Y(Gn,"Failed to remove targets %s: %s ",t.targetIds.join(","),r),await qi(e,r)}else if(t instanceof gi?e.Aa.Xe(t):t instanceof Id?e.Aa.ot(t):e.Aa.nt(t),!n.isEqual(ot.min()))try{const r=await kd(e.localStore);n.compareTo(r)>=0&&await function(i,a){const l=i.Aa.It(a);return l.targetChanges.forEach((c,f)=>{if(c.resumeToken.approximateByteSize()>0){const d=i.Pa.get(f);d&&i.Pa.set(f,d.withResumeToken(c.resumeToken,a))}}),l.targetMismatches.forEach((c,f)=>{const d=i.Pa.get(c);if(!d)return;i.Pa.set(c,d.withResumeToken(Wt.EMPTY_BYTE_STRING,d.snapshotVersion)),Bd(i,c);const m=new hn(d.target,c,f,d.sequenceNumber);Al(i,m)}),i.remoteSyncer.applyRemoteEvent(l)}(e,n)}catch(r){Y(Gn,"Failed to raise snapshot:",r),await qi(e,r)}}async function qi(e,t,n){if(!Dr(t))throw t;e.Ta.add(1),await xs(e),e.da.set("Offline"),n||(n=()=>kd(e.localStore)),e.asyncQueue.enqueueRetryable(async()=>{Y(Gn,"Retrying IndexedDB access"),await n(),e.Ta.delete(1),await vo(e)})}function $d(e,t){return t().catch(n=>qi(e,n,t))}async function Eo(e){const t=at(e),n=bn(t);let r=t.ha.length>0?t.ha[t.ha.length-1].batchId:cl;for(;eT(t);)try{const s=await ME(t.localStore,r);if(s===null){t.ha.length===0&&n.N_();break}r=s.batchId,nT(t,s)}catch(s){await qi(t,s)}jd(t)&&qd(t)}function eT(e){return Yn(e)&&e.ha.length<10}function nT(e,t){e.ha.push(t);const n=bn(e);n.M_()&&n.Y_&&n.Z_(t.mutations)}function jd(e){return Yn(e)&&!bn(e).F_()&&e.ha.length>0}function qd(e){bn(e).start()}async function rT(e){bn(e).ta()}async function sT(e){const t=bn(e);for(const n of e.ha)t.Z_(n.mutations)}async function iT(e,t,n){const r=e.ha.shift(),s=gl.from(r,t,n);await $d(e,()=>e.remoteSyncer.applySuccessfulWrite(s)),await Eo(e)}async function oT(e,t){t&&bn(e).Y_&&await async function(r,s){if(function(a){return jv(a)&&a!==k.ABORTED}(s.code)){const i=r.ha.shift();bn(r).O_(),await $d(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await Eo(r)}}(e,t),jd(e)&&qd(e)}async function rh(e,t){const n=at(e);n.asyncQueue.verifyOperationInProgress(),Y(Gn,"RemoteStore received new credentials");const r=Yn(n);n.Ta.add(3),await xs(n),r&&n.da.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.Ta.delete(3),await vo(n)}async function aT(e,t){const n=at(e);t?(n.Ta.delete(2),await vo(n)):t||(n.Ta.add(2),await xs(n),n.da.set("Unknown"))}function xr(e){return e.Ra||(e.Ra=function(n,r,s){const i=at(n);return i.ra(),new zE(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(e.datastore,e.asyncQueue,{e_:XE.bind(null,e),n_:JE.bind(null,e),i_:ZE.bind(null,e),j_:tT.bind(null,e)}),e.Ia.push(async t=>{t?(e.Ra.O_(),Cl(e)?bl(e):e.da.set("Unknown")):(await e.Ra.stop(),Ud(e))})),e.Ra}function bn(e){return e.Va||(e.Va=function(n,r,s){const i=at(n);return i.ra(),new KE(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(e.datastore,e.asyncQueue,{e_:()=>Promise.resolve(),n_:rT.bind(null,e),i_:oT.bind(null,e),X_:sT.bind(null,e),ea:iT.bind(null,e)}),e.Ia.push(async t=>{t?(e.Va.O_(),await Eo(e)):(await e.Va.stop(),e.ha.length>0&&(Y(Gn,`Stopping write stream with ${e.ha.length} pending writes`),e.ha=[]))})),e.Va}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rl{constructor(t,n,r,s,i){this.asyncQueue=t,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new gn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(t,n,r,s,i){const a=Date.now()+r,l=new Rl(t,n,a,s,i);return l.start(r),l}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Z(k.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Sl(e,t){if(Ze("AsyncQueue",`${t}: ${e}`),Dr(e))return new Z(k.UNAVAILABLE,`${t}: ${e}`);throw e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vr{static emptySet(t){return new vr(t.comparator)}constructor(t){this.comparator=t?(n,r)=>t(n,r)||et.comparator(n.key,r.key):(n,r)=>et.comparator(n.key,r.key),this.keyedMap=ts(),this.sortedSet=new St(this.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const n=this.keyedMap.get(t);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((n,r)=>(t(n),!1))}add(t){const n=this.delete(t.key);return n.copy(n.keyedMap.insert(t.key,t),n.sortedSet.insert(t,null))}delete(t){const n=this.get(t);return n?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(n)):this}isEqual(t){if(!(t instanceof vr)||this.size!==t.size)return!1;const n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const t=[];return this.forEach(n=>{t.push(n.toString())}),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,n){const r=new vr;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sh{constructor(){this.ma=new St(et.comparator)}track(t){const n=t.doc.key,r=this.ma.get(n);r?t.type!==0&&r.type===3?this.ma=this.ma.insert(n,t):t.type===3&&r.type!==1?this.ma=this.ma.insert(n,{type:r.type,doc:t.doc}):t.type===2&&r.type===2?this.ma=this.ma.insert(n,{type:2,doc:t.doc}):t.type===2&&r.type===0?this.ma=this.ma.insert(n,{type:0,doc:t.doc}):t.type===1&&r.type===0?this.ma=this.ma.remove(n):t.type===1&&r.type===2?this.ma=this.ma.insert(n,{type:1,doc:r.doc}):t.type===0&&r.type===1?this.ma=this.ma.insert(n,{type:2,doc:t.doc}):rt(63341,{Vt:t,fa:r}):this.ma=this.ma.insert(n,t)}ga(){const t=[];return this.ma.inorderTraversal((n,r)=>{t.push(r)}),t}}class br{constructor(t,n,r,s,i,a,l,c,f){this.query=t,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=a,this.syncStateChanged=l,this.excludesMetadataChanges=c,this.hasCachedResults=f}static fromInitialDocuments(t,n,r,s,i){const a=[];return n.forEach(l=>{a.push({type:0,doc:l})}),new br(t,n,vr.emptySet(n),a,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&fo(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const n=this.docChanges,r=t.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lT{constructor(){this.pa=void 0,this.ya=[]}wa(){return this.ya.some(t=>t.Sa())}}class uT{constructor(){this.queries=ih(),this.onlineState="Unknown",this.ba=new Set}terminate(){(function(n,r){const s=at(n),i=s.queries;s.queries=ih(),i.forEach((a,l)=>{for(const c of l.ya)c.onError(r)})})(this,new Z(k.ABORTED,"Firestore shutting down"))}}function ih(){return new Qn(e=>ud(e),fo)}async function cT(e,t){const n=at(e);let r=3;const s=t.query;let i=n.queries.get(s);i?!i.wa()&&t.Sa()&&(r=2):(i=new lT,r=t.Sa()?0:1);try{switch(r){case 0:i.pa=await n.onListen(s,!0);break;case 1:i.pa=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(a){const l=Sl(a,`Initialization of query '${or(t.query)}' failed`);return void t.onError(l)}n.queries.set(s,i),i.ya.push(t),t.Da(n.onlineState),i.pa&&t.va(i.pa)&&Pl(n)}async function hT(e,t){const n=at(e),r=t.query;let s=3;const i=n.queries.get(r);if(i){const a=i.ya.indexOf(t);a>=0&&(i.ya.splice(a,1),i.ya.length===0?s=t.Sa()?0:1:!i.wa()&&t.Sa()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function fT(e,t){const n=at(e);let r=!1;for(const s of t){const i=s.query,a=n.queries.get(i);if(a){for(const l of a.ya)l.va(s)&&(r=!0);a.pa=s}}r&&Pl(n)}function dT(e,t,n){const r=at(e),s=r.queries.get(t);if(s)for(const i of s.ya)i.onError(n);r.queries.delete(t)}function Pl(e){e.ba.forEach(t=>{t.next()})}var Fa,oh;(oh=Fa||(Fa={})).Ca="default",oh.Cache="cache";class pT{constructor(t,n,r){this.query=t,this.Fa=n,this.Ma=!1,this.xa=null,this.onlineState="Unknown",this.options=r||{}}va(t){if(!this.options.includeMetadataChanges){const r=[];for(const s of t.docChanges)s.type!==3&&r.push(s);t=new br(t.query,t.docs,t.oldDocs,r,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let n=!1;return this.Ma?this.Oa(t)&&(this.Fa.next(t),n=!0):this.Na(t,this.onlineState)&&(this.Ba(t),n=!0),this.xa=t,n}onError(t){this.Fa.error(t)}Da(t){this.onlineState=t;let n=!1;return this.xa&&!this.Ma&&this.Na(this.xa,t)&&(this.Ba(this.xa),n=!0),n}Na(t,n){if(!t.fromCache||!this.Sa())return!0;const r=n!=="Offline";return(!this.options.La||!r)&&(!t.docs.isEmpty()||t.hasCachedResults||n==="Offline")}Oa(t){if(t.docChanges.length>0)return!0;const n=this.xa&&this.xa.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}Ba(t){t=br.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.Ma=!0,this.Fa.next(t)}Sa(){return this.options.source!==Fa.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hd{constructor(t){this.key=t}}class zd{constructor(t){this.key=t}}class mT{constructor(t,n){this.query=t,this.Ga=n,this.za=null,this.hasCachedResults=!1,this.current=!1,this.ja=ht(),this.mutatedKeys=ht(),this.Ha=cd(t),this.Ja=new vr(this.Ha)}get Ya(){return this.Ga}Za(t,n){const r=n?n.Xa:new sh,s=n?n.Ja:this.Ja;let i=n?n.mutatedKeys:this.mutatedKeys,a=s,l=!1;const c=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,f=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(t.inorderTraversal((d,m)=>{const _=s.get(d),b=po(this.query,m)?m:null,D=!!_&&this.mutatedKeys.has(_.key),L=!!b&&(b.hasLocalMutations||this.mutatedKeys.has(b.key)&&b.hasCommittedMutations);let M=!1;_&&b?_.data.isEqual(b.data)?D!==L&&(r.track({type:3,doc:b}),M=!0):this.eu(_,b)||(r.track({type:2,doc:b}),M=!0,(c&&this.Ha(b,c)>0||f&&this.Ha(b,f)<0)&&(l=!0)):!_&&b?(r.track({type:0,doc:b}),M=!0):_&&!b&&(r.track({type:1,doc:_}),M=!0,(c||f)&&(l=!0)),M&&(b?(a=a.add(b),i=L?i.add(d):i.delete(d)):(a=a.delete(d),i=i.delete(d)))}),this.query.limit!==null)for(;a.size>this.query.limit;){const d=this.query.limitType==="F"?a.last():a.first();a=a.delete(d.key),i=i.delete(d.key),r.track({type:1,doc:d})}return{Ja:a,Xa:r,Cs:l,mutatedKeys:i}}eu(t,n){return t.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(t,n,r,s){const i=this.Ja;this.Ja=t.Ja,this.mutatedKeys=t.mutatedKeys;const a=t.Xa.ga();a.sort((d,m)=>function(b,D){const L=M=>{switch(M){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return rt(20277,{Vt:M})}};return L(b)-L(D)}(d.type,m.type)||this.Ha(d.doc,m.doc)),this.tu(r),s=s!=null&&s;const l=n&&!s?this.nu():[],c=this.ja.size===0&&this.current&&!s?1:0,f=c!==this.za;return this.za=c,a.length!==0||f?{snapshot:new br(this.query,t.Ja,i,a,t.mutatedKeys,c===0,f,!1,!!r&&r.resumeToken.approximateByteSize()>0),ru:l}:{ru:l}}Da(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({Ja:this.Ja,Xa:new sh,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{ru:[]}}iu(t){return!this.Ga.has(t)&&!!this.Ja.has(t)&&!this.Ja.get(t).hasLocalMutations}tu(t){t&&(t.addedDocuments.forEach(n=>this.Ga=this.Ga.add(n)),t.modifiedDocuments.forEach(n=>{}),t.removedDocuments.forEach(n=>this.Ga=this.Ga.delete(n)),this.current=t.current)}nu(){if(!this.current)return[];const t=this.ja;this.ja=ht(),this.Ja.forEach(r=>{this.iu(r.key)&&(this.ja=this.ja.add(r.key))});const n=[];return t.forEach(r=>{this.ja.has(r)||n.push(new zd(r))}),this.ja.forEach(r=>{t.has(r)||n.push(new Hd(r))}),n}su(t){this.Ga=t.$s,this.ja=ht();const n=this.Za(t.documents);return this.applyChanges(n,!0)}ou(){return br.fromInitialDocuments(this.query,this.Ja,this.mutatedKeys,this.za===0,this.hasCachedResults)}}const Vl="SyncEngine";class gT{constructor(t,n,r){this.query=t,this.targetId=n,this.view=r}}class _T{constructor(t){this.key=t,this._u=!1}}class yT{constructor(t,n,r,s,i,a){this.localStore=t,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=a,this.au={},this.uu=new Qn(l=>ud(l),fo),this.cu=new Map,this.lu=new Set,this.hu=new St(et.comparator),this.Pu=new Map,this.Tu=new vl,this.Iu={},this.Eu=new Map,this.du=Ar.lr(),this.onlineState="Unknown",this.Au=void 0}get isPrimaryClient(){return this.Au===!0}}async function vT(e,t,n=!0){const r=Xd(e);let s;const i=r.uu.get(t);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.ou()):s=await Kd(r,t,n,!0),s}async function ET(e,t){const n=Xd(e);await Kd(n,t,!0,!1)}async function Kd(e,t,n,r){const s=await LE(e.localStore,Ne(t)),i=s.targetId,a=e.sharedClientState.addLocalQueryTarget(i,n);let l;return r&&(l=await TT(e,t,i,a==="current",s.resumeToken)),e.isPrimaryClient&&n&&Fd(e.remoteStore,s),l}async function TT(e,t,n,r,s){e.Ru=(m,_,b)=>async function(L,M,X,O){let $=M.view.Za(X);$.Cs&&($=await Jc(L.localStore,M.query,!1).then(({documents:w})=>M.view.Za(w,$)));const S=O&&O.targetChanges.get(M.targetId),z=O&&O.targetMismatches.get(M.targetId)!=null,W=M.view.applyChanges($,L.isPrimaryClient,S,z);return lh(L,M.targetId,W.ru),W.snapshot}(e,m,_,b);const i=await Jc(e.localStore,t,!0),a=new mT(t,i.$s),l=a.Za(i.documents),c=Ds.createSynthesizedTargetChangeForCurrentChange(n,r&&e.onlineState!=="Offline",s),f=a.applyChanges(l,e.isPrimaryClient,c);lh(e,n,f.ru);const d=new gT(t,n,a);return e.uu.set(t,d),e.cu.has(n)?e.cu.get(n).push(t):e.cu.set(n,[t]),f.snapshot}async function wT(e,t,n){const r=at(e),s=r.uu.get(t),i=r.cu.get(s.targetId);if(i.length>1)return r.cu.set(s.targetId,i.filter(a=>!fo(a,t))),void r.uu.delete(t);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await Ma(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&Il(r.remoteStore,s.targetId),Ba(r,s.targetId)}).catch(Vr)):(Ba(r,s.targetId),await Ma(r.localStore,s.targetId,!0))}async function IT(e,t){const n=at(e),r=n.uu.get(t),s=n.cu.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Il(n.remoteStore,r.targetId))}async function AT(e,t,n){const r=DT(e);try{const s=await function(a,l){const c=at(a),f=Lt.now(),d=l.reduce((b,D)=>b.add(D.key),ht());let m,_;return c.persistence.runTransaction("Locally write mutations","readwrite",b=>{let D=tn(),L=ht();return c.Bs.getEntries(b,d).next(M=>{D=M,D.forEach((X,O)=>{O.isValidDocument()||(L=L.add(X))})}).next(()=>c.localDocuments.getOverlayedDocuments(b,D)).next(M=>{m=M;const X=[];for(const O of l){const $=Lv(O,m.get(O.key).overlayedDocument);$!=null&&X.push(new Pn(O.key,$,ed($.value.mapValue),Se.exists(!0)))}return c.mutationQueue.addMutationBatch(b,f,X,l)}).next(M=>{_=M;const X=M.applyToLocalDocumentSet(m,L);return c.documentOverlayCache.saveOverlays(b,M.batchId,X)})}).then(()=>({batchId:_.batchId,changes:fd(m)}))}(r.localStore,t);r.sharedClientState.addPendingMutation(s.batchId),function(a,l,c){let f=a.Iu[a.currentUser.toKey()];f||(f=new St(ct)),f=f.insert(l,c),a.Iu[a.currentUser.toKey()]=f}(r,s.batchId,n),await Ns(r,s.changes),await Eo(r.remoteStore)}catch(s){const i=Sl(s,"Failed to persist write");n.reject(i)}}async function Gd(e,t){const n=at(e);try{const r=await OE(n.localStore,t);t.targetChanges.forEach((s,i)=>{const a=n.Pu.get(i);a&&(vt(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?a._u=!0:s.modifiedDocuments.size>0?vt(a._u,14607):s.removedDocuments.size>0&&(vt(a._u,42227),a._u=!1))}),await Ns(n,r,t)}catch(r){await Vr(r)}}function ah(e,t,n){const r=at(e);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.uu.forEach((i,a)=>{const l=a.view.Da(t);l.snapshot&&s.push(l.snapshot)}),function(a,l){const c=at(a);c.onlineState=l;let f=!1;c.queries.forEach((d,m)=>{for(const _ of m.ya)_.Da(l)&&(f=!0)}),f&&Pl(c)}(r.eventManager,t),s.length&&r.au.j_(s),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function bT(e,t,n){const r=at(e);r.sharedClientState.updateQueryState(t,"rejected",n);const s=r.Pu.get(t),i=s&&s.key;if(i){let a=new St(et.comparator);a=a.insert(i,se.newNoDocument(i,ot.min()));const l=ht().add(i),c=new _o(ot.min(),new Map,new St(ct),a,l);await Gd(r,c),r.hu=r.hu.remove(i),r.Pu.delete(t),Dl(r)}else await Ma(r.localStore,t,!1).then(()=>Ba(r,t,n)).catch(Vr)}async function CT(e,t){const n=at(e),r=t.batch.batchId;try{const s=await NE(n.localStore,t);Qd(n,r,null),Wd(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Ns(n,s)}catch(s){await Vr(s)}}async function RT(e,t,n){const r=at(e);try{const s=await function(a,l){const c=at(a);return c.persistence.runTransaction("Reject batch","readwrite-primary",f=>{let d;return c.mutationQueue.lookupMutationBatch(f,l).next(m=>(vt(m!==null,37113),d=m.keys(),c.mutationQueue.removeMutationBatch(f,m))).next(()=>c.mutationQueue.performConsistencyCheck(f)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(f,d,l)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(f,d)).next(()=>c.localDocuments.getDocuments(f,d))})}(r.localStore,t);Qd(r,t,n),Wd(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await Ns(r,s)}catch(s){await Vr(s)}}function Wd(e,t){(e.Eu.get(t)||[]).forEach(n=>{n.resolve()}),e.Eu.delete(t)}function Qd(e,t,n){const r=at(e);let s=r.Iu[r.currentUser.toKey()];if(s){const i=s.get(t);i&&(n?i.reject(n):i.resolve(),s=s.remove(t)),r.Iu[r.currentUser.toKey()]=s}}function Ba(e,t,n=null){e.sharedClientState.removeLocalQueryTarget(t);for(const r of e.cu.get(t))e.uu.delete(r),n&&e.au.Vu(r,n);e.cu.delete(t),e.isPrimaryClient&&e.Tu.Hr(t).forEach(r=>{e.Tu.containsKey(r)||Yd(e,r)})}function Yd(e,t){e.lu.delete(t.path.canonicalString());const n=e.hu.get(t);n!==null&&(Il(e.remoteStore,n),e.hu=e.hu.remove(t),e.Pu.delete(n),Dl(e))}function lh(e,t,n){for(const r of n)r instanceof Hd?(e.Tu.addReference(r.key,t),ST(e,r)):r instanceof zd?(Y(Vl,"Document no longer in limbo: "+r.key),e.Tu.removeReference(r.key,t),e.Tu.containsKey(r.key)||Yd(e,r.key)):rt(19791,{mu:r})}function ST(e,t){const n=t.key,r=n.path.canonicalString();e.hu.get(n)||e.lu.has(r)||(Y(Vl,"New document in limbo: "+n),e.lu.add(r),Dl(e))}function Dl(e){for(;e.lu.size>0&&e.hu.size<e.maxConcurrentLimboResolutions;){const t=e.lu.values().next().value;e.lu.delete(t);const n=new et(Rt.fromString(t)),r=e.du.next();e.Pu.set(r,new _T(n)),e.hu=e.hu.insert(n,r),Fd(e.remoteStore,new hn(Ne(ld(n.path)),r,"TargetPurposeLimboResolution",lo.le))}}async function Ns(e,t,n){const r=at(e),s=[],i=[],a=[];r.uu.isEmpty()||(r.uu.forEach((l,c)=>{a.push(r.Ru(c,t,n).then(f=>{var d;if((f||n)&&r.isPrimaryClient){const m=f?!f.fromCache:(d=n==null?void 0:n.targetChanges.get(c.targetId))===null||d===void 0?void 0:d.current;r.sharedClientState.updateQueryState(c.targetId,m?"current":"not-current")}if(f){s.push(f);const m=Tl.Rs(c.targetId,f);i.push(m)}}))}),await Promise.all(a),r.au.j_(s),await async function(c,f){const d=at(c);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",m=>x.forEach(f,_=>x.forEach(_.ds,b=>d.persistence.referenceDelegate.addReference(m,_.targetId,b)).next(()=>x.forEach(_.As,b=>d.persistence.referenceDelegate.removeReference(m,_.targetId,b)))))}catch(m){if(!Dr(m))throw m;Y(wl,"Failed to update sequence numbers: "+m)}for(const m of f){const _=m.targetId;if(!m.fromCache){const b=d.xs.get(_),D=b.snapshotVersion,L=b.withLastLimboFreeSnapshotVersion(D);d.xs=d.xs.insert(_,L)}}}(r.localStore,i))}async function PT(e,t){const n=at(e);if(!n.currentUser.isEqual(t)){Y(Vl,"User change. New user:",t.toKey());const r=await Od(n.localStore,t);n.currentUser=t,function(i,a){i.Eu.forEach(l=>{l.forEach(c=>{c.reject(new Z(k.CANCELLED,a))})}),i.Eu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,r.removedBatchIds,r.addedBatchIds),await Ns(n,r.ks)}}function VT(e,t){const n=at(e),r=n.Pu.get(t);if(r&&r._u)return ht().add(r.key);{let s=ht();const i=n.cu.get(t);if(!i)return s;for(const a of i){const l=n.uu.get(a);s=s.unionWith(l.view.Ya)}return s}}function Xd(e){const t=at(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=Gd.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=VT.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=bT.bind(null,t),t.au.j_=fT.bind(null,t.eventManager),t.au.Vu=dT.bind(null,t.eventManager),t}function DT(e){const t=at(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=CT.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=RT.bind(null,t),t}class Hi{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=yo(t.databaseInfo.databaseId),this.sharedClientState=this.pu(t),this.persistence=this.yu(t),await this.persistence.start(),this.localStore=this.wu(t),this.gcScheduler=this.Su(t,this.localStore),this.indexBackfillerScheduler=this.bu(t,this.localStore)}Su(t,n){return null}bu(t,n){return null}wu(t){return xE(this.persistence,new PE,t.initialUser,this.serializer)}yu(t){return new Nd(El.fi,this.serializer)}pu(t){return new BE}async terminate(){var t,n;(t=this.gcScheduler)===null||t===void 0||t.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Hi.provider={build:()=>new Hi};class xT extends Hi{constructor(t){super(),this.cacheSizeBytes=t}Su(t,n){vt(this.persistence.referenceDelegate instanceof ji,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new pE(r,t.asyncQueue,n)}yu(t){const n=this.cacheSizeBytes!==void 0?fe.withCacheSize(this.cacheSizeBytes):fe.DEFAULT;return new Nd(r=>ji.fi(r,n),this.serializer)}}class Ua{async initialize(t,n){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>ah(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=PT.bind(null,this.syncEngine),await aT(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return function(){return new uT}()}createDatastore(t){const n=yo(t.databaseInfo.databaseId),r=function(i){return new HE(i)}(t.databaseInfo);return function(i,a,l,c){return new WE(i,a,l,c)}(t.authCredentials,t.appCheckCredentials,r,n)}createRemoteStore(t){return function(r,s,i,a,l){return new YE(r,s,i,a,l)}(this.localStore,this.datastore,t.asyncQueue,n=>ah(this.syncEngine,n,0),function(){return eh.C()?new eh:new UE}())}createSyncEngine(t,n){return function(s,i,a,l,c,f,d){const m=new yT(s,i,a,l,c,f);return d&&(m.Au=!0),m}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,n)}async terminate(){var t,n;await async function(s){const i=at(s);Y(Gn,"RemoteStore shutting down."),i.Ta.add(5),await xs(i),i.Ea.shutdown(),i.da.set("Unknown")}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}Ua.provider={build:()=>new Ua};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NT{constructor(t){this.observer=t,this.muted=!1}next(t){this.muted||this.observer.next&&this.vu(this.observer.next,t)}error(t){this.muted||(this.observer.error?this.vu(this.observer.error,t):Ze("Uncaught Error in snapshot listener:",t.toString()))}Cu(){this.muted=!0}vu(t,n){setTimeout(()=>{this.muted||t(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cn="FirestoreClient";class OT{constructor(t,n,r,s,i){this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=te.UNAUTHENTICATED,this.clientId=zf.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,async a=>{Y(Cn,"Received user=",a.uid),await this.authCredentialListener(a),this.user=a}),this.appCheckCredentials.start(r,a=>(Y(Cn,"Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();const t=new gn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(n){const r=Sl(n,"Failed to shutdown persistence");t.reject(r)}}),t.promise}}async function ua(e,t){e.asyncQueue.verifyOperationInProgress(),Y(Cn,"Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener(async s=>{r.isEqual(s)||(await Od(t.localStore,s),r=s)}),t.persistence.setDatabaseDeletedListener(()=>e.terminate()),e._offlineComponents=t}async function uh(e,t){e.asyncQueue.verifyOperationInProgress();const n=await kT(e);Y(Cn,"Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener(r=>rh(t.remoteStore,r)),e.setAppCheckTokenChangeListener((r,s)=>rh(t.remoteStore,s)),e._onlineComponents=t}async function kT(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){Y(Cn,"Using user provided OfflineComponentProvider");try{await ua(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!function(s){return s.name==="FirebaseError"?s.code===k.FAILED_PRECONDITION||s.code===k.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;Er("Error using user provided cache. Falling back to memory cache: "+n),await ua(e,new Hi)}}else Y(Cn,"Using default OfflineComponentProvider"),await ua(e,new xT(void 0));return e._offlineComponents}async function Jd(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(Y(Cn,"Using user provided OnlineComponentProvider"),await uh(e,e._uninitializedComponentsProvider._online)):(Y(Cn,"Using default OnlineComponentProvider"),await uh(e,new Ua))),e._onlineComponents}function MT(e){return Jd(e).then(t=>t.syncEngine)}async function LT(e){const t=await Jd(e),n=t.eventManager;return n.onListen=vT.bind(null,t.syncEngine),n.onUnlisten=wT.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=ET.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=IT.bind(null,t.syncEngine),n}function FT(e,t,n={}){const r=new gn;return e.asyncQueue.enqueueAndForget(async()=>function(i,a,l,c,f){const d=new NT({next:_=>{d.Cu(),a.enqueueAndForget(()=>hT(i,m)),_.fromCache&&c.source==="server"?f.reject(new Z(k.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):f.resolve(_)},error:_=>f.reject(_)}),m=new pT(l,d,{includeMetadataChanges:!0,La:!0});return cT(i,m)}(await LT(e),e.asyncQueue,t,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zd(e){const t={};return e.timeoutSeconds!==void 0&&(t.timeoutSeconds=e.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ch=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tp(e,t,n){if(!n)throw new Z(k.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function BT(e,t,n,r){if(t===!0&&r===!0)throw new Z(k.INVALID_ARGUMENT,`${e} and ${n} cannot be used together.`)}function hh(e){if(!et.isDocumentKey(e))throw new Z(k.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function fh(e){if(et.isDocumentKey(e))throw new Z(k.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function xl(e){if(e===void 0)return"undefined";if(e===null)return"null";if(typeof e=="string")return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if(typeof e=="number"||typeof e=="boolean")return""+e;if(typeof e=="object"){if(e instanceof Array)return"an array";{const t=function(r){return r.constructor?r.constructor.name:null}(e);return t?`a custom ${t} object`:"an object"}}return typeof e=="function"?"a function":rt(12329,{type:typeof e})}function Rn(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new Z(k.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=xl(e);throw new Z(k.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ep="firestore.googleapis.com",dh=!0;class ph{constructor(t){var n,r;if(t.host===void 0){if(t.ssl!==void 0)throw new Z(k.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=ep,this.ssl=dh}else this.host=t.host,this.ssl=(n=t.ssl)!==null&&n!==void 0?n:dh;if(this.isUsingEmulator=t.emulatorOptions!==void 0,this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=xd;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<fE)throw new Z(k.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}BT("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Zd((r=t.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new Z(k.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new Z(k.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new Z(k.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class To{constructor(t,n,r,s){this._authCredentials=t,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new ph({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Z(k.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new Z(k.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new ph(t),this._emulatorOptions=t.emulatorOptions||{},t.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new jy;switch(r.type){case"firstParty":return new Ky(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Z(k.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=ch.get(n);r&&(Y("ComponentProvider","Removing Datastore"),ch.delete(n),r.terminate())}(this),Promise.resolve()}}function UT(e,t,n,r={}){var s;e=Rn(e,To);const i=al(t),a=e._getSettings(),l=Object.assign(Object.assign({},a),{emulatorOptions:e._getEmulatorOptions()}),c=`${t}:${n}`;i&&(m_(`https://${c}`),v_("Firestore",!0)),a.host!==ep&&a.host!==c&&Er("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const f=Object.assign(Object.assign({},a),{host:c,ssl:i,emulatorOptions:r});if(!Di(f,l)&&(e._setSettings(f),r.mockUserToken)){let d,m;if(typeof r.mockUserToken=="string")d=r.mockUserToken,m=te.MOCK_USER;else{d=g_(r.mockUserToken,(s=e._app)===null||s===void 0?void 0:s.options.projectId);const _=r.mockUserToken.sub||r.mockUserToken.user_id;if(!_)throw new Z(k.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");m=new te(_)}e._authCredentials=new qy(new qf(d,m))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wo{constructor(t,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=t}withConverter(t){return new wo(this.firestore,t,this._query)}}class ve{constructor(t,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new _n(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new ve(this.firestore,t,this._key)}}class _n extends wo{constructor(t,n,r){super(t,n,ld(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new ve(this.firestore,null,new et(t))}withConverter(t){return new _n(this.firestore,t,this._path)}}function Os(e,t,...n){if(e=En(e),tp("collection","path",t),e instanceof To){const r=Rt.fromString(t,...n);return fh(r),new _n(e,null,r)}{if(!(e instanceof ve||e instanceof _n))throw new Z(k.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=e._path.child(Rt.fromString(t,...n));return fh(r),new _n(e.firestore,null,r)}}function Nl(e,t,...n){if(e=En(e),arguments.length===1&&(t=zf.newId()),tp("doc","path",t),e instanceof To){const r=Rt.fromString(t,...n);return hh(r),new ve(e,null,new et(r))}{if(!(e instanceof ve||e instanceof _n))throw new Z(k.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=e._path.child(Rt.fromString(t,...n));return hh(r),new ve(e.firestore,e instanceof _n?e.converter:null,new et(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mh="AsyncQueue";class gh{constructor(t=Promise.resolve()){this.zu=[],this.ju=!1,this.Hu=[],this.Ju=null,this.Yu=!1,this.Zu=!1,this.Xu=[],this.C_=new Md(this,"async_queue_retry"),this.ec=()=>{const r=la();r&&Y(mh,"Visibility state changed to "+r.visibilityState),this.C_.p_()},this.tc=t;const n=la();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.ec)}get isShuttingDown(){return this.ju}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.nc(),this.rc(t)}enterRestrictedMode(t){if(!this.ju){this.ju=!0,this.Zu=t||!1;const n=la();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.ec)}}enqueue(t){if(this.nc(),this.ju)return new Promise(()=>{});const n=new gn;return this.rc(()=>this.ju&&this.Zu?Promise.resolve():(t().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.zu.push(t),this.sc()))}async sc(){if(this.zu.length!==0){try{await this.zu[0](),this.zu.shift(),this.C_.reset()}catch(t){if(!Dr(t))throw t;Y(mh,"Operation failed with retryable error: "+t)}this.zu.length>0&&this.C_.f_(()=>this.sc())}}rc(t){const n=this.tc.then(()=>(this.Yu=!0,t().catch(r=>{throw this.Ju=r,this.Yu=!1,Ze("INTERNAL UNHANDLED ERROR: ",_h(r)),r}).then(r=>(this.Yu=!1,r))));return this.tc=n,n}enqueueAfterDelay(t,n,r){this.nc(),this.Xu.indexOf(t)>-1&&(n=0);const s=Rl.createAndSchedule(this,t,n,r,i=>this.oc(i));return this.Hu.push(s),s}nc(){this.Ju&&rt(47125,{_c:_h(this.Ju)})}verifyOperationInProgress(){}async ac(){let t;do t=this.tc,await t;while(t!==this.tc)}uc(t){for(const n of this.Hu)if(n.timerId===t)return!0;return!1}cc(t){return this.ac().then(()=>{this.Hu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Hu)if(n.skipDelay(),t!=="all"&&n.timerId===t)break;return this.ac()})}lc(t){this.Xu.push(t)}oc(t){const n=this.Hu.indexOf(t);this.Hu.splice(n,1)}}function _h(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+`
`+e.stack),t}class ks extends To{constructor(t,n,r,s){super(t,n,r,s),this.type="firestore",this._queue=new gh,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new gh(t),this._firestoreClient=void 0,await t}}}function $T(e,t){const n=typeof e=="object"?e:Py(),r=typeof e=="string"?e:ki,s=Ay(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=d_("firestore");i&&UT(s,...i)}return s}function np(e){if(e._terminated)throw new Z(k.FAILED_PRECONDITION,"The client has already been terminated.");return e._firestoreClient||jT(e),e._firestoreClient}function jT(e){var t,n,r;const s=e._freezeSettings(),i=function(l,c,f,d){return new av(l,c,f,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,Zd(d.experimentalLongPollingOptions),d.useFetchStreams,d.isUsingEmulator)}(e._databaseId,((t=e._app)===null||t===void 0?void 0:t.options.appId)||"",e._persistenceKey,s);e._componentsProvider||!((n=s.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(e._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),e._firestoreClient=new OT(e._authCredentials,e._appCheckCredentials,e._queue,i,e._componentsProvider&&function(l){const c=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(c),_online:c}}(e._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cr{constructor(t){this._byteString=t}static fromBase64String(t){try{return new Cr(Wt.fromBase64String(t))}catch(n){throw new Z(k.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(t){return new Cr(Wt.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Io{constructor(...t){for(let n=0;n<t.length;++n)if(t[n].length===0)throw new Z(k.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Gt(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ol{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kl{constructor(t,n){if(!isFinite(t)||t<-90||t>90)throw new Z(k.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new Z(k.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(t){return ct(this._lat,t._lat)||ct(this._long,t._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ml{constructor(t){this._values=(t||[]).map(n=>n)}toArray(){return this._values.map(t=>t)}isEqual(t){return function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0}(this._values,t._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qT=/^__.*__$/;class HT{constructor(t,n,r){this.data=t,this.fieldMask=n,this.fieldTransforms=r}toMutation(t,n){return this.fieldMask!==null?new Pn(t,this.data,this.fieldMask,n,this.fieldTransforms):new Vs(t,this.data,n,this.fieldTransforms)}}class rp{constructor(t,n,r){this.data=t,this.fieldMask=n,this.fieldTransforms=r}toMutation(t,n){return new Pn(t,this.data,this.fieldMask,n,this.fieldTransforms)}}function sp(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw rt(40011,{hc:e})}}class Ll{constructor(t,n,r,s,i,a){this.settings=t,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.Pc(),this.fieldTransforms=i||[],this.fieldMask=a||[]}get path(){return this.settings.path}get hc(){return this.settings.hc}Tc(t){return new Ll(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ic(t){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(t),s=this.Tc({path:r,Ec:!1});return s.dc(t),s}Ac(t){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(t),s=this.Tc({path:r,Ec:!1});return s.Pc(),s}Rc(t){return this.Tc({path:void 0,Ec:!0})}Vc(t){return zi(t,this.settings.methodName,this.settings.mc||!1,this.path,this.settings.fc)}contains(t){return this.fieldMask.find(n=>t.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>t.isPrefixOf(n.field))!==void 0}Pc(){if(this.path)for(let t=0;t<this.path.length;t++)this.dc(this.path.get(t))}dc(t){if(t.length===0)throw this.Vc("Document fields must not be empty");if(sp(this.hc)&&qT.test(t))throw this.Vc('Document fields cannot begin and end with "__"')}}class zT{constructor(t,n,r){this.databaseId=t,this.ignoreUndefinedProperties=n,this.serializer=r||yo(t)}gc(t,n,r,s=!1){return new Ll({hc:t,methodName:n,fc:r,path:Gt.emptyPath(),Ec:!1,mc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Fl(e){const t=e._freezeSettings(),n=yo(e._databaseId);return new zT(e._databaseId,!!t.ignoreUndefinedProperties,n)}function ip(e,t,n,r,s,i={}){const a=e.gc(i.merge||i.mergeFields?2:0,t,n,s);Bl("Data must be an object, but it was:",a,r);const l=op(r,a);let c,f;if(i.merge)c=new ye(a.fieldMask),f=a.fieldTransforms;else if(i.mergeFields){const d=[];for(const m of i.mergeFields){const _=$a(t,m,n);if(!a.contains(_))throw new Z(k.INVALID_ARGUMENT,`Field '${_}' is specified in your field mask but missing from your input data.`);lp(d,_)||d.push(_)}c=new ye(d),f=a.fieldTransforms.filter(m=>c.covers(m.field))}else c=null,f=a.fieldTransforms;return new HT(new de(l),c,f)}class Ao extends Ol{_toFieldTransform(t){if(t.hc!==2)throw t.hc===1?t.Vc(`${this._methodName}() can only appear at the top level of your update data`):t.Vc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof Ao}}function KT(e,t,n,r){const s=e.gc(1,t,n);Bl("Data must be an object, but it was:",s,r);const i=[],a=de.empty();Sn(r,(c,f)=>{const d=Ul(t,c,n);f=En(f);const m=s.Ac(d);if(f instanceof Ao)i.push(d);else{const _=bo(f,m);_!=null&&(i.push(d),a.set(d,_))}});const l=new ye(i);return new rp(a,l,s.fieldTransforms)}function GT(e,t,n,r,s,i){const a=e.gc(1,t,n),l=[$a(t,r,n)],c=[s];if(i.length%2!=0)throw new Z(k.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let _=0;_<i.length;_+=2)l.push($a(t,i[_])),c.push(i[_+1]);const f=[],d=de.empty();for(let _=l.length-1;_>=0;--_)if(!lp(f,l[_])){const b=l[_];let D=c[_];D=En(D);const L=a.Ac(b);if(D instanceof Ao)f.push(b);else{const M=bo(D,L);M!=null&&(f.push(b),d.set(b,M))}}const m=new ye(f);return new rp(d,m,a.fieldTransforms)}function bo(e,t){if(ap(e=En(e)))return Bl("Unsupported field value:",t,e),op(e,t);if(e instanceof Ol)return function(r,s){if(!sp(s.hc))throw s.Vc(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Vc(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(e,t),null;if(e===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.Ec&&t.hc!==4)throw t.Vc("Nested arrays are not supported");return function(r,s){const i=[];let a=0;for(const l of r){let c=bo(l,s.Rc(a));c==null&&(c={nullValue:"NULL_VALUE"}),i.push(c),a++}return{arrayValue:{values:i}}}(e,t)}return function(r,s){if((r=En(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return Dv(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=Lt.fromDate(r);return{timestampValue:$i(s.serializer,i)}}if(r instanceof Lt){const i=new Lt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:$i(s.serializer,i)}}if(r instanceof kl)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Cr)return{bytesValue:bd(s.serializer,r._byteString)};if(r instanceof ve){const i=s.databaseId,a=r.firestore._databaseId;if(!a.isEqual(i))throw s.Vc(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:yl(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof Ml)return function(a,l){return{mapValue:{fields:{[Zf]:{stringValue:td},[Mi]:{arrayValue:{values:a.toArray().map(f=>{if(typeof f!="number")throw l.Vc("VectorValues must only contain numeric values.");return ml(l.serializer,f)})}}}}}}(r,s);throw s.Vc(`Unsupported field value: ${xl(r)}`)}(e,t)}function op(e,t){const n={};return Gf(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Sn(e,(r,s)=>{const i=bo(s,t.Ic(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function ap(e){return!(typeof e!="object"||e===null||e instanceof Array||e instanceof Date||e instanceof Lt||e instanceof kl||e instanceof Cr||e instanceof ve||e instanceof Ol||e instanceof Ml)}function Bl(e,t,n){if(!ap(n)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(n)){const r=xl(n);throw r==="an object"?t.Vc(e+" a custom object"):t.Vc(e+" "+r)}}function $a(e,t,n){if((t=En(t))instanceof Io)return t._internalPath;if(typeof t=="string")return Ul(e,t);throw zi("Field path arguments must be of type string or ",e,!1,void 0,n)}const WT=new RegExp("[~\\*/\\[\\]]");function Ul(e,t,n){if(t.search(WT)>=0)throw zi(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,n);try{return new Io(...t.split("."))._internalPath}catch{throw zi(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,n)}}function zi(e,t,n,r,s){const i=r&&!r.isEmpty(),a=s!==void 0;let l=`Function ${t}() called with invalid data`;n&&(l+=" (via `toFirestore()`)"),l+=". ";let c="";return(i||a)&&(c+=" (found",i&&(c+=` in field ${r}`),a&&(c+=` in document ${s}`),c+=")"),new Z(k.INVALID_ARGUMENT,l+e+c)}function lp(e,t){return e.some(n=>n.isEqual(t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class up{constructor(t,n,r,s,i){this._firestore=t,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new ve(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new QT(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const n=this._document.data.field(cp("DocumentSnapshot.get",t));if(n!==null)return this._userDataWriter.convertValue(n)}}}class QT extends up{data(){return super.data()}}function cp(e,t){return typeof t=="string"?Ul(e,t):t instanceof Io?t._internalPath:t._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YT(e){if(e.limitType==="L"&&e.explicitOrderBy.length===0)throw new Z(k.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class XT{convertValue(t,n="none"){switch(An(t)){case 0:return null;case 1:return t.booleanValue;case 2:return Vt(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,n);case 5:return t.stringValue;case 6:return this.convertBytes(In(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,n);case 11:return this.convertObject(t.mapValue,n);case 10:return this.convertVectorValue(t.mapValue);default:throw rt(62114,{value:t})}}convertObject(t,n){return this.convertObjectMap(t.fields,n)}convertObjectMap(t,n="none"){const r={};return Sn(t,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertVectorValue(t){var n,r,s;const i=(s=(r=(n=t.fields)===null||n===void 0?void 0:n[Mi].arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.map(a=>Vt(a.doubleValue));return new Ml(i)}convertGeoPoint(t){return new kl(Vt(t.latitude),Vt(t.longitude))}convertArray(t,n){return(t.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(t,n){switch(n){case"previous":const r=co(t);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Is(t));default:return null}}convertTimestamp(t){const n=wn(t);return new Lt(n.seconds,n.nanos)}convertDocumentKey(t,n){const r=Rt.fromString(t);vt(Dd(r),9688,{name:t});const s=new As(r.get(1),r.get(3)),i=new et(r.popFirst(5));return s.isEqual(n)||Ze(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hp(e,t,n){let r;return r=e?e.toFirestore(t):t,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class li{constructor(t,n){this.hasPendingWrites=t,this.fromCache=n}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class JT extends up{constructor(t,n,r,s,i,a){super(t,n,r,s,a),this._firestore=t,this._firestoreImpl=t,this.metadata=i}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const n=new _i(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,n={}){if(this._document){const r=this._document.data.field(cp("DocumentSnapshot.get",t));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class _i extends JT{data(t={}){return super.data(t)}}class ZT{constructor(t,n,r,s){this._firestore=t,this._userDataWriter=n,this._snapshot=s,this.metadata=new li(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const t=[];return this.forEach(n=>t.push(n)),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,n){this._snapshot.docs.forEach(r=>{t.call(n,new _i(this._firestore,this._userDataWriter,r.key,r,new li(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){const n=!!t.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Z(k.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let a=0;return s._snapshot.docChanges.map(l=>{const c=new _i(s._firestore,s._userDataWriter,l.doc.key,l.doc,new li(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);return l.doc,{type:"added",doc:c,oldIndex:-1,newIndex:a++}})}{let a=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(l=>i||l.type!==3).map(l=>{const c=new _i(s._firestore,s._userDataWriter,l.doc.key,l.doc,new li(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);let f=-1,d=-1;return l.type!==0&&(f=a.indexOf(l.doc.key),a=a.delete(l.doc.key)),l.type!==1&&(a=a.add(l.doc),d=a.indexOf(l.doc.key)),{type:tw(l.type),doc:c,oldIndex:f,newIndex:d}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function tw(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return rt(61501,{type:e})}}class ew extends XT{constructor(t){super(),this.firestore=t}convertBytes(t){return new Cr(t)}convertReference(t){const n=this.convertDocumentKey(t,this.firestore._databaseId);return new ve(this.firestore,null,n)}}function $l(e){e=Rn(e,wo);const t=Rn(e.firestore,ks),n=np(t),r=new ew(t);return YT(e._query),FT(n,e._query).then(s=>new ZT(t,r,e,s))}function nw(e,t,n){e=Rn(e,ve);const r=Rn(e.firestore,ks),s=hp(e.converter,t);return jl(r,[ip(Fl(r),"setDoc",e._key,s,e.converter!==null,n).toMutation(e._key,Se.none())])}function rw(e,t,n,...r){e=Rn(e,ve);const s=Rn(e.firestore,ks),i=Fl(s);let a;return a=typeof(t=En(t))=="string"||t instanceof Io?GT(i,"updateDoc",e._key,t,n,r):KT(i,"updateDoc",e._key,t),jl(s,[a.toMutation(e._key,Se.exists(!0))])}function fp(e,t){const n=Rn(e.firestore,ks),r=Nl(e),s=hp(e.converter,t);return jl(n,[ip(Fl(e.firestore),"addDoc",r._key,s,e.converter!==null,{}).toMutation(r._key,Se.exists(!1))]).then(()=>r)}function jl(e,t){return function(r,s){const i=new gn;return r.asyncQueue.enqueueAndForget(async()=>AT(await MT(r),s,i)),i.promise}(np(e),t)}(function(t,n=!0){(function(s){Pr=s})(Sy),Ni(new Es("firestore",(r,{instanceIdentifier:s,options:i})=>{const a=r.getProvider("app").getImmediate(),l=new ks(new Hy(r.getProvider("auth-internal")),new Gy(a,r.getProvider("app-check-internal")),function(f,d){if(!Object.prototype.hasOwnProperty.apply(f.options,["projectId"]))throw new Z(k.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new As(f.options.projectId,d)}(a,s),a);return i=Object.assign({useFetchStreams:n},i),l._setSettings(i),l},"PUBLIC").setMultipleInstances(!0)),yr(wc,Ic,t),yr(wc,Ic,"esm2017")})();const sw={apiKey:"AIzaSyBfEjIN62cziILtgZ_z6di1yh9MinR_ZaU",authDomain:"inventory-beginner.firebaseapp.com",projectId:"inventory-beginner",storageBucket:"inventory-beginner.firebasestorage.app",messagingSenderId:"712568182225",appId:"1:712568182225:web:339bcd7ba29836f78f7cf0"},iw=Nf(sw),Xn=$T(iw);async function yh(){const e=Os(Xn,"item");try{const t=await $l(e),n=[];return t.forEach(r=>{const s=r.data();n.push({id:r.id,name:s.name,stock:s.stock})}),n}catch(t){throw console.error("Error fetching inventory items:",t),t}}async function vh(){const e=Os(Xn,"tradeinfo");try{const t=await $l(e),n=[];return t.forEach(r=>{const s=r.data(),i={id:r.id,quantity:s.quantity,amount:s.amount,isPurchase:s.isPurchase,isCash:s.isCash,date:s.date,newName:s.newName};n.push(i)}),n}catch(t){throw console.error("Error fetching trade log:",t),t}}const ow="n7durBkG2jOEEmHfypaF";async function Eh(){const e=Os(Xn,"cash");try{const t=await $l(e);if(t.empty)return console.warn("No documents found in 'cash' collection."),null;{const n=t.docs[0],r=n.data();if(!r)return console.warn(`Document ${n.id} in 'cash' collection has no data.`),null;const s={1e4:0,5e3:0,1e3:0,500:0,100:0,50:0,10:0,5:0,1:0};for(const i in r)if(Object.prototype.hasOwnProperty.call(r,i)){const a=Number(i),l=r[i];!isNaN(a)&&typeof l=="number"?s[a]=l:console.warn(`Skipping invalid entry in cash document: key='${i}', value='${l}'`)}return s}}catch(t){throw console.error("Error fetching or processing cash document:",t),t}}async function aw(e){const t=Os(Xn,"item");try{const n=await fp(t,{name:e.name,stock:e.stock});return console.log("New item added with ID: ",n.id),n.id}catch(n){throw console.error("Error adding new item: ",n),n}}async function lw(e,t){if(!e)throw new Error("Item ID must be provided to edit an item.");const n=Nl(Xn,"item",e);try{await rw(n,t),console.log(`Item with ID ${e} updated successfully.`)}catch(r){throw console.error(`Error updating item with ID ${e}: `,r),r}}async function uw(e){const t=Os(Xn,"tradeinfo");try{const n=await fp(t,e);return console.log("New tradeinfo added with ID: ",n.id),n.id}catch(n){throw console.error("Error adding new tradeinfo: ",n),n}}async function cw(e,t=ow){if(!t)throw new Error("Cash document ID must be provided to set cash.");const n=Nl(Xn,"cash",t);try{await nw(n,e),console.log(`Cash document with ID ${t} set/created successfully.`)}catch(r){throw console.error(`Error setting cash document with ID ${t}: `,r),r}}const hw={class:"new-trade-component"},fw={class:"trade-detail"},dw=["disabled"],pw={class:"trade-detail"},mw=["disabled"],gw=["value"],_w={key:0,class:"trade-detail"},yw=["disabled"],vw={class:"trade-detail"},Ew=["disabled"],Tw={class:"trade-detail"},ww=["disabled"],Iw={class:"trade-detail"},Aw=["disabled"],bw={class:"trade-detail"},Cw=["disabled"],Rw=no({__name:"NewTradeTab",props:{inventory:{},totalCashValue:{},currentBalance:{},trade:{},activeButton:{}},emits:["submitTrade"],setup(e,{emit:t}){const n=e,r=He({...n.trade});gr(()=>n.trade,l=>{console.log("tradeinfo changed ",n.trade),r.value={...l,date:s()}});const s=()=>{const l=new Date,c=l.getFullYear(),f=String(l.getMonth()+1).padStart(2,"0"),d=String(l.getDate()).padStart(2,"0");return`${c}${f}${d}`},i=t;function a(){switch(!0){case r.value.isPurchase===void 0:window.alert("");break;case(r.value.id===""||r.value.id===void 0):window.alert("");break;case(r.value.id==="-1"&&!r.value.newName):window.alert("");break;case(r.value.quantity===0||r.value.quantity===void 0):window.alert("");break;case(r.value.amount===0||r.value.amount===void 0):window.alert("");break;case r.value.isCash===void 0:window.alert("");break;default:if(r.value.id==="-1"){const l=n.inventory.find(c=>c.name===r.value.newName);l&&(r.value.id=l.id,r.value.newName="",Jo(`item exists, set to ${r.value.id}`))}console.log("",r.value),i("submitTrade",r.value)}}return _f(()=>{if(r.value.isPurchase)r.value.amount>n.totalCashValue&&(r.value.amount<=n.currentBalance?r.value.isCash=!1:(r.value.amount=Math.max(n.totalCashValue,n.currentBalance),Jo(`Error: amount is undealable, set to ${r.value.amount}`)));else if(r.value.isPurchase===!1){const l=n.inventory.find(c=>c.id===r.value.id);l&&l.stock<r.value.quantity&&(r.value.quantity=l.stock,Jo(`Error: quantity is undealable, set to ${r.value.quantity}`))}}),so(()=>{r.value.date===void 0&&(r.value.date=s())}),(l,c)=>(Ct(),kt("div",hw,[Q("section",fw,[c[8]||(c[8]=Q("label",{for:"trade-input"}," ",-1)),ln(Q("select",{"onUpdate:modelValue":c[0]||(c[0]=f=>r.value.isPurchase=f),id:"trade-input",disabled:l.activeButton!==1},c[7]||(c[7]=[Q("option",{value:null,disabled:""},"",-1),Q("option",{value:!0},"",-1),Q("option",{value:!1},"",-1)]),8,dw),[[ea,r.value.isPurchase]])]),Q("section",pw,[c[11]||(c[11]=Q("label",{for:"trade-item"},"",-1)),ln(Q("select",{id:"trade-item","onUpdate:modelValue":c[1]||(c[1]=f=>r.value.id=f),disabled:l.activeButton!==1},[c[9]||(c[9]=Q("option",{value:"",disabled:""},"",-1)),(Ct(!0),kt(re,null,gs(n.inventory,f=>(Ct(),kt("option",{key:f.id,value:f.id},ee(f.name),9,gw))),128)),c[10]||(c[10]=Q("option",{value:"-1"},"",-1))],8,mw),[[ea,r.value.id]])]),r.value.id==="-1"?(Ct(),kt("section",_w,[c[12]||(c[12]=Q("label",{for:"new-item-name"},"",-1)),ln(Q("input",{type:"text",id:"new-item-name","onUpdate:modelValue":c[2]||(c[2]=f=>r.value.newName=f),disabled:l.activeButton!==1},null,8,yw),[[Jr,r.value.newName]])])):ys("",!0),Q("section",vw,[c[13]||(c[13]=Q("label",{for:"trade-quantity"},"",-1)),ln(Q("input",{type:"number",id:"trade-quantity","onUpdate:modelValue":c[3]||(c[3]=f=>r.value.quantity=f),min:"0",disabled:l.activeButton!==1},null,8,Ew),[[Jr,r.value.quantity]])]),Q("section",Tw,[c[14]||(c[14]=Q("label",{for:"trade-amount"},"",-1)),ln(Q("input",{type:"number",id:"trade-amount","onUpdate:modelValue":c[4]||(c[4]=f=>r.value.amount=f),min:"0",disabled:l.activeButton!==1},null,8,ww),[[Jr,r.value.amount]])]),Q("section",Iw,[c[16]||(c[16]=Q("label",{for:"trade-payment"},"",-1)),ln(Q("select",{"onUpdate:modelValue":c[5]||(c[5]=f=>r.value.isCash=f),id:"trade-payment",disabled:l.activeButton!==1},c[15]||(c[15]=[Q("option",{value:null,disabled:""},"",-1),Q("option",{value:!0},"",-1),Q("option",{value:!1},"",-1)]),8,Aw),[[ea,r.value.isCash]])]),Q("section",bw,[c[17]||(c[17]=Q("label",{for:"trade-date"},"",-1)),ln(Q("input",{type:"string",id:"trade-date","onUpdate:modelValue":c[6]||(c[6]=f=>r.value.date=f),pattern:"\\d{8}",inputmode:"numeric",maxlength:"8",disabled:l.activeButton!==1},null,8,Cw),[[Jr,r.value.date]])]),l.activeButton===1?(Ct(),kt("button",{key:1,onClick:a},"")):ys("",!0)]))}}),Co=(e,t)=>{const n=e.__vccOpts||e;for(const[r,s]of t)n[r]=s;return n},Sw=Co(Rw,[["__scopeId","data-v-0dc2cf8e"]]),Pw={class:"cash-component"},Vw={class:"cash-detail"},Dw={class:"denomination",for:"cash-quantity"},xw=["onUpdate:modelValue","disabled"],Nw={class:"cash-count"},Ow={class:"balance-detail"},kw={class:"balance-info-row"},Mw={class:"account-balance"},Lw={class:"current-balance"},Fw={class:"balance-change"},Bw=no({__name:"CashTab",props:{currentCash:{},pendingCashChange:{},totalCashValue:{},currentBalance:{},isCash:{type:Boolean},amount:{},activeButton:{}},emits:["submitCashChange"],setup(e,{emit:t}){const n=e,r=He(n.pendingCashChange);gr(()=>n.pendingCashChange,l=>{console.log("pendingCashChange changed ",r.value),r.value={...l}});const s=as(()=>{let l=0;return Object.keys(r.value).forEach(c=>{const f=Number(c);l+=f*r.value[f]}),l});_f(()=>{for(const l in r.value){const c=Number(l);n.currentCash&&n.currentCash[c]+r.value[c]<0&&(console.warn(`: ${l}`),r.value[c]=-n.currentCash[c])}});const i=t;function a(){if(n.isCash&&s.value!==n.amount){console.warn("");return}console.log("",r.value),i("submitCashChange",r.value)}return(l,c)=>(Ct(),kt("div",Pw,[Q("section",Vw,[c[1]||(c[1]=Q("h2",null,"",-1)),Q("ul",null,[(Ct(!0),kt(re,null,gs(r.value,(f,d)=>{var m;return Ct(),kt("li",{key:d},[Q("label",Dw,ee(d)+" ("+ee(((m=l.currentCash)==null?void 0:m[d])??0)+")",1),ln(Q("input",{type:"number",id:"cash-quantity","onUpdate:modelValue":_=>r.value[d]=_,disabled:!l.isCash,placeholder:"-"},null,8,xw),[[Jr,r.value[d]]]),c[0]||(c[0]=wf(" "))])}),128))]),Q("span",Nw,""+ee(s.value)+" / "+ee(n.amount)+"",1)]),Q("section",Ow,[c[3]||(c[3]=Q("h2",null,"",-1)),Q("div",kw,[Q("span",Mw,[c[2]||(c[2]=Q("span",{class:"balance-label"},"",-1)),Q("span",Lw,ee(n.currentBalance)+"",1)]),Q("span",Fw,"(+"+ee(l.isCash?"-":l.amount)+")",1)])]),l.activeButton===2?(Ct(),kt("button",{key:0,onClick:a},"")):ys("",!0)]))}}),Uw=Co(Bw,[["__scopeId","data-v-88858c1d"]]),$w={class:"detail-component"},jw={key:0},qw={class:"item-name"},Hw={class:"item-stock"},zw={key:0},Kw={class:"cash-value"},Gw={class:"cash-quantity"},Ww={class:"cash-quantity"},Qw={class:"balance-amount"},Yw=no({__name:"InventoryTab",props:{inventory:{},currentCash:{},totalCashValue:{},currentBalance:{},activeButton:{}},emits:["registerTrade"],setup(e,{emit:t}){const n=e,r=t;function s(){console.log("registerTrade event emitted"),r("registerTrade")}return(i,a)=>(Ct(),kt("div",$w,[a[4]||(a[4]=Q("h2",null,"",-1)),Q("ul",null,[n.inventory.filter(l=>l.stock!==0).length===0?(Ct(),kt("li",jw,"")):(Ct(!0),kt(re,{key:1},gs(n.inventory.filter(l=>l.stock!==0),l=>(Ct(),kt("li",{key:l.id},[Q("span",qw,ee(l.name),1),Q("span",Hw,ee(l.stock),1)]))),128))]),a[5]||(a[5]=Q("h2",null,"",-1)),Q("ul",null,[(Ct(!0),kt(re,null,gs(n.currentCash,(l,c)=>(Ct(),kt(re,{key:c},[l>0?(Ct(),kt("li",zw,[Q("span",Kw,ee(c)+"",1),Q("span",Gw,ee(l),1)])):ys("",!0)],64))),128)),a[2]||(a[2]=Q("br",null,null,-1)),Q("li",null,[a[1]||(a[1]=Q("span",{class:"cash-value"},"",-1)),Q("span",Ww,ee(n.totalCashValue),1)])]),a[6]||(a[6]=Q("h2",null,"",-1)),Q("ul",null,[Q("li",null,[a[3]||(a[3]=Q("span",{class:"balance-value"},"",-1)),Q("span",Qw,ee(n.currentBalance),1)])]),i.activeButton===3?(Ct(),kt("button",{key:0,onClick:a[0]||(a[0]=l=>s())},"")):ys("",!0)]))}}),Xw=Co(Yw,[["__scopeId","data-v-bc45959b"]]),Jw={class:"tab-title"},Zw={class:"main-container"},tI={class:"tab-column"},eI=["onClick"],nI={class:"main-contents"},rI=no({__name:"App",setup(e){const t=[{id:1,buttonLabel:"",title:"",color:"#F36E2A"},{id:2,buttonLabel:"",title:"",color:"#F49367"},{id:3,buttonLabel:"",title:"",color:"#F5B8A4"}],n=He(3),r=He(3),s=as(()=>{const S=t.find(z=>z.id===n.value);return S?(console.log(`Tab selected: ${S.title}`),S):(console.warn(`Tab with id ${n.value} not found`),t[2])}),i=He(null),a=Object.freeze({id:"0",quantity:0,amount:0,isPurchase:null,isCash:null});let l=He({...a});const c=Object.freeze({1e4:0,5e3:0,1e3:0,500:0,100:0,50:0,10:0,5:0,1:0});let f=He({...c});const d=as(()=>{let S=0;return i.value&&Object.keys(i.value).forEach(z=>{const W=Number(z);S+=W*i.value[W]}),S}),m=He([]),_=He([]),b=as(()=>{let S=0;for(const z of _.value)z.isCash===!1&&(S+=z.isPurchase?-z.amount:+z.amount);return S});so(async()=>{m.value=await yh(),i.value=await Eh(),_.value=await vh(),D()});function D(){l.value={...a},f.value={...c}}function L(S){if(S.id!=="-1"){const z=m.value.find(W=>W.id===S.id);if(z){console.log(`target item: ${JSON.stringify(z)}`);const W=S.isPurchase?1:-1;z.stock+=S.quantity*W,console.log(`Item changed: ${z.name}, quantity: ${S.quantity}`),lw(z.id,{name:z.name,stock:z.stock}),S.isCash&&X(-S.amount*W)}else console.log(`Failed to change item ${S.id}`)}else S.isPurchase&&S.newName&&(aw({name:S.newName,stock:S.quantity}),S.isCash&&X(-S.amount))}function M(S){Object.keys(S).forEach(z=>{const W=Number(z);i.value&&(i.value[W]+=S[W]??0,cw(i.value),console.log(`current ${W} cash count: ${i.value[W]}`))})}function X(S){if(console.log(`handling amount: ${S}`),i.value){const z=Object.keys(i.value).map(Number);if(z.sort((W,w)=>w-W),S>0)for(const W of z)f.value[W]=Math.floor(S/W),S-=f.value[W]*W;else for(const W of z)f.value[W]=-Math.min(Math.floor(-S/W),i.value?i.value[W]:0),S-=f.value[W]*W;console.log(`pending cash changes: ${JSON.stringify(f.value)}`)}}function O(S){console.log("submitTrade event emitted:"),Object.assign(l.value,S),console.log(JSON.stringify(l.value)),L(l.value)}async function $(S){console.log("submitCashChange event emitted:"),M(S),console.log(`pending cash changes: ${JSON.stringify(f.value)}`),console.log(`new trade to be update: ${JSON.stringify(l.value)}`),uw(l.value),D(),m.value=await yh(),i.value=await Eh(),_.value=await vh()}return(S,z)=>(Ct(),kt(re,null,[z[4]||(z[4]=Q("header",null,[Q("h1",null,"")],-1)),Q("main",null,[Q("div",Jw,[Q("h2",null,ee(s.value.title),1)]),Q("div",Zw,[Q("div",tI,[(Ct(),kt(re,null,gs(t,W=>Q("button",{key:W.id,onClick:w=>n.value=W.id,class:Xi(["tab-button"]),style:Yi({backgroundColor:W.color})},ee(W.buttonLabel),13,eI)),64))]),Q("div",nI,[z[3]||(z[3]=Q("div",{class:"main-placeholder"},null,-1)),(Ct(),Xr(xm,null,[s.value.id===3?(Ct(),Xr(Xw,{key:0,inventory:m.value,currentCash:i.value,totalCashValue:d.value,currentBalance:b.value,activeButton:r.value,onRegisterTrade:z[0]||(z[0]=W=>(n.value=1,r.value=1))},null,8,["inventory","currentCash","totalCashValue","currentBalance","activeButton"])):s.value.id===1?(Ct(),Xr(Sw,{key:1,inventory:m.value,totalCashValue:d.value,currentBalance:b.value,trade:Bn(l),activeButton:r.value,onSubmitTrade:z[1]||(z[1]=W=>{O(W),n.value=2,r.value=2})},null,8,["inventory","totalCashValue","currentBalance","trade","activeButton"])):(Ct(),Xr(Uw,{key:2,currentCash:i.value,totalCashValue:d.value,pendingCashChange:Bn(f),currentBalance:b.value,activeButton:r.value,isCash:Bn(l).isCash??!1,amount:Bn(l).isPurchase?-Bn(l).amount:Bn(l).amount,onSubmitCashChange:z[2]||(z[2]=W=>{$(W),n.value=3,r.value=3})},null,8,["currentCash","totalCashValue","pendingCashChange","currentBalance","activeButton","isCash","amount"]))],1024))])])]),z[5]||(z[5]=Q("footer",null,null,-1))],64))}}),sI=Co(rI,[["__scopeId","data-v-04b1762d"]]);t_(sI).mount("#app");
